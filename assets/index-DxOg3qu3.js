import{r as g,j as e,B as c,C as pt,T as i,G as x,P as mt,a as Le,A as ge,b as me,c as I,d as he,e as ve,f as X,g as P,h as O,i as C,k as S,F as Vt,D as Yt,l as Ke,m as E,I as re,n as Qt,o as Kt,u as Xt,p as Zt,q as er,s as ct,t as lt,S as dt,M as ie,v as tr,w as pe,x as _t,y as Xe,z as Pt,E as rt,H as He,J as Pe,K as ze,L as rr,N as Oe,O as ut,Q as B,R as J,U as V,V as bt,W as we,X as ke,Y as nr,Z as sr,_ as nt,$ as Ze,a0 as ir,a1 as or,a2 as ar,a3 as cr,a4 as lr,a5 as dr,a6 as ur,a7 as hr,a8 as pr,a9 as mr,aa as xr,ab as gr,ac as yr,ad as fr,ae as br,af as jr,ag as vr,ah as wr,ai as kr,aj as _r,ak as Cr,al as Sr,am as Ar,an as Rr,ao as Dr,ap as Ct,aq as St,ar as zr}from"./mui-FjLwienu.js";import{b as Tr,a as Ir,g as $r}from"./vendor-UnWXGYuj.js";import{u as Ee,Q as Pr,a as Er}from"./query-DKOW5iav.js";import{O as _e}from"./github-D8WxN306.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var Ve={},At;function Wr(){if(At)return Ve;At=1;var l=Tr();return Ve.createRoot=l.createRoot,Ve.hydrateRoot=l.hydrateRoot,Ve}var Mr=Wr();let Or={data:""},Fr=l=>typeof window=="object"?((l?l.querySelector("#_goober"):window._goober)||Object.assign((l||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:l||Or,Gr=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Lr=/\/\*[^]*?\*\/|  +/g,Rt=/\n+/g,xe=(l,t)=>{let r="",n="",s="";for(let o in l){let a=l[o];o[0]=="@"?o[1]=="i"?r=o+" "+a+";":n+=o[1]=="f"?xe(a,o):o+"{"+xe(a,o[1]=="k"?"":t)+"}":typeof a=="object"?n+=xe(a,t?t.replace(/([^,])+/g,d=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,d):d?d+" "+u:u)):o):a!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=xe.p?xe.p(o,a):o+":"+a+";")}return r+(t&&s?t+"{"+s+"}":s)+n},de={},Et=l=>{if(typeof l=="object"){let t="";for(let r in l)t+=r+Et(l[r]);return t}return l},Hr=(l,t,r,n,s)=>{let o=Et(l),a=de[o]||(de[o]=(u=>{let h=0,p=11;for(;h<u.length;)p=101*p+u.charCodeAt(h++)>>>0;return"go"+p})(o));if(!de[a]){let u=o!==l?l:(h=>{let p,v,f=[{}];for(;p=Gr.exec(h.replace(Lr,""));)p[4]?f.shift():p[3]?(v=p[3].replace(Rt," ").trim(),f.unshift(f[0][v]=f[0][v]||{})):f[0][p[1]]=p[2].replace(Rt," ").trim();return f[0]})(l);de[a]=xe(s?{["@keyframes "+a]:u}:u,r?"":"."+a)}let d=r&&de.g?de.g:null;return r&&(de.g=de[a]),((u,h,p,v)=>{v?h.data=h.data.replace(v,u):h.data.indexOf(u)===-1&&(h.data=p?u+h.data:h.data+u)})(de[a],t,n,d),a},Ur=(l,t,r)=>l.reduce((n,s,o)=>{let a=t[o];if(a&&a.call){let d=a(r),u=d&&d.props&&d.props.className||/^go/.test(d)&&d;a=u?"."+u:d&&typeof d=="object"?d.props?"":xe(d,""):d===!1?"":d}return n+s+(a??"")},"");function it(l){let t=this||{},r=l.call?l(t.p):l;return Hr(r.unshift?r.raw?Ur(r,[].slice.call(arguments,1),t.p):r.reduce((n,s)=>Object.assign(n,s&&s.call?s(t.p):s),{}):r,Fr(t.target),t.g,t.o,t.k)}let Wt,xt,gt;it.bind({g:1});let ue=it.bind({k:1});function Nr(l,t,r,n){xe.p=t,Wt=l,xt=r,gt=n}function ye(l,t){let r=this||{};return function(){let n=arguments;function s(o,a){let d=Object.assign({},o),u=d.className||s.className;r.p=Object.assign({theme:xt&&xt()},d),r.o=/ *go\d+/.test(u),d.className=it.apply(r,n)+(u?" "+u:"");let h=l;return l[0]&&(h=d.as||l,delete d.as),gt&&h[0]&&gt(d),Wt(h,d)}return s}}var qr=l=>typeof l=="function",st=(l,t)=>qr(l)?l(t):l,Br=(()=>{let l=0;return()=>(++l).toString()})(),Mt=(()=>{let l;return()=>{if(l===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");l=!t||t.matches}return l}})(),Jr=20,jt="default",Ot=(l,t)=>{let{toastLimit:r}=l.settings;switch(t.type){case 0:return{...l,toasts:[t.toast,...l.toasts].slice(0,r)};case 1:return{...l,toasts:l.toasts.map(a=>a.id===t.toast.id?{...a,...t.toast}:a)};case 2:let{toast:n}=t;return Ot(l,{type:l.toasts.find(a=>a.id===n.id)?1:0,toast:n});case 3:let{toastId:s}=t;return{...l,toasts:l.toasts.map(a=>a.id===s||s===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return t.toastId===void 0?{...l,toasts:[]}:{...l,toasts:l.toasts.filter(a=>a.id!==t.toastId)};case 5:return{...l,pausedAt:t.time};case 6:let o=t.time-(l.pausedAt||0);return{...l,pausedAt:void 0,toasts:l.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+o}))}}},et=[],Ft={toasts:[],pausedAt:void 0,settings:{toastLimit:Jr}},oe={},Gt=(l,t=jt)=>{oe[t]=Ot(oe[t]||Ft,l),et.forEach(([r,n])=>{r===t&&n(oe[t])})},Lt=l=>Object.keys(oe).forEach(t=>Gt(l,t)),Vr=l=>Object.keys(oe).find(t=>oe[t].toasts.some(r=>r.id===l)),ot=(l=jt)=>t=>{Gt(t,l)},Yr={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Qr=(l={},t=jt)=>{let[r,n]=g.useState(oe[t]||Ft),s=g.useRef(oe[t]);g.useEffect(()=>(s.current!==oe[t]&&n(oe[t]),et.push([t,n]),()=>{let a=et.findIndex(([d])=>d===t);a>-1&&et.splice(a,1)}),[t]);let o=r.toasts.map(a=>{var d,u,h;return{...l,...l[a.type],...a,removeDelay:a.removeDelay||((d=l[a.type])==null?void 0:d.removeDelay)||l?.removeDelay,duration:a.duration||((u=l[a.type])==null?void 0:u.duration)||l?.duration||Yr[a.type],style:{...l.style,...(h=l[a.type])==null?void 0:h.style,...a.style}}});return{...r,toasts:o}},Kr=(l,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:l,pauseDuration:0,...r,id:r?.id||Br()}),Ue=l=>(t,r)=>{let n=Kr(t,l,r);return ot(n.toasterId||Vr(n.id))({type:2,toast:n}),n.id},A=(l,t)=>Ue("blank")(l,t);A.error=Ue("error");A.success=Ue("success");A.loading=Ue("loading");A.custom=Ue("custom");A.dismiss=(l,t)=>{let r={type:3,toastId:l};t?ot(t)(r):Lt(r)};A.dismissAll=l=>A.dismiss(void 0,l);A.remove=(l,t)=>{let r={type:4,toastId:l};t?ot(t)(r):Lt(r)};A.removeAll=l=>A.remove(void 0,l);A.promise=(l,t,r)=>{let n=A.loading(t.loading,{...r,...r?.loading});return typeof l=="function"&&(l=l()),l.then(s=>{let o=t.success?st(t.success,s):void 0;return o?A.success(o,{id:n,...r,...r?.success}):A.dismiss(n),s}).catch(s=>{let o=t.error?st(t.error,s):void 0;o?A.error(o,{id:n,...r,...r?.error}):A.dismiss(n)}),l};var Xr=1e3,Zr=(l,t="default")=>{let{toasts:r,pausedAt:n}=Qr(l,t),s=g.useRef(new Map).current,o=g.useCallback((v,f=Xr)=>{if(s.has(v))return;let y=setTimeout(()=>{s.delete(v),a({type:4,toastId:v})},f);s.set(v,y)},[]);g.useEffect(()=>{if(n)return;let v=Date.now(),f=r.map(y=>{if(y.duration===1/0)return;let b=(y.duration||0)+y.pauseDuration-(v-y.createdAt);if(b<0){y.visible&&A.dismiss(y.id);return}return setTimeout(()=>A.dismiss(y.id,t),b)});return()=>{f.forEach(y=>y&&clearTimeout(y))}},[r,n,t]);let a=g.useCallback(ot(t),[t]),d=g.useCallback(()=>{a({type:5,time:Date.now()})},[a]),u=g.useCallback((v,f)=>{a({type:1,toast:{id:v,height:f}})},[a]),h=g.useCallback(()=>{n&&a({type:6,time:Date.now()})},[n,a]),p=g.useCallback((v,f)=>{let{reverseOrder:y=!1,gutter:b=8,defaultPosition:k}=f||{},_=r.filter(j=>(j.position||k)===(v.position||k)&&j.height),w=_.findIndex(j=>j.id===v.id),D=_.filter((j,T)=>T<w&&j.visible).length;return _.filter(j=>j.visible).slice(...y?[D+1]:[0,D]).reduce((j,T)=>j+(T.height||0)+b,0)},[r]);return g.useEffect(()=>{r.forEach(v=>{if(v.dismissed)o(v.id,v.removeDelay);else{let f=s.get(v.id);f&&(clearTimeout(f),s.delete(v.id))}})},[r,o]),{toasts:r,handlers:{updateHeight:u,startPause:d,endPause:h,calculateOffset:p}}},en=ue`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,tn=ue`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,rn=ue`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,nn=ye("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${l=>l.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${en} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${tn} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${l=>l.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${rn} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,sn=ue`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,on=ye("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${l=>l.secondary||"#e0e0e0"};
  border-right-color: ${l=>l.primary||"#616161"};
  animation: ${sn} 1s linear infinite;
`,an=ue`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,cn=ue`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,ln=ye("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${l=>l.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${an} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${cn} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${l=>l.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,dn=ye("div")`
  position: absolute;
`,un=ye("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,hn=ue`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,pn=ye("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${hn} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,mn=({toast:l})=>{let{icon:t,type:r,iconTheme:n}=l;return t!==void 0?typeof t=="string"?g.createElement(pn,null,t):t:r==="blank"?null:g.createElement(un,null,g.createElement(on,{...n}),r!=="loading"&&g.createElement(dn,null,r==="error"?g.createElement(nn,{...n}):g.createElement(ln,{...n})))},xn=l=>`
0% {transform: translate3d(0,${l*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,gn=l=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${l*-150}%,-1px) scale(.6); opacity:0;}
`,yn="0%{opacity:0;} 100%{opacity:1;}",fn="0%{opacity:1;} 100%{opacity:0;}",bn=ye("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,jn=ye("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,vn=(l,t)=>{let r=l.includes("top")?1:-1,[n,s]=Mt()?[yn,fn]:[xn(r),gn(r)];return{animation:t?`${ue(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ue(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},wn=g.memo(({toast:l,position:t,style:r,children:n})=>{let s=l.height?vn(l.position||t||"top-center",l.visible):{opacity:0},o=g.createElement(mn,{toast:l}),a=g.createElement(jn,{...l.ariaProps},st(l.message,l));return g.createElement(bn,{className:l.className,style:{...s,...r,...l.style}},typeof n=="function"?n({icon:o,message:a}):g.createElement(g.Fragment,null,o,a))});Nr(g.createElement);var kn=({id:l,className:t,style:r,onHeightUpdate:n,children:s})=>{let o=g.useCallback(a=>{if(a){let d=()=>{let u=a.getBoundingClientRect().height;n(l,u)};d(),new MutationObserver(d).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[l,n]);return g.createElement("div",{ref:o,className:t,style:r},s)},_n=(l,t)=>{let r=l.includes("top"),n=r?{top:0}:{bottom:0},s=l.includes("center")?{justifyContent:"center"}:l.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Mt()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...s}},Cn=it`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Ye=16,Sn=({reverseOrder:l,position:t="top-center",toastOptions:r,gutter:n,children:s,toasterId:o,containerStyle:a,containerClassName:d})=>{let{toasts:u,handlers:h}=Zr(r,o);return g.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:Ye,left:Ye,right:Ye,bottom:Ye,pointerEvents:"none",...a},className:d,onMouseEnter:h.startPause,onMouseLeave:h.endPause},u.map(p=>{let v=p.position||t,f=h.calculateOffset(p,{reverseOrder:l,gutter:n,defaultPosition:t}),y=_n(v,f);return g.createElement(kn,{id:p.id,key:p.id,onHeightUpdate:h.updateHeight,className:p.visible?Cn:"",style:y},p.type==="custom"?st(p.message,p):s?s(p):g.createElement(wn,{toast:p,position:v}))}))};const Ht="Ov23liGZOHsT9zLCyOJO",An="https://api.github.com",Rn=l=>{const t=Dn();return sessionStorage.setItem("oauth_state",t),`https://github.com/login/oauth/authorize?${new URLSearchParams({client_id:Ht,redirect_uri:l,scope:"user repo",state:t}).toString()}`};function Dn(){return Math.random().toString(36).substring(2)+Date.now().toString(36)}const zn=()=>{const l=window.location.hostname!=="localhost";let t;l?(t="https://detailer.josolinap.dedyn.io",console.log("🔄 Using Production OAuth URL:",t)):(t="http://localhost:5173",console.log("🔄 Using Development OAuth URL:",t));const r=Rn(t);console.log("🚀 OAuth Flow Starting...",{redirectUri:t,oauthUrl:r}),window.location.href=r},Tn=async l=>{const t=await fetch("https://github.com/login/oauth/access_token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:new URLSearchParams({client_id:Ht,client_secret:"88b7c0706ec0022bc9dd16e26c5ccb934c5bfb3a",code:l}).toString()});if(!t.ok)throw new Error("Failed to exchange code for token");return t.json()},In=async l=>{const t=await fetch(`${An}/user`,{headers:{Authorization:`Bearer ${l}`,Accept:"application/vnd.github.v3+json"}});if(!t.ok)throw new Error("Failed to fetch user profile");return t.json()},$n=()=>!!(Pn()||En()),Pn=()=>sessionStorage.getItem("github_token"),En=()=>localStorage.getItem("github_token"),Wn=l=>{sessionStorage.setItem("github_token",l)},Mn=l=>{localStorage.setItem("github_token",l)},Dt=()=>{sessionStorage.removeItem("github_token"),sessionStorage.removeItem("github_user"),localStorage.removeItem("github_token"),localStorage.removeItem("github_user")},On=l=>{sessionStorage.setItem("github_user",JSON.stringify(l))},Fn=l=>{localStorage.setItem("github_user",JSON.stringify(l))},Gn=()=>{let l=sessionStorage.getItem("github_user");return l?JSON.parse(l):(l=localStorage.getItem("github_user"),l?JSON.parse(l):null)},Ln=({onSignIn:l,onAnalyzePublicRepo:t})=>{const[r,n]=g.useState(""),[s,o]=g.useState(!1),[a,d]=g.useState(null),[u,h]=g.useState(1),[p,v]=g.useState(""),[f,y]=g.useState(!1),b="https://github.com/microsoft/vscode",k=[{number:1,title:"Sign In",description:"Connect with GitHub for full access",color:"#6366f1",completed:!1},{number:2,title:"Create Job",description:"Select repository & choose template",color:"#8b5cf6",completed:!1},{number:3,title:"AI Analysis",description:"Advanced code analysis & insights",color:"#10b981",completed:!1},{number:4,title:"Download Results",description:"Get professional documentation",color:"#f59e0b",completed:!1}],_=async()=>{o(!0);try{const j=await t(b,!0);d(j),A.success("Demo analysis completed!")}catch(j){A.error("Failed to analyze demo repository"),console.error(j)}finally{o(!1)}},w=async()=>{if(!r.trim()){A.error("Please enter a public repository URL");return}o(!0);try{const j=await t(r.trim(),!0);d(j),A.success("Repository analysis completed!")}catch(j){A.error("Failed to analyze repository"),console.error(j)}finally{o(!1)}},D=async()=>{if(!p.trim()){A.error("Please enter a GitHub token");return}y(!0);try{if(p.trim().length<20)throw new Error("GitHub token appears to be too short. Please check your token.");if(!p.trim().startsWith("ghp_")&&!p.trim().startsWith("github_pat_"))throw new Error('GitHub token should start with "ghp_" or "github_pat_". Please check your token.');const j=await fetch("https://api.github.com/user",{headers:{Authorization:`Bearer ${p.trim()}`,Accept:"application/vnd.github.v3+json"}});if(!j.ok)throw j.status===401?new Error("Invalid GitHub token. Please check your token and try again."):new Error(`GitHub API error: ${j.status}`);const T=await j.json();Mn(p.trim()),Fn(T),A.success(`Welcome ${T.login}! Authentication successful.`),setTimeout(()=>{window.location.reload()},1500)}catch(j){console.error("Token authentication failed:",j),A.error(`Authentication failed: ${j.message}`)}finally{y(!1)}};return e.jsx(c,{sx:{minHeight:"100vh",background:`
        radial-gradient(ellipse 80% 50% at 20% -20%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
        radial-gradient(ellipse 80% 50% at 80% 50%, rgba(255, 119, 198, 0.15) 0%, transparent 50%),
        radial-gradient(ellipse 80% 50% at 40% 120%, rgba(120, 219, 226, 0.2) 0%, transparent 50%),
        linear-gradient(135deg, #f8fafc 0%, #f1f5f9 25%, #e2e8f0 50%, #f8fafc 75%, #f1f5f9 100%)
      `,backgroundAttachment:"fixed"},children:e.jsxs(pt,{maxWidth:"xl",children:[e.jsxs(c,{sx:{textAlign:"center",py:8,px:{xs:2,md:4}},children:[e.jsxs(c,{sx:{position:"relative",display:"inline-block",mb:4},children:[e.jsx(i,{variant:"h1",sx:{fontSize:{xs:"3rem",md:"4rem",lg:"5rem"},fontWeight:800,background:"linear-gradient(135deg, #6366f1, #8b5cf6, #10b981)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",position:"relative"},children:"📋 Detailer"}),e.jsx(i,{sx:{position:"absolute",top:0,left:"50%",transform:"translateX(-50%)",opacity:.1,fontSize:{xs:"3rem",md:"4rem",lg:"5rem"},fontWeight:800,color:"transparent",WebkitTextStroke:"1px currentColor"},children:"Docs"})]}),e.jsx(i,{variant:"h4",sx:{mb:4,fontWeight:600,color:"text.secondary",maxWidth:700,mx:"auto"},children:"Professional documentation in just a few simple steps"}),e.jsxs(c,{sx:{mb:6},children:[e.jsx(i,{variant:"h6",sx:{mb:4,color:"primary.main",fontWeight:600},children:"How It Works"}),e.jsx(x,{container:!0,spacing:2,justifyContent:"center",sx:{mb:4},children:k.map((j,T)=>e.jsx(x,{item:!0,xs:6,sm:3,children:e.jsxs(c,{sx:{p:2,borderRadius:3,background:`linear-gradient(135deg, ${j.color}20, ${j.color}10)`,border:`2px solid ${j.color}30`,textAlign:"center",position:"relative",cursor:j.number===1?"pointer":"default",transition:"all 0.3s ease","&:hover":j.number===1?{transform:"translateY(-4px)",boxShadow:`0 8px 25px ${j.color}30`}:{}},onClick:()=>j.number===1&&l(),children:[e.jsx(c,{sx:{width:50,height:50,borderRadius:"50%",background:`linear-gradient(135deg, ${j.color}, ${j.color}bb)`,display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:2,position:"relative","&::after":j.number!==4?{content:'""',position:"absolute",right:-15,top:"50%",transform:"translateY(-50%)",width:15,height:2,background:j.color,display:{xs:"none",sm:"block"}}:{}},children:j.number===1?e.jsx(mt,{sx:{color:"white"}}):j.number===2?e.jsx(Le,{sx:{color:"white"}}):j.number===3?e.jsx(ge,{sx:{color:"white"}}):e.jsx(me,{sx:{color:"white"}})}),e.jsxs(i,{variant:"h6",sx:{fontWeight:600,color:j.color,mb:1},children:[j.number,". ",j.title]}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.8rem"},children:j.description})]})},T))})]}),e.jsx(c,{sx:{mb:6},children:e.jsx(I,{variant:"contained",size:"large",onClick:l,sx:{px:6,py:2,fontSize:"1.1rem",fontWeight:600,borderRadius:3,background:"linear-gradient(135deg, #6366f1, #4f46e5)","&:hover":{background:"linear-gradient(135deg, #4f46e5, #3730a3)",transform:"translateY(-2px)",boxShadow:"0 8px 25px rgba(99, 102, 241, 0.3)"},transition:"all 0.3s ease"},startIcon:e.jsx(mt,{}),children:"Get Started - Sign In with GitHub"})}),e.jsxs(c,{sx:{mb:8,maxWidth:600,mx:"auto"},children:[e.jsx(i,{variant:"h6",sx:{mb:3,textAlign:"center",color:"text.secondary"},children:"Or use your GitHub Personal Access Token"}),e.jsx(he,{elevation:0,sx:{p:4,borderRadius:3,background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:e.jsxs(x,{container:!0,spacing:3,children:[e.jsx(x,{item:!0,xs:12,children:e.jsx(ve,{fullWidth:!0,type:"password",label:"GitHub Personal Access Token",value:p,onChange:j=>v(j.target.value),placeholder:"ghp_xxxxxxxxxxxxxxxxxxxx",helperText:"Token needs 'repo' scope for private repositories",variant:"outlined"})}),e.jsx(x,{item:!0,xs:12,md:6,children:e.jsx(I,{fullWidth:!0,variant:"outlined",onClick:()=>v(""),disabled:!p.trim(),sx:{py:1.5,borderRadius:2,textTransform:"none"},children:"Clear Token"})}),e.jsx(x,{item:!0,xs:12,md:6,children:e.jsx(I,{fullWidth:!0,variant:"contained",onClick:D,disabled:!p.trim()||f,sx:{py:1.5,borderRadius:2,background:"linear-gradient(135deg, #10b981, #059669)","&:hover":{background:"linear-gradient(135deg, #059669, #047857)"},"&:disabled":{background:"grey.400"},textTransform:"none"},endIcon:f?e.jsx(X,{size:20}):null,children:f?"Authenticating...":"Sign In with Token"})}),e.jsx(x,{item:!0,xs:12,children:e.jsxs(P,{severity:"info",sx:{borderRadius:2},children:[e.jsx(i,{variant:"body2",sx:{fontWeight:600,mb:1},children:"How to get a GitHub Personal Access Token:"}),e.jsxs(i,{variant:"body2",sx:{mb:1},children:["1. Go to ",e.jsx("a",{href:"https://github.com/settings/tokens",target:"_blank",rel:"noopener noreferrer",style:{color:"#6366f1",textDecoration:"underline"},children:"GitHub Settings → Personal Access Tokens"})]}),e.jsx(i,{variant:"body2",sx:{mb:1},children:'2. Click "Generate new token (classic)"'}),e.jsxs(i,{variant:"body2",sx:{mb:1},children:["3. Select scopes: ",e.jsx("strong",{children:"repo"})," (for private repositories) and ",e.jsx("strong",{children:"user"})," (for public info)"]}),e.jsx(i,{variant:"body2",children:"4. Copy the generated token and paste it above"})]})})]})})]})]}),e.jsx(c,{sx:{py:8,px:{xs:2,md:4}},children:e.jsxs(he,{elevation:0,sx:{p:4,borderRadius:4,background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[e.jsx(i,{variant:"h3",sx:{mb:3,fontWeight:700,textAlign:"center"},children:"🚀 Try the Demo"}),e.jsx(i,{variant:"h6",sx:{mb:4,textAlign:"center",color:"text.secondary"},children:"See Detailer in action with Microsoft's VS Code repository"}),e.jsx(c,{sx:{textAlign:"center",mb:4},children:e.jsx(I,{variant:"contained",size:"large",onClick:_,disabled:s,sx:{px:4,py:2,borderRadius:3,background:"linear-gradient(135deg, #10b981, #059669)","&:hover":{background:"linear-gradient(135deg, #059669, #047857)",transform:"translateY(-2px)",boxShadow:"0 8px 25px rgba(16, 185, 129, 0.3)"},"&:disabled":{background:"grey.400"}},endIcon:s?e.jsx(X,{size:20}):null,children:s?"Analyzing...":`Demo: Analyze ${b}`})}),a&&e.jsxs(c,{sx:{mt:6},children:[e.jsx(P,{severity:"info",sx:{mb:4,borderRadius:2},children:e.jsx(i,{variant:"body2",sx:{fontWeight:600},children:"✨ Preview Mode - Sign in for full analysis and documentation download"})}),e.jsxs(x,{container:!0,spacing:4,children:[e.jsx(x,{item:!0,xs:12,md:6,children:e.jsxs(he,{sx:{p:3,borderRadius:3,bgcolor:"background.paper",border:"1px solid rgba(99, 102, 241, 0.1)"},children:[e.jsx(i,{variant:"h6",sx:{mb:3,fontWeight:600,color:"primary.main"},children:"📋 Repository Overview"}),e.jsxs(x,{container:!0,spacing:2,children:[e.jsxs(x,{item:!0,xs:12,children:[e.jsx(i,{variant:"subtitle2",sx:{fontWeight:600},children:a.basic?.full_name||b.replace("https://github.com/","")}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mt:1},children:a.basic?.description||"A code editor redefined and optimized for building and debugging modern web and cloud applications."})]}),e.jsxs(x,{item:!0,xs:6,children:[e.jsx(i,{variant:"body2",sx:{fontWeight:600,color:"text.secondary",mb:.5},children:"Language"}),e.jsx(O,{label:a.basic?.language||"TypeScript",size:"small",color:"primary"})]}),e.jsxs(x,{item:!0,xs:6,children:[e.jsx(i,{variant:"body2",sx:{fontWeight:600,color:"text.secondary",mb:.5},children:"Stars"}),e.jsxs(i,{variant:"h6",sx:{color:"warning.main"},children:["⭐ ",a.basic?.stars?.toLocaleString()||"146k"]})]}),e.jsxs(x,{item:!0,xs:6,children:[e.jsx(i,{variant:"body2",sx:{fontWeight:600,color:"text.secondary",mb:.5},children:"Forks"}),e.jsxs(i,{variant:"h6",sx:{color:"secondary.main"},children:["🍴 ",a.basic?.forks?.toLocaleString()||"29k"]})]}),e.jsxs(x,{item:!0,xs:6,children:[e.jsx(i,{variant:"body2",sx:{fontWeight:600,color:"text.secondary",mb:.5},children:"Issues"}),e.jsxs(i,{variant:"h6",sx:{color:"error.main"},children:["🐛 ",a.basic?.issues?.toLocaleString()||"12k"]})]})]})]})}),e.jsx(x,{item:!0,xs:12,md:6,children:e.jsxs(he,{sx:{p:3,borderRadius:3,bgcolor:"background.paper",border:"1px solid rgba(16, 185, 129, 0.1)"},children:[e.jsx(i,{variant:"h6",sx:{mb:3,fontWeight:600,color:"secondary.main"},children:"🤖 AI Analysis Preview"}),e.jsxs(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(c,{sx:{p:2,bgcolor:"rgba(16, 185, 129, 0.05)",borderRadius:2,border:"1px solid rgba(16, 185, 129, 0.2)"},children:e.jsxs(i,{variant:"body2",sx:{fontWeight:600},children:["🏗️ Framework Detection: ",a.analysis?.framework||"Detecting..."]})}),e.jsx(c,{sx:{p:2,bgcolor:"rgba(99, 102, 241, 0.05)",borderRadius:2,border:"1px solid rgba(99, 102, 241, 0.2)"},children:e.jsxs(i,{variant:"body2",sx:{fontWeight:600},children:["📊 Language: ",a.basic?.language||"Analyzing..."]})}),e.jsx(c,{sx:{p:2,bgcolor:"rgba(245, 158, 11, 0.05)",borderRadius:2,border:"1px solid rgba(245, 158, 11, 0.2)"},children:e.jsxs(i,{variant:"body2",sx:{fontWeight:600},children:["📁 Repository Size: ",(a.basic?.size/1e3).toFixed(1)||"0"," MB"]})}),e.jsx(c,{sx:{p:2,bgcolor:"rgba(239, 68, 68, 0.05)",borderRadius:2,border:"1px solid rgba(239, 68, 68, 0.2)"},children:e.jsxs(i,{variant:"body2",sx:{fontWeight:600},children:["🔧 Code Complexity: ",a.analysis?.complexity?`${a.analysis.complexity}/100`:"Calculating..."]})})]}),e.jsx(I,{fullWidth:!0,variant:"outlined",onClick:l,sx:{mt:3,py:2,borderWidth:2,"&:hover":{borderWidth:2,background:"primary.main",color:"white"}},children:"🚀 Sign In for Full Analysis & Documentation"})]})})]})]}),e.jsxs(c,{sx:{mt:6,p:4,bgcolor:"rgba(255, 255, 255, 0.5)",borderRadius:3},children:[e.jsx(i,{variant:"h6",sx:{mb:3,fontWeight:600,textAlign:"center"},children:"Try Your Own Public Repository"}),e.jsxs(x,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(x,{item:!0,xs:12,md:8,children:e.jsx(ve,{fullWidth:!0,label:"Public Repository URL",placeholder:"https://github.com/owner/repository",value:r,onChange:j=>n(j.target.value),helperText:"Enter any GitHub public repository URL for instant analysis"})}),e.jsx(x,{item:!0,xs:12,md:4,children:e.jsx(I,{fullWidth:!0,variant:"contained",onClick:w,disabled:s||!r.trim(),sx:{py:1.5,background:"linear-gradient(135deg, #6366f1, #4f46e5)","&:hover":{background:"linear-gradient(135deg, #4f46e5, #3730a3)"}},children:"Analyze Repository"})})]})]})]})}),e.jsx(c,{sx:{py:8,px:{xs:2,md:4}},children:e.jsxs(he,{elevation:0,sx:{p:6,borderRadius:4,background:"linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.05))",border:"1px solid rgba(99, 102, 241, 0.2)",textAlign:"center"},children:[e.jsx(i,{variant:"h3",sx:{mb:3,fontWeight:700,background:"linear-gradient(135deg, #6366f1, #4f46e5)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"🚀 Seamless IDE Integration"}),e.jsx(i,{variant:"h6",sx:{mb:4,color:"text.secondary",maxWidth:600,mx:"auto"},children:"Use Detailer directly in your favorite IDE with our Model Context Protocol (MCP) integration"}),e.jsxs(x,{container:!0,spacing:3,justifyContent:"center",children:[e.jsx(x,{item:!0,xs:12,md:4,children:e.jsxs(he,{sx:{p:3,borderRadius:3,bgcolor:"background.paper",border:"1px solid rgba(0, 0, 0, 0.05)",textAlign:"center"},children:[e.jsx(i,{sx:{fontSize:"3rem",mb:2},children:"🖱️"}),e.jsx(i,{variant:"h6",sx:{mb:1,fontWeight:600},children:"Cursor IDE"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Native integration for the AI-powered IDE"})]})}),e.jsx(x,{item:!0,xs:12,md:4,children:e.jsxs(he,{sx:{p:3,borderRadius:3,bgcolor:"background.paper",border:"1px solid rgba(0, 0, 0, 0.05)",textAlign:"center"},children:[e.jsx(i,{sx:{fontSize:"3rem",mb:2},children:"⚡"}),e.jsx(i,{variant:"h6",sx:{mb:1,fontWeight:600},children:"Real-time Documentation"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Generate docs instantly as you develop"})]})}),e.jsx(x,{item:!0,xs:12,md:4,children:e.jsxs(he,{sx:{p:3,borderRadius:3,bgcolor:"background.paper",border:"1px solid rgba(0, 0, 0, 0.05)",textAlign:"center"},children:[e.jsx(i,{sx:{fontSize:"3rem",mb:2},children:"🤖"}),e.jsx(i,{variant:"h6",sx:{mb:1,fontWeight:600},children:"Contextual AI Assistance"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"AI understands your codebase context"})]})})]}),e.jsx(P,{severity:"info",sx:{mt:4,maxWidth:600,mx:"auto"},children:e.jsx(i,{variant:"body2",sx:{fontWeight:600},children:"✨ Coming Soon - MCP integration will be available in the next release"})})]})})]})})};class Te extends Error{constructor(t,r,n){super(t),this.field=r,this.value=n,this.name="ValidationError"}}class Fe extends Error{constructor(t,r,n){super(t),this.statusCode=r,this.retryAfter=n,this.name="NetworkError"}}class vt{octokit;token;cache;retryConfig;CACHE_TTL=300*1e3;constructor(t={}){this.token=t.token||null,this.octokit=this.token?new _e({auth:this.token}):new _e,this.cache=new Map,this.retryConfig={maxAttempts:t.retries?.maxAttempts||3,delayMs:t.retries?.delayMs||1e3,backoffMultiplier:t.retries?.backoffMultiplier||2}}setToken(t){this.token=t,this.octokit=new _e({auth:t}),this.cache.clear()}async getUserProfile(){if(!this.token)throw new Te("GitHub token is required","token");const t="user_profile",r=this.getCachedData(t);return r||this.withRetry(async()=>{try{const n=await this.octokit.users.getAuthenticated();this.checkRateLimit(n.headers);const s=n.data;return this.setCacheData(t,s),s}catch(n){throw this.handleGitHubError(n,"fetching user profile")}})}async getUserRepos(){if(!this.token)throw new Te("GitHub token is required","token");const t="user_repos",r=this.getCachedData(t);return r||this.withRetry(async()=>{try{const n=await this.octokit.repos.listForAuthenticatedUser({sort:"updated",per_page:100,type:"all"});this.checkRateLimit(n.headers);const s=n.data||[];return this.setCacheData(t,s),s}catch(n){throw this.handleGitHubError(n,"fetching user repositories")}})}async getRepoDetails(t,r){if(!t||!r)throw new Te("Owner and repository name are required","owner/repo");const n=`repo_details_${t}_${r}`,s=this.getCachedData(n);return s?{data:s,status:200,headers:{},rateLimit:void 0}:this.withRetry(async()=>{try{const[o,a,d]=await Promise.all([this.octokit.repos.get({owner:t,repo:r}),this.octokit.repos.listLanguages({owner:t,repo:r}),this.octokit.repos.listContributors({owner:t,repo:r,per_page:10})]);this.checkRateLimit(o.headers);const u={...o.data,languages:a.data,contributors:d.data};return this.setCacheData(n,u),{data:u,status:o.status,headers:o.headers,rateLimit:this.parseRateLimit(o.headers)}}catch(o){throw this.handleGitHubError(o,"fetching repository details")}})}async getRepoContents(t,r,n=""){if(!t||!r)throw new Te("Owner and repository name are required","owner/repo");const s=`repo_contents_${t}_${r}_${n}`,o=this.getCachedData(s);return o||this.withRetry(async()=>{try{const a=await this.octokit.repos.getContent({owner:t,repo:r,path:n,ref:"HEAD"});let d;return Array.isArray(a.data)?d=a.data.map(u=>({name:u.name,path:u.path,type:u.type,size:u.size,download_url:u.download_url,url:u.url,sha:u.sha})):d=[{name:a.data.name,path:a.data.path,type:a.data.type,size:a.data.size,content:a.data.content,encoding:a.data.encoding,sha:a.data.sha,url:a.data.url}],this.setCacheData(s,d),d}catch(a){throw this.handleGitHubError(a,"fetching repository contents")}})}async analyzeRepository(t,r){if(!t||!r)throw new Te("Owner and repository name are required","owner/repo");const n=`repo_analysis_${t}_${r}`,s=this.getCachedData(n);return s||this.withRetry(async()=>{try{const[o,a]=await Promise.all([this.getRepoDetails(t,r),this.getRepoContents(t,r)]);let d;a.find(b=>b.name==="package.json")&&(d=await this.getPackageJson(t,r));let h;const p=a.find(b=>b.name.toLowerCase().includes("readme"));p&&(h=await this.getReadme(t,r,p.path));const v=await this.buildDirectoryStructure(t,r,"",2),f=this.generateAnalysis(o.data,d,v),y={basic:{name:o.data.name,description:o.data.description,language:o.data.language,stars:o.data.stargazers_count||0,forks:o.data.forks_count||0,issues:o.data.open_issues_count||0,created:o.data.created_at||"",updated:o.data.updated_at||"",size:o.data.size},languages:o.data.languages||{},contributors:o.data.contributors||[],packageJson:d,readme:h,structure:v,analysis:f};return this.setCacheData(n,y),y}catch(o){throw this.handleGitHubError(o,"analyzing repository")}})}async buildDirectoryStructure(t,r,n="",s=2,o=0){if(o>=s)return null;try{const a=await this.getRepoContents(t,r,n),d={name:n||"/",path:n||"/",type:"dir",children:[]};for(const u of a)if(u.type==="dir"&&o<s-1){const h=await this.buildDirectoryStructure(t,r,u.path,s,o+1);h&&d.children.push(h)}else u.type==="file"&&d.children.push({name:u.name,path:u.path,type:"file",size:u.size,sha:u.sha});return d}catch(a){return console.error("Error building directory structure:",a),null}}generateAnalysis(t,r,n){const s={framework:this.detectFramework(r),architecture:this.analyzeArchitecture(n),complexity:this.calculateComplexity(n),recommendations:[]};return r?.scripts?.test||s.recommendations.push("Consider adding test scripts"),t.description||s.recommendations.push("Add a repository description"),t.open_issues_count>50&&s.recommendations.push("Consider addressing open issues"),s}detectFramework(t){if(!t)return"Unknown";const r={...t.dependencies,...t.devDependencies};return r.react?"React":r.vue?"Vue.js":r.angular?"Angular":r.express?"Express.js":r.next?"Next.js":r.nuxt?"Nuxt.js":"Vanilla JavaScript/TypeScript"}analyzeArchitecture(t){if(!t)return"Unknown";const r=t.children?.filter(a=>a.type==="dir")||[],n=r.some(a=>a.name==="src"),s=r.some(a=>a.name==="lib"),o=r.some(a=>a.name==="components");return n&&o?"Component-based":n&&s?"Library-based":n?"Standard src structure":"Basic structure"}calculateComplexity(t){if(!t)return"Low";let r=0,n=0;const s=o=>{o.type==="file"?r++:o.type==="dir"&&(n++,o.children?.forEach(s))};return s(t),r>100||n>20?"High":r>50||n>10?"Medium":"Low"}async getPackageJson(t,r){try{const n=await this.octokit.repos.getContent({owner:t,repo:r,path:"package.json"});if("content"in n.data){const s=Buffer.from(n.data.content,"base64").toString("utf-8");return JSON.parse(s)}}catch(n){console.warn("Could not parse package.json:",n)}}async getReadme(t,r,n){try{const s=await this.octokit.repos.getContent({owner:t,repo:r,path:n});if("content"in s.data)return Buffer.from(s.data.content,"base64").toString("utf-8")}catch(s){console.warn("Could not fetch README:",s)}}async withRetry(t){let r;for(let n=1;n<=this.retryConfig.maxAttempts;n++)try{return await t()}catch(s){if(r=s,n===this.retryConfig.maxAttempts)break;if(s instanceof Te||s instanceof Fe&&s.statusCode===401)throw s;const o=this.retryConfig.delayMs*Math.pow(this.retryConfig.backoffMultiplier,n-1);await this.sleep(o)}throw r}sleep(t){return new Promise(r=>setTimeout(r,t))}handleGitHubError(t,r){return console.error(`Error ${r}:`,t),t.status===401?new Fe("Invalid GitHub token. Please check your authentication.",401):t.status===403?new Fe("GitHub API rate limit exceeded. Please try again later.",403):t.status===404?new Fe("Repository not found or access denied.",404):new Fe(`Failed to ${r}. Please check your internet connection and token permissions.`,t.status)}checkRateLimit(t){const r=t["x-ratelimit-remaining"];r&&parseInt(r)<10&&console.warn("GitHub API rate limit low:",r)}parseRateLimit(t){const r=t["x-ratelimit-limit"],n=t["x-ratelimit-remaining"],s=t["x-ratelimit-reset"],o=t["x-ratelimit-used"],a=t["x-ratelimit-resource"];if(r&&n&&s&&o)return{limit:parseInt(r),remaining:parseInt(n),reset:parseInt(s),used:parseInt(o),resource:a||"core"}}getCachedData(t){const r=this.cache.get(t);return r&&Date.now()<r.expiresAt?r.data:(r&&this.cache.delete(t),null)}setCacheData(t,r){const n={data:r,timestamp:Date.now(),expiresAt:Date.now()+this.CACHE_TTL};this.cache.set(t,n)}clearCache(){this.cache.clear()}getCacheStats(){return{size:this.cache.size,maxAge:this.CACHE_TTL}}}const tt=Object.freeze(Object.defineProperty({__proto__:null,default:vt},Symbol.toStringTag,{value:"Module"})),zt=({onNavigateToAnalyzer:l=()=>{}})=>{console.log("🏠 Dashboard component rendering...");const[t,r]=g.useState(""),[n,s]=g.useState([]),[o,a]=g.useState(null),[d,u]=g.useState({totalJobs:0,totalRepos:0,totalDownloads:0,avgComplexity:"Medium"}),h=new vt;console.log("📊 Dashboard state:",{githubToken:!!t,recentJobsCount:n.length,stats:d}),g.useEffect(()=>{const k=localStorage.getItem("github_token"),_=JSON.parse(localStorage.getItem("recent_jobs")||"[]"),w=JSON.parse(localStorage.getItem("dashboard_stats")||"{}");k&&(r(k),h.setToken(k)),s(_),u({...d,...w})},[]);const{data:p}=Ee({queryKey:["user-profile",t],queryFn:async()=>{if(!t)return null;try{return h.setToken(t),await h.getUserProfile()}catch(k){return console.error("Error fetching user profile:",k),null}},enabled:!!t,staleTime:600*1e3}),{data:v}=Ee({queryKey:["user-repos",t],queryFn:async()=>{if(!t)return[];try{return h.setToken(t),await h.getUserRepos()||[]}catch(k){return console.error("Error fetching user repositories:",k),[]}},enabled:!!t,staleTime:600*1e3}),f=()=>{if(t.trim()){if(t.trim().length<20){A.error("GitHub token appears to be too short. Please check your token.");return}if(!t.trim().startsWith("ghp_")&&!t.trim().startsWith("github_pat_")){A.error('GitHub token should start with "ghp_" or "github_pat_". Please check your token.');return}localStorage.setItem("github_token",t.trim()),h.setToken(t.trim()),A.success("GitHub token saved successfully!")}else A.error("Please enter a GitHub token.")},y=()=>{s([]),localStorage.removeItem("recent_jobs"),A.success("Recent jobs cleared!")},b=()=>{const k=JSON.stringify(n,null,2),_=new Blob([k],{type:"application/json"}),w=URL.createObjectURL(_),D=document.createElement("a");D.href=w,D.download="job-history.json",D.click(),URL.revokeObjectURL(w),A.success("Job history exported!")};return e.jsx(c,{sx:{minHeight:"100vh",p:4,backgroundColor:"background.default"},children:e.jsxs(c,{sx:{maxWidth:1200,mx:"auto"},children:[e.jsxs(c,{sx:{mb:6,textAlign:"center"},children:[e.jsx(i,{variant:"h3",sx:{mb:2,fontWeight:"bold",color:"primary.main"},children:"🏠 Dashboard"}),p&&e.jsxs(i,{variant:"h5",sx:{mb:2,background:"linear-gradient(135deg, #10b981, #059669)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontWeight:500},children:["Welcome back, ",p.name||p.login,"!"]}),e.jsx(i,{variant:"h6",color:"text.secondary",sx:{mb:4},children:"Manage your repository analysis jobs and view insights"})]}),e.jsxs(x,{container:!0,spacing:3,sx:{mb:6},children:[e.jsx(x,{item:!0,xs:12,md:6,lg:3,children:e.jsx(C,{sx:{height:"100%",cursor:"pointer",transition:"all 0.3s ease","&:hover":{boxShadow:`
                    0 20px 25px -5px rgba(0, 0, 0, 0.1),
                    0 10px 10px -5px rgba(0, 0, 0, 0.04)
                  `,WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",textRendering:"optimizeLegibility"}},onClick:()=>l&&l(),children:e.jsxs(S,{sx:{p:3},children:[e.jsxs(c,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(ge,{sx:{fontSize:40,mr:2,color:"primary.main"}}),e.jsxs(c,{children:[e.jsx(i,{variant:"h6",sx:{fontWeight:600},children:"Analyze Repository"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Generate context files for AI assistants"})]})]}),e.jsx(i,{variant:"body2",sx:{background:"linear-gradient(135deg, #6366f1, #4f46e5)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontWeight:500},children:"Get started →"})]})})}),e.jsx(x,{item:!0,xs:12,md:6,lg:3,children:e.jsx(C,{sx:{height:"100%",cursor:"pointer",transition:"all 0.3s ease","&:hover":{boxShadow:`
                    0 20px 25px -5px rgba(0, 0, 0, 0.1),
                    0 10px 10px -5px rgba(0, 0, 0, 0.04)
                  `,WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",textRendering:"optimizeLegibility"}},onClick:()=>l&&l({templates:!0}),children:e.jsxs(S,{sx:{p:3},children:[e.jsxs(c,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(i,{sx:{fontSize:40,mr:2},children:"📝"}),e.jsxs(c,{children:[e.jsx(i,{variant:"h6",sx:{fontWeight:600},children:"Manage Templates"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Create and customize analysis templates"})]})]}),e.jsx(i,{variant:"body2",sx:{background:"linear-gradient(135deg, #6366f1, #4f46e5)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontWeight:500},children:"Open Template Manager →"})]})})}),e.jsx(x,{item:!0,xs:12,md:6,lg:3,children:e.jsx(C,{sx:{height:"100%",cursor:"pointer",transition:"all 0.3s ease","&:hover":{boxShadow:`
                    0 20px 25px -5px rgba(0, 0, 0, 0.1),
                    0 10px 10px -5px rgba(0, 0, 0, 0.04)
                  `,WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",textRendering:"optimizeLegibility"}},onClick:()=>l&&l({history:!0}),children:e.jsxs(S,{sx:{p:3},children:[e.jsxs(c,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(i,{sx:{fontSize:40,mr:2},children:"📋"}),e.jsxs(c,{children:[e.jsx(i,{variant:"h6",sx:{fontWeight:600},children:"Job History"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"View and manage past analyses"})]})]}),e.jsx(i,{variant:"body2",sx:{background:"linear-gradient(135deg, #6366f1, #4f46e5)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontWeight:500},children:"View History →"})]})})}),e.jsx(x,{item:!0,xs:12,md:6,lg:3,children:e.jsx(C,{sx:{height:"100%",cursor:"pointer",transition:"all 0.3s ease","&:hover":{boxShadow:`
                    0 20px 25px -5px rgba(0, 0, 0, 0.1),
                    0 10px 10px -5px rgba(0, 0, 0, 0.04)
                  `,WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",textRendering:"optimizeLegibility"}},onClick:()=>l&&l({insights:!0}),children:e.jsxs(S,{sx:{p:3},children:[e.jsxs(c,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(i,{sx:{fontSize:40,mr:2},children:"🔍"}),e.jsxs(c,{children:[e.jsx(i,{variant:"h6",sx:{fontWeight:600},children:"Code Insights"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"AI-powered code analysis & recommendations"})]})]}),e.jsx(i,{variant:"body2",sx:{background:"linear-gradient(135deg, #10b981, #059669)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontWeight:500},children:"Analyze Code →"})]})})})]}),e.jsxs(x,{container:!0,spacing:3,sx:{mb:6},children:[e.jsx(x,{item:!0,xs:12,sm:6,md:3,children:e.jsx(C,{children:e.jsx(S,{sx:{p:3},children:e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ge,{sx:{fontSize:32,mr:2,color:"primary.main"}}),e.jsxs(c,{children:[e.jsx(i,{variant:"h4",sx:{fontWeight:"bold",background:"linear-gradient(135deg, #6366f1, #4f46e5)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:d.totalJobs}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Total Jobs"})]})]})})})}),e.jsx(x,{item:!0,xs:12,sm:6,md:3,children:e.jsx(C,{children:e.jsx(S,{sx:{p:3},children:e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Vt,{sx:{fontSize:32,mr:2,color:"secondary.main"}}),e.jsxs(c,{children:[e.jsx(i,{variant:"h4",sx:{fontWeight:"bold",background:"linear-gradient(135deg, #10b981, #059669)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:v?.length||0}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Repositories"})]})]})})})}),e.jsx(x,{item:!0,xs:12,sm:6,md:3,children:e.jsx(C,{children:e.jsx(S,{sx:{p:3},children:e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Yt,{sx:{fontSize:32,mr:2,color:"success.main"}}),e.jsxs(c,{children:[e.jsx(i,{variant:"h4",sx:{fontWeight:"bold",background:"linear-gradient(135deg, #10b981, #059669)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:d.totalDownloads}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Downloads"})]})]})})})}),e.jsx(x,{item:!0,xs:12,sm:6,md:3,children:e.jsx(C,{children:e.jsx(S,{sx:{p:3},children:e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Ke,{sx:{fontSize:32,mr:2,color:"warning.main"}}),e.jsxs(c,{children:[e.jsx(i,{variant:"h4",sx:{fontWeight:"bold",background:"linear-gradient(135deg, #f59e0b, #d97706)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:d.avgComplexity}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Avg Complexity"})]})]})})})})]}),e.jsxs(x,{container:!0,spacing:3,children:[e.jsx(x,{item:!0,xs:12,lg:6,children:e.jsxs(C,{children:[e.jsx(E,{title:e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(i,{sx:{mr:1},children:"🔐"}),e.jsx(i,{variant:"h6",children:"GitHub Configuration"})]})}),e.jsx(S,{children:e.jsxs(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(ve,{fullWidth:!0,type:"password",label:"Personal Access Token",value:t,onChange:k=>r(k.target.value),placeholder:"ghp_xxxxxxxxxxxxxxxxxxxx",helperText:"Token needs 'repo' scope for private repositories"}),e.jsx(I,{fullWidth:!0,variant:"contained",onClick:f,disabled:!t.trim(),size:"large",children:"Save Token"}),!t&&e.jsxs(P,{severity:"warning",sx:{mt:1},children:[e.jsx("strong",{children:"GitHub token required:"})," Set up your Personal Access Token to start analyzing repositories.",e.jsx("a",{href:"https://github.com/settings/tokens",target:"_blank",rel:"noopener noreferrer",style:{marginLeft:"4px",textDecoration:"underline"},children:"Create token →"})]})]})})]})}),e.jsx(x,{item:!0,xs:12,lg:6,children:e.jsxs(C,{children:[e.jsx(E,{title:e.jsxs(c,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(i,{sx:{mr:1},children:"📋"}),e.jsx(i,{variant:"h6",children:"Recent Jobs"})]}),e.jsxs(c,{sx:{display:"flex",gap:1},children:[e.jsx(re,{size:"small",onClick:b,disabled:n.length===0,sx:{color:"primary.main"},children:e.jsx(Qt,{fontSize:"small"})}),e.jsx(re,{size:"small",onClick:y,disabled:n.length===0,sx:{color:"error.main"},children:e.jsx(Kt,{fontSize:"small"})})]})]})}),e.jsx(S,{children:n.length>0?e.jsx(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:n.slice(0,5).map((k,_)=>e.jsxs(c,{sx:{p:2,borderRadius:2,background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(c,{children:[e.jsx(i,{variant:"body1",sx:{fontWeight:500},children:k.repository}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:[k.template," • ",new Date(k.timestamp).toLocaleDateString()]})]}),e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(O,{label:k.status,color:k.status==="completed"?"success":"warning",size:"small"}),k.downloaded&&e.jsx(i,{children:"📥"})]})]},_))}):e.jsxs(c,{sx:{textAlign:"center",py:4},children:[e.jsx(i,{sx:{fontSize:"3rem",mb:2},children:"📭"}),e.jsx(i,{variant:"h6",color:"text.secondary",children:"No recent jobs found"}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Start by analyzing a repository to see your job history here"})]})})]})})]}),e.jsx(x,{container:!0,spacing:3,sx:{mt:6},children:e.jsx(x,{item:!0,xs:12,children:e.jsxs(C,{children:[e.jsx(E,{title:e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(i,{sx:{mr:1},children:"💡"}),e.jsx(i,{variant:"h6",children:"Quick Tips"})]})}),e.jsx(S,{children:e.jsxs(x,{container:!0,spacing:3,children:[e.jsx(x,{item:!0,xs:12,md:4,children:e.jsxs(c,{sx:{p:3,borderRadius:2,background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",height:"100%"},children:[e.jsx(i,{variant:"h6",sx:{mb:2,background:"linear-gradient(135deg, #6366f1, #4f46e5)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontWeight:500},children:"🎯 Choose the Right Template"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Use 'Comprehensive' for complex projects, 'Minimal' for quick overviews, and 'Technical' for detailed specs."})]})}),e.jsx(x,{item:!0,xs:12,md:4,children:e.jsxs(c,{sx:{p:3,borderRadius:2,background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",height:"100%"},children:[e.jsx(i,{variant:"h6",sx:{mb:2,background:"linear-gradient(135deg, #10b981, #059669)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontWeight:500},children:"🔄 Regular Analysis"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Re-analyze repositories periodically to keep your AI assistants updated with the latest changes."})]})}),e.jsx(x,{item:!0,xs:12,md:4,children:e.jsxs(c,{sx:{p:3,borderRadius:2,background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",height:"100%"},children:[e.jsx(i,{variant:"h6",sx:{mb:2,background:"linear-gradient(135deg, #f59e0b, #d97706)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontWeight:500},children:"📊 Track Progress"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Use the dashboard to monitor your analysis activity and download statistics over time."})]})})]})})]})})})]})})},Hn="modulepreload",Un=function(l){return"/"+l},Tt={},q=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let u=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),d=a?.nonce||a?.getAttribute("nonce");s=u(r.map(h=>{if(h=Un(h),h in Tt)return;Tt[h]=!0;const p=h.endsWith(".css"),v=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${v}`))return;const f=document.createElement("link");if(f.rel=p?"stylesheet":Hn,p||(f.as="script"),f.crossOrigin="",f.href=h,d&&f.setAttribute("nonce",d),document.head.appendChild(f),p)return new Promise((y,b)=>{f.addEventListener("load",y),f.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(a){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=a,window.dispatchEvent(d),!d.defaultPrevented)throw a}return s.then(a=>{for(const d of a||[])d.status==="rejected"&&o(d.reason);return t().catch(o)})};var Ge={},ht={};const Nn=Ir(Xt);var It;function qn(){return It||(It=1,(function(l){"use client";Object.defineProperty(l,"__esModule",{value:!0}),Object.defineProperty(l,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=Nn})(ht)),ht}var $t;function Bn(){if($t)return Ge;$t=1;var l=Zt();Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.default=void 0;var t=l(qn()),r=er();return Ge.default=(0,t.default)((0,r.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),Ge}var Jn=Bn();const Q=$r(Jn);class yt{octokit;config;constructor(t,r={}){this.octokit=t?new _e({auth:t}):new _e,this.config={max_commits:1e3,include_branches:!0,include_file_analysis:!0,include_author_analysis:!0,complexity_threshold:50,...r}}async analyzeRepository(t,r){const n=Date.now();try{console.log(`🔍 Starting advanced Git analysis for ${t}/${r}`);const s=await this.getCommitHistory(t,r),o=this.analyzeCommits(s),a=await this.analyzeBranches(t,r),d=this.calculateRepositoryHealth(o,a),u=this.generateRecommendations(o,d),p={success:!0,data:{commit_history:o,branch_analysis:a,repository_health:d,recommendations:u},metadata:{analyzed_commits:s.length,analysis_time:Date.now()-n,last_updated:new Date().toISOString()}};return console.log(`✅ Advanced Git analysis completed in ${p.metadata.analysis_time}ms`),p}catch(s){return console.error("❌ Advanced Git analysis failed:",s),{success:!1,error:s.message,metadata:{analyzed_commits:0,analysis_time:Date.now()-n,last_updated:new Date().toISOString()}}}}async getCommitHistory(t,r){try{if(!this.octokit)return this.getMockCommitHistory();const n=await this.octokit.repos.listCommits({owner:t,repo:r,per_page:100,page:1}),s=[];for(const o of n.data.slice(0,this.config.max_commits||1e3))try{const a=await this.octokit.repos.getCommit({owner:t,repo:r,ref:o.sha});s.push(a.data)}catch(a){console.warn(`Failed to get details for commit ${o.sha}:`,a),s.push(o)}return s}catch(n){return console.error("Failed to get commit history:",n),this.getMockCommitHistory()}}getMockCommitHistory(){const t=[];for(let r=0;r<10;r++)t.push({sha:`mock-commit-${r}`,node_id:`node-${r}`,url:`https://api.github.com/repos/test/repo/commits/mock-commit-${r}`,html_url:`https://github.com/test/repo/commit/mock-commit-${r}`,comments_url:`https://api.github.com/repos/test/repo/commits/mock-commit-${r}/comments`,commit:{sha:`commit-${r}`,url:`https://api.github.com/repos/test/repo/git/commits/commit-${r}`,author:{name:`Author ${r}`,email:`author${r}@example.com`,date:new Date(Date.now()-r*24*60*60*1e3).toISOString()},committer:{name:`Committer ${r}`,email:`committer${r}@example.com`,date:new Date(Date.now()-r*24*60*60*1e3).toISOString()},message:`Mock commit ${r}`,comment_count:0,tree:{sha:`tree-${r}`,url:`https://api.github.com/repos/test/repo/tree/tree-${r}`},parents:[]},author:{login:`author${r}`,id:r,avatar_url:`https://github.com/images/error/author${r}_happiness.png`,html_url:`https://github.com/author${r}`,type:"User"},committer:{login:`committer${r}`,id:r+100,avatar_url:`https://github.com/images/error/committer${r}_happiness.png`,html_url:`https://github.com/committer${r}`,type:"User"},parents:[],stats:{additions:Math.floor(Math.random()*100),deletions:Math.floor(Math.random()*50),total:Math.floor(Math.random()*150)},files:[{filename:`src/file${r}.js`,status:"modified",additions:Math.floor(Math.random()*50),deletions:Math.floor(Math.random()*25),changes:Math.floor(Math.random()*75),blob_url:`https://github.com/test/repo/blob/commit-${r}/src/file${r}.js`,raw_url:`https://github.com/test/repo/raw/commit-${r}/src/file${r}.js`,contents_url:`https://api.github.com/repos/test/repo/contents/src/file${r}.js?ref=commit-${r}`,patch:`@@ -1,3 +1,3 @@
- old content
+ new content
+ more content`}]});return t}analyzeCommits(t){const r=new Map,n=new Map,s=new Array(24).fill(0),o=new Array(7).fill(0),a={small:0,medium:0,large:0,huge:0};let d=0,u=0,h=new Set;for(const _ of t){const w=_.commit.author.name||"Unknown",D=new Date(_.commit.author.date),j=D.getHours(),T=D.getDay();s[j]++,o[T]++,h.add(D.toDateString());const M=(_.stats?.additions||0)+(_.stats?.deletions||0);M<=10?a.small++:M<=50?a.medium++:M<=200?a.large++:a.huge++,d+=_.stats?.additions||0,u+=_.stats?.deletions||0,_.files?.forEach(Y=>{const Ce=Y.filename,Z=r.get(Ce)||{changes:0,additions:0,deletions:0,lastModified:_.commit.author.date,authors:new Set};Z.changes++,Z.additions+=Y.additions,Z.deletions+=Y.deletions,Z.lastModified=_.commit.author.date,Z.authors.add(w),r.set(Ce,Z)});const F=n.get(w)||{author:w,email:_.commit.author.email,commits:0,additions:0,deletions:0,files_changed:0,avg_commit_size:0,active_days:0,productivity_score:0};F.commits++,F.additions+=_.stats?.additions||0,F.deletions+=_.stats?.deletions||0,F.files_changed+=_.files?.length||0,F.avg_commit_size=(F.additions+F.deletions)/F.commits,F.active_days=h.size,F.productivity_score=this.calculateProductivityScore(F),n.set(w,F)}const p=Array.from(r.entries()).map(([_,w])=>{const D=w.changes/(t.length/7),j=this.calculateFileImpact(w.changes,D);return{filename:_,changes:w.changes,additions:w.additions,deletions:w.deletions,lastModified:w.lastModified,authors:Array.from(w.authors),changeFrequency:D,impact:j}}).sort((_,w)=>w.changes-_.changes).slice(0,20),v=Array.from(r.entries()).map(([_,w])=>{const D=t.length>0?Math.floor((Date.now()-new Date(w.lastModified).getTime())/864e5):0,j=this.estimateComplexity(w.changes,w.additions,w.deletions),T=this.calculateRiskLevel(w.changes,D,j);return{file:_,churn:w.additions+w.deletions,age:D,complexity:j,risk:T}}).sort((_,w)=>w.churn-_.churn),f={total_commits:t.length,active_contributors:n.size,avg_commits_per_day:t.length/Math.max(h.size,1),avg_lines_per_day:(d+u)/Math.max(h.size,1),peak_development_days:this.findPeakDevelopmentDays(t),development_intensity:this.calculateDevelopmentIntensity(t.length,h.size,n.size)},y={hour_of_day:s,day_of_week:o,commit_size_distribution:a,author_collaboration:this.analyzeAuthorCollaboration(t),file_type_distribution:this.analyzeFileTypeDistribution(t)},b=t.sort((_,w)=>new Date(_.commit.author.date).getTime()-new Date(w.commit.author.date).getTime()),k={first_commit:b[0]?.commit.author.date||"",last_commit:b[b.length-1]?.commit.author.date||"",days_active:h.size};return{total_commits:t.length,time_range:k,authors:Array.from(n.values()).sort((_,w)=>w.commits-_.commits),hot_files:p,code_churn:v,development_velocity:f,commit_patterns:y}}async analyzeBranches(t,r){try{const s=(await this.octokit.repos.listBranches({owner:t,repo:r})).data.map(u=>({name:u.name,protected:u.protected||!1})),a=(await this.octokit.repos.get({owner:t,repo:r})).data.default_branch,d={};return s.forEach(u=>{u.name!==a&&(d[u.name]={ahead_by:0,behind_by:0,total_commits:0,conflicting_files:[],merge_conflicts:!1})}),{current_branch:a,branches:s,branch_divergence:d}}catch(n){return console.error("Failed to analyze branches:",n),{current_branch:"main",branches:[],branch_divergence:{}}}}calculateRepositoryHealth(t,r){const n=t.development_velocity.avg_commits_per_day,s=Math.min(100,Math.max(0,n<1?n*50:n<5?50+(n-1)*10:90+Math.min(10,n-5))),o=t.authors?.length||0,a=Math.min(100,o*20),d=t.code_churn.reduce((b,k)=>b+k.churn,0)/Math.max(t.code_churn.length,1),u=Math.max(0,100-d/10),h=r.branches.filter(b=>b.protected).length,p=r.branches.length,v=p>0?h/p*100:50,f=(s+a+u+v)/4,y=f>=80?"excellent":f>=60?"good":f>=40?"fair":"poor";return{commit_frequency_score:Math.round(s),contributor_diversity_score:Math.round(a),code_churn_score:Math.round(u),branch_management_score:Math.round(v),overall_health:y}}generateRecommendations(t,r){const n=[];r.commit_frequency_score<50&&n.push("Consider increasing commit frequency for better development velocity"),r.contributor_diversity_score<60&&n.push("Encourage more contributors to improve code diversity and reduce bus factor"),r.code_churn_score<50&&n.push("High code churn detected - consider refactoring frequently modified files");const s=t.hot_files.filter(o=>o.impact==="critical");return s.length>0&&n.push(`Critical hot files detected: ${s.slice(0,3).map(o=>o.filename).join(", ")} - consider splitting or refactoring`),t.development_velocity.development_intensity==="very_high"&&n.push("Very high development intensity detected - ensure adequate testing and code review"),r.branch_management_score<70&&n.push("Consider protecting main branches and implementing branch protection rules"),n}calculateProductivityScore(t){const r=Math.min(t.commits*2,50),n=Math.min(t.avg_commit_size*.5,30),s=Math.min(t.active_days*1,20);return Math.round(r+n+s)}calculateFileImpact(t,r){return t>50&&r>5?"critical":t>25&&r>3?"high":t>10&&r>1?"medium":"low"}estimateComplexity(t,r,n){const s=r>0?n/r:0,o=t*(1+s);return Math.min(Math.round(o),100)}calculateRiskLevel(t,r,n){const s=t*.3+Math.max(0,365-r)*.1+n*.6;return s>70?"high":s>40?"medium":"low"}findPeakDevelopmentDays(t){const r=new Map;return t.forEach(n=>{const o=new Date(n.commit.author.date).toDateString();r.set(o,(r.get(o)||0)+1)}),Array.from(r.entries()).sort(([,n],[,s])=>s-n).slice(0,5).map(([n])=>n)}calculateDevelopmentIntensity(t,r,n){const s=t/Math.max(r,1),o=t/Math.max(n,1);return s>20||o>10?"very_high":s>10||o>5?"high":s>5||o>2?"medium":"low"}analyzeAuthorCollaboration(t){const r={};return t.forEach(n=>{const s=n.commit.author.name||"Unknown";r[s]||(r[s]=0),r[s]++}),r}analyzeFileTypeDistribution(t){const r={};return t.forEach(n=>{n.files?.forEach(s=>{const o=this.getFileExtension(s.filename);r[o]=(r[o]||0)+1})}),r}getFileExtension(t){const r=t.lastIndexOf(".");return r!==-1?t.substring(r):"no_extension"}}const Ie=Object.freeze(Object.defineProperty({__proto__:null,AdvancedGitAnalyzer:yt,default:yt},Symbol.toStringTag,{value:"Module"}));class ft{octokit;config;constructor(t,r={}){this.octokit=t?new _e({auth:t}):new _e,this.config={format:"mermaid",includeDevDependencies:!1,includeTransitive:!1,maxDepth:3,vulnerabilityCheck:!0,licenseCheck:!0,...r}}async analyzeDependencies(t,r,n="main"){const s=Date.now();try{console.log(`🔗 Starting dependency analysis for ${t}/${r}`);const o=await this.getPackageJson(t,r,n);if(!o)throw new Error("No package.json found in repository");const a=await this.analyzePackageDependencies(o),d=this.buildDependencyGraph(a),u=this.config.vulnerabilityCheck?await this.checkVulnerabilities(a):[],h=this.config.licenseCheck?await this.checkLicenses(a):[],p=this.generateVisualGraph(d,this.config.format),v={packageJson:o,dependencies:a,graph:d,vulnerabilities:u,licenses:h,visualGraph:p,metadata:{analysis_time:Date.now()-s,total_dependencies:a.length,vulnerable_packages:u.length,license_issues:h.filter(f=>f.compliance==="warning"||f.compliance==="error").length,last_updated:new Date().toISOString()}};return console.log(`✅ Dependency analysis completed in ${v.metadata.analysis_time}ms`),v}catch(o){throw console.error("❌ Dependency analysis failed:",o),new Error(`Failed to analyze dependencies: ${o.message}`)}}async getPackageJson(t,r,n){try{const s=await this.octokit.repos.getContent({owner:t,repo:r,path:"package.json",ref:n});if("content"in s.data){const o=Buffer.from(s.data.content,"base64").toString();return JSON.parse(o)}return null}catch(s){return console.warn("Could not fetch package.json:",s),null}}async analyzePackageDependencies(t){const r=[];if(t.dependencies)for(const[n,s]of Object.entries(t.dependencies))r.push({name:n,version:s,type:"runtime",required:!0});if(this.config.includeDevDependencies&&t.devDependencies)for(const[n,s]of Object.entries(t.devDependencies))r.push({name:n,version:s,type:"development",required:!1});if(t.peerDependencies)for(const[n,s]of Object.entries(t.peerDependencies))r.push({name:n,version:s,type:"peer",required:!0});return r}buildDependencyGraph(t){const r=[],n=[];return r.push({id:"root",label:"Root Package",type:"root",size:100,color:"#4CAF50"}),t.forEach((s,o)=>{const a=`dep_${o}`,d=s.type==="development";r.push({id:a,label:`${s.name}@${s.version}`,type:s.type,size:d?60:80,color:d?"#FF9800":"#2196F3",metadata:{name:s.name,version:s.version,required:s.required}}),n.push({source:"root",target:a,type:s.type,weight:s.required?2:1,label:s.type})}),{nodes:r,edges:n}}async checkVulnerabilities(t){const r=[],n={"old-package":{severity:"high",description:"Known security vulnerability in authentication",fix:"Upgrade to version 2.0.0",cvss:7.8},"another-package":{severity:"medium",description:"Potential security issue with data validation",fix:"Update to latest version",cvss:5.3}};for(const s of t)if(n[s.name]){const o=n[s.name];r.push({package:s.name,version:s.version,severity:o.severity,description:o.description,fix:o.fix,cvss:o.cvss,published:new Date().toISOString()})}return r}async checkLicenses(t){const r=[],n={react:{license:"MIT",compliance:"good",restrictions:[]},"some-proprietary":{license:"Proprietary",compliance:"warning",restrictions:["Commercial use restricted","No redistribution"]},"problematic-license":{license:"GPL-2.0",compliance:"error",restrictions:["Copyleft license","May require source disclosure"]}};for(const s of t){const o=n[s.name]||{license:"Unknown",compliance:"unknown",restrictions:["License information not available"]};r.push({package:s.name,license:o.license,compliance:o.compliance,restrictions:o.restrictions,spdx:this.getSpdxIdentifier(o.license)})}return r}generateVisualGraph(t,r){switch(r){case"mermaid":return this.generateMermaidGraph(t);case"dot":return this.generateDotGraph(t);case"json":return JSON.stringify(t,null,2);case"d3":return this.generateD3Graph(t);default:return this.generateMermaidGraph(t)}}generateMermaidGraph(t){let r=`graph TD
`;return t.nodes.forEach(n=>{n.color,r+=`  ${n.id}[${n.label}]
`}),r+=`
`,t.edges.forEach(n=>{const s=n.type==="development"?"-.->":"-->";r+=`  ${n.source} ${s} ${n.target}
`}),r}generateDotGraph(t){let r=`digraph G {
`;return r+=`  rankdir=TB;
`,r+=`  node [shape=box];

`,t.nodes.forEach(n=>{const s=n.color||"lightgray";r+=`  ${n.id} [label="${n.label}" fillcolor="${s}" style="filled"];
`}),r+=`
`,t.edges.forEach(n=>{const s=n.type==="development"?"[style=dashed]":"";r+=`  ${n.source} -> ${n.target} ${s};
`}),r+="}",r}generateD3Graph(t){const r={nodes:t.nodes.map(n=>({id:n.id,name:n.label,group:n.type==="root"?1:n.type==="runtime"?2:3,size:n.size||50,color:n.color||"#666"})),links:t.edges.map(n=>({source:n.source,target:n.target,value:n.weight||1,type:n.type}))};return JSON.stringify(r,null,2)}getSpdxIdentifier(t){return{MIT:"MIT","Apache-2.0":"Apache-2.0","GPL-2.0":"GPL-2.0-only","GPL-3.0":"GPL-3.0-only","BSD-2-Clause":"BSD-2-Clause","BSD-3-Clause":"BSD-3-Clause",ISC:"ISC",UNLICENSED:"UNLICENSED"}[t]||"NOASSERTION"}getDependencyStats(t){const r=t.dependencies.filter(o=>o.type==="runtime").length,n=t.dependencies.filter(o=>o.type==="development").length,s=t.dependencies.filter(o=>o.type==="peer").length;return{total:t.dependencies.length,runtime:r,development:n,peer:s,vulnerable:t.vulnerabilities.length,licenseIssues:t.licenses.filter(o=>o.compliance==="warning"||o.compliance==="error").length}}generateReport(t){const r=this.getDependencyStats(t),n=this.calculateDependencyHealthScore(r);let s=`# Dependency Analysis Report

`;return s+=`**Analysis Date:** ${t.metadata.last_updated}
`,s+=`**Analysis Time:** ${t.metadata.analysis_time}ms

`,s+=`## 📊 Overview

`,s+=`- **Total Dependencies:** ${r.total}
`,s+=`- **Runtime Dependencies:** ${r.runtime}
`,s+=`- **Development Dependencies:** ${r.development}
`,s+=`- **Peer Dependencies:** ${r.peer}
`,s+=`- **Health Score:** ${n}/100

`,r.vulnerable>0&&(s+=`## ⚠️ Security Vulnerabilities

`,t.vulnerabilities.forEach(o=>{s+=`- **${o.package}** (${o.severity}): ${o.description}
`,s+=`  - Fix: ${o.fix}
`,s+=`  - CVSS: ${o.cvss}

`})),r.licenseIssues>0&&(s+=`## 📄 License Issues

`,t.licenses.filter(o=>o.compliance==="warning"||o.compliance==="error").forEach(o=>{s+=`- **${o.package}**: ${o.license} (${o.compliance})
`,o.restrictions.forEach(a=>{s+=`  - ${a}
`}),s+=`
`})),s+=`## 🔗 Dependency Graph

`,s+="```mermaid\n",s+=t.visualGraph,s+="```\n\n",s+=`## 📋 Top Dependencies

`,t.dependencies.slice(0,10).forEach(o=>{const a=t.vulnerabilities.find(u=>u.package===o.name),d=t.licenses.find(u=>u.package===o.name);s+=`- **${o.name}** (${o.version}) - ${o.type}`,a&&(s+=" ⚠️"),d&&(d.compliance==="warning"||d.compliance==="error")&&(s+=" 📄"),s+=`
`}),s}calculateDependencyHealthScore(t){let r=100;return r-=t.vulnerable*20,r-=t.licenseIssues*10,t.total>50&&(r-=Math.min((t.total-50)*.5,20)),Math.max(0,Math.round(r))}calculateDependencyHealthScoreInternal(t){return this.calculateDependencyHealthScore(t)}}const Qe=Object.freeze(Object.defineProperty({__proto__:null,DependencyGraphAnalyzer:ft,default:ft},Symbol.toStringTag,{value:"Module"}));class Ut{templates;customTemplates;config;constructor(t={}){this.config={outputFormat:"markdown",includeTimestamps:!0,includeVersioning:!0,...t},this.templates={comprehensive:this.generateComprehensiveContext.bind(this),minimal:this.generateMinimalContext.bind(this),technical:this.generateTechnicalContext.bind(this),overview:this.generateOverviewContext.bind(this),rules:this.generateRulesContext.bind(this),workflows:this.generateWorkflowsContext.bind(this),shortcuts:this.generateShortcutsContext.bind(this),scaffold:this.generateScaffoldContext.bind(this)},this.customTemplates=new Map}generateContext(t,r="comprehensive"){return this.customTemplates.has(r)?this.generateCustomContext(t,this.customTemplates.get(r)):(this.templates[r]||this.templates.comprehensive)(t)}generateCustomContext(t,r){const n={metadata:{generated_at:new Date().toISOString(),generator:"Repository Context Generator",template:"custom",custom_template_name:r.name,repository:t.basic.name}};return r.sections.forEach(s=>{if(s&&s.trim()){const o=s.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"");n[o]=this.generateCustomSection(t,s)}}),this.formatCustomAsMarkdown(n,r)}generateCustomSection(t,r){const n={overview:()=>this.generateProjectOverview(t),"technical details":()=>this.generateTechnicalDetails(t),architecture:()=>this.generateArchitectureAnalysis(t),"development setup":()=>this.generateDevelopmentSetup(t),"code quality":()=>this.generateCodeQuality(t),recommendations:()=>this.generateRecommendations(t),"coding rules":()=>this.generateCodingRules(t),"best practices":()=>this.generateBestPractices(t),"development workflow":()=>this.generateDevWorkflow(t),"productivity shortcuts":()=>this.generateProductivityShortcuts(t),"project scaffolds":()=>this.generateProjectScaffolds(t),languages:()=>({languages:Object.entries(t.languages||{}).sort(([,o],[,a])=>a-o).slice(0,5).map(([o,a])=>({language:o,percentage:Math.round(a/Object.values(t.languages).reduce((d,u)=>d+u,0)*100)}))}),dependencies:()=>this.extractDependencies(t),structure:()=>this.detailedFileStructure(t),contributors:()=>({contributors:t.contributors?.slice(0,10)||[],total_count:t.contributors?.length||0}),statistics:()=>({stars:t.basic.stars,forks:t.basic.forks,issues:t.basic.issues,size_kb:Math.round(t.basic.size/1024),created:new Date(t.basic.created).toLocaleDateString(),updated:new Date(t.basic.updated).toLocaleDateString()})},s=r.toLowerCase().trim();for(const[o,a]of Object.entries(n))if(s.includes(o)||o.includes(s))return a();return{section_name:r,content:`Custom section: ${r}`,note:"This section was generated from a custom template. You may need to customize the content generation logic for this specific section."}}formatCustomAsMarkdown(t,r){let n=`# ${r.name}

`;return n+=`*${r.description}*

`,n+=`**Generated:** ${t.metadata.generated_at}
`,n+=`**Repository:** ${t.metadata.repository}
`,n+=`**Template:** ${r.icon||"📋"} ${r.name}

`,n+=`---

`,r.sections.forEach(s=>{if(s&&s.trim()){const o=s.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),a=t[o];a&&(n+=`## ${s}

`,n+=this.formatSectionData(a),n+=`

`)}}),n}formatSectionData(t){if(typeof t=="string")return t;if(Array.isArray(t))return t.map(r=>typeof r=="string"?`- ${r}`:`- ${JSON.stringify(r)}`).join(`
`);if(typeof t=="object"&&t!==null){let r="";t.name&&t.description&&(r+=`**${t.name}**
${t.description}

`),t.languages&&(r+=`**Programming Languages:**
`,t.languages.forEach(s=>{r+=`- ${s.language}: ${s.percentage}%
`}),r+=`
`),(t.dependencies||t.devDependencies)&&(t.dependencies?.length>0&&(r+=`**Dependencies:**
`,t.dependencies.forEach(s=>{r+=`- ${s}
`}),r+=`
`),t.devDependencies?.length>0&&(r+=`**Dev Dependencies:**
`,t.devDependencies.forEach(s=>{r+=`- ${s}
`}),r+=`
`)),t.contributors&&(r+=`**Top Contributors:**
`,t.contributors.slice(0,5).forEach(s=>{r+=`- ${s.login||s.name||"Unknown"}
`}),r+=`
`),t.stars!==void 0&&(r+=`**Repository Statistics:**
`,r+=`- ⭐ Stars: ${t.stars}
`,r+=`- 🍴 Forks: ${t.forks}
`,r+=`- 🐛 Open Issues: ${t.issues}
`,r+=`- 📦 Size: ${t.size_kb} KB
`,r+=`- 📅 Created: ${t.created}
`,r+=`- 🔄 Last Updated: ${t.updated}

`);const n=Object.keys(t).filter(s=>!["name","description","languages","dependencies","devDependencies","contributors","stars","forks","issues","size_kb","created","updated"].includes(s));return n.length>0&&n.forEach(s=>{const o=t[s];Array.isArray(o)?(r+=`**${s.replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase())}:**
`,o.forEach(a=>{r+=`- ${typeof a=="string"?a:JSON.stringify(a)}
`}),r+=`
`):typeof o=="object"&&o!==null?(r+=`**${s.replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase())}:**
`,r+=`${JSON.stringify(o,null,2)}

`):r+=`**${s.replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase())}:** ${o}

`}),r||JSON.stringify(t,null,2)}return String(t)}addCustomTemplate(t,r){this.customTemplates.set(t,r)}removeCustomTemplate(t){this.customTemplates.delete(t)}getCustomTemplates(){return Array.from(this.customTemplates.entries()).map(([t,r])=>({id:t,...r}))}generateComprehensiveContext(t){const r={metadata:{generated_at:new Date().toISOString(),generator:"Repository Context Generator",template:"comprehensive",repository:t.basic.name},project_overview:this.generateProjectOverview(t),technical_details:this.generateTechnicalDetails(t),architecture_analysis:this.generateArchitectureAnalysis(t),development_setup:this.generateDevelopmentSetup(t),code_quality:this.generateCodeQuality(t),recommendations:this.generateRecommendations(t),ai_assistant_guidelines:this.generateAIGuidelines(t)};return this.formatAsMarkdown(r)}generateMinimalContext(t){const r={metadata:{generated_at:new Date().toISOString(),generator:"Repository Context Generator",template:"minimal"},project:{name:t.basic.name,description:t.basic.description,language:t.basic.language,framework:t.analysis.framework},structure:this.summarizeStructure(t.structure),key_files:this.identifyKeyFiles(t)};return this.formatAsMarkdown(r)}generateTechnicalContext(t){const r={metadata:{generated_at:new Date().toISOString(),generator:"Repository Context Generator",template:"technical"},technical_specs:{language:t.basic.language,framework:t.analysis.framework,architecture:t.analysis.architecture,complexity:t.analysis.complexity},dependencies:this.extractDependencies(t),file_structure:this.detailedFileStructure(t),development_requirements:this.extractDevRequirements(t)};return this.formatAsMarkdown(r)}generateOverviewContext(t){const r={metadata:{generated_at:new Date().toISOString(),generator:"Repository Context Generator",template:"overview"},summary:{name:t.basic.name,description:t.basic.description,stars:t.basic.stars,language:t.basic.language,last_updated:t.basic.updated},quick_facts:this.generateQuickFacts(t)};return this.formatAsMarkdown(r)}generateProjectOverview(t){const r={name:t.basic.name,description:t.basic.description||"No description provided",primary_language:t.basic.language||"Not specified",repository_stats:{stars:t.basic.stars,forks:t.basic.forks,open_issues:t.basic.issues,size_kb:Math.round(t.basic.size/1024)},created:new Date(t.basic.created).toLocaleDateString(),last_updated:new Date(t.basic.updated).toLocaleDateString(),contributors:t.contributors?.length||0};return t.gitAnalysis&&(r.git_insights={total_commits:t.gitAnalysis.total_commits||0,active_branches:t.gitAnalysis.active_branches||0,development_velocity:t.gitAnalysis.development_velocity||0,top_contributors:t.gitAnalysis.top_contributors?.slice(0,3)||[]}),r}generateTechnicalDetails(t){return{programming_languages:Object.entries(t.languages||{}).sort(([,n],[,s])=>s-n).slice(0,5).map(([n,s])=>({language:n,percentage:Math.round(s/Object.values(t.languages).reduce((o,a)=>o+a,0)*100)})),framework:t.analysis.framework,architecture_pattern:t.analysis.architecture,complexity_level:t.analysis.complexity}}generateArchitectureAnalysis(t){const r=t.structure;return r?{root_structure:this.analyzeRootStructure(r),key_directories:this.identifyKeyDirectories(r),file_organization:this.analyzeFileOrganization(r),patterns_identified:this.identifyPatterns(t)}:{root_structure:{directories:0,files:0,key_directories:[],config_files:[]},key_directories:[],file_organization:{has_clear_structure:!1,follows_conventions:!1,organization_score:0},patterns_identified:[]}}generateDevelopmentSetup(t){const r={prerequisites:[],installation_steps:[],development_scripts:[]};if(t.packageJson){t.packageJson.engines?.node&&r.prerequisites.push(`Node.js ${t.packageJson.engines.node}`),t.packageJson.scripts?.install?r.installation_steps.push("Run custom install script"):r.installation_steps.push("npm install");const n=Object.entries(t.packageJson.scripts||{}).filter(([s])=>["dev","start","build","test"].includes(s)).map(([s,o])=>({command:s,script:o}));r.development_scripts=n}return r}generateCodeQuality(t){return{has_tests:this.checkForTests(t),has_linting:this.checkForLinting(t),has_documentation:this.checkForDocumentation(t),has_ci_cd:this.checkForCI(t),code_quality_score:this.calculateQualityScore(t)}}generateRecommendations(t){const r=[...t.analysis.recommendations||[]];return this.checkForTests(t)||r.push("Add comprehensive test coverage"),this.checkForDocumentation(t)||r.push("Improve documentation with API docs and code comments"),t.basic.issues>20&&r.push("Address open issues and improve issue management"),t.basic.description||r.push("Add a clear project description"),r}generateAIGuidelines(t){return{coding_standards:this.inferCodingStandards(t),project_patterns:this.identifyProjectPatterns(t),development_workflow:this.suggestDevelopmentWorkflow(t),contribution_guidelines:this.extractContributionGuidelines(t)}}analyzeRootStructure(t){if(!t?.children)return{directories:0,files:0,key_directories:[],config_files:[]};const r=t.children.filter(s=>s.type==="dir"),n=t.children.filter(s=>s.type==="file");return{directories:r.length,files:n.length,key_directories:r.map(s=>s.name),config_files:n.filter(s=>this.isConfigFile(s.name)).map(s=>s.name)}}identifyKeyDirectories(t){if(!t?.children)return[];const r=["src","lib","components","pages","utils","hooks","types","tests"];return t.children.filter(n=>n.type==="dir"&&r.includes(n.name)).map(n=>({name:n.name,purpose:this.getDirectoryPurpose(n.name)}))}analyzeFileOrganization(t){const r={has_clear_structure:!1,follows_conventions:!1,organization_score:0};if(t?.children){const n=t.children.some(a=>a.name==="src"),s=t.children.some(a=>a.name==="tests"||a.name==="__tests__"),o=t.children.some(a=>a.name==="docs"||a.name==="README.md");r.has_clear_structure=n,r.follows_conventions=n&&s,r.organization_score=[n,s,o].filter(Boolean).length}return r}identifyPatterns(t){const r=[];return t.analysis.framework==="React"&&(r.push("React component patterns"),r.push("JSX/TSX file structure")),t.structure?.children&&t.structure.children.some(s=>s.type==="dir"&&s.name==="components")&&r.push("Component-based architecture"),r}checkForTests(t){return t.packageJson?.scripts?.test?!0:t.structure?.children?t.structure.children.some(r=>r.type==="dir"&&(r.name==="tests"||r.name==="__tests__")):!1}checkForLinting(t){if(!t.packageJson)return!1;const r={...t.packageJson.dependencies,...t.packageJson.devDependencies};return Object.keys(r).some(n=>n.includes("eslint")||n.includes("prettier")||n.includes("lint"))}checkForDocumentation(t){return!!(t.readme||t.structure?.children?.some(r=>r.type==="dir"&&r.name==="docs"))}checkForCI(t){return t.structure?.children?t.structure.children.some(r=>r.type==="file"&&(r.name===".github"||r.name.includes("ci")||r.name.includes("workflow"))):!1}calculateQualityScore(t){let r=50;return this.checkForTests(t)&&(r+=15),this.checkForLinting(t)&&(r+=10),this.checkForDocumentation(t)&&(r+=10),this.checkForCI(t)&&(r+=10),t.basic.description&&(r+=5),Math.min(r,100)}isConfigFile(t){return["package.json",".gitignore","tsconfig.json","webpack.config.js",".eslintrc","babel.config.js"].includes(t)||t.startsWith(".")}getDirectoryPurpose(t){return{src:"Main source code",lib:"Library files and utilities",components:"Reusable UI components",pages:"Page components/routes",utils:"Utility functions",hooks:"Custom React hooks",types:"TypeScript type definitions",tests:"Test files"}[t]||"Project files"}summarizeStructure(t){if(!t)return"No structure available";const r=t.children?.filter(s=>s.type==="dir")||[],n=t.children?.filter(s=>s.type==="file")||[];return`${r.length} directories, ${n.length} files in root`}identifyKeyFiles(t){const r=[];if(t.packageJson&&r.push("package.json"),t.readme&&r.push("README.md"),t.structure?.children){const n=t.structure.children.filter(s=>s.type==="file").filter(s=>this.isImportantFile(s.name)).map(s=>s.name);r.push(...n)}return r}isImportantFile(t){return["package.json","tsconfig.json",".eslintrc.js","webpack.config.js","babel.config.js","Dockerfile"].includes(t)||t.toLowerCase().includes("readme")}extractDependencies(t){return t.packageJson?{dependencies:Object.keys(t.packageJson.dependencies||{}),devDependencies:Object.keys(t.packageJson.devDependencies||{})}:{dependencies:[],devDependencies:[]}}detailedFileStructure(t){return this.traverseStructure(t.structure)}traverseStructure(t,r=0){if(!t||r>3)return"";let n="";const s="  ".repeat(r);return t.type==="dir"?(n+=`${s}📁 ${t.name}/
`,t.children?.forEach(o=>{n+=this.traverseStructure(o,r+1)})):n+=`${s}📄 ${t.name}
`,n}extractDevRequirements(t){const r=[];return t.packageJson?.engines&&Object.entries(t.packageJson.engines).forEach(([n,s])=>{r.push(`${n} ${s}`)}),r}generateQuickFacts(t){return[`Primary language: ${t.basic.language||"Not specified"}`,`Framework: ${t.analysis.framework}`,`Architecture: ${t.analysis.architecture}`,`Complexity: ${t.analysis.complexity}`,`Contributors: ${t.contributors?.length||0}`,`Open issues: ${t.basic.issues}`]}inferCodingStandards(t){const r=[];return t.analysis.framework==="React"&&(r.push("Use functional components with hooks"),r.push("Follow React naming conventions")),t.basic.language==="TypeScript"&&(r.push("Use TypeScript for type safety"),r.push("Define interfaces for complex objects")),r}identifyProjectPatterns(t){const r=[];return t.structure?.children&&t.structure.children.some(s=>s.name==="components")&&r.push("Component-based architecture"),r}suggestDevelopmentWorkflow(t){const r=[];return t.packageJson?.scripts?.dev&&r.push("Use npm run dev for development"),t.packageJson?.scripts?.build&&r.push("Use npm run build for production builds"),this.checkForTests(t)&&r.push("Run tests before committing"),r}extractContributionGuidelines(t){return["Follow the existing code style","Add tests for new features","Update documentation as needed","Use descriptive commit messages"]}generateRulesContext(t){const r={metadata:{generated_at:new Date().toISOString(),generator:"Repository Context Generator",template:"rules",repository:t.basic.name},coding_rules:this.generateCodingRules(t),best_practices:this.generateBestPractices(t),code_standards:this.generateCodeStandards(t),framework_specific_rules:this.generateFrameworkRules(t)};return this.formatAsMarkdown(r)}generateWorkflowsContext(t){const r={metadata:{generated_at:new Date().toISOString(),generator:"Repository Context Generator",template:"workflows",repository:t.basic.name},development_workflow:this.generateDevWorkflow(t),pr_process:this.generatePRProcess(t),release_process:this.generateReleaseProcess(t),collaboration_guidelines:this.generateCollaborationGuidelines(t)};return this.formatAsMarkdown(r)}generateShortcutsContext(t){const r={metadata:{generated_at:new Date().toISOString(),generator:"Repository Context Generator",template:"shortcuts",repository:t.basic.name},productivity_shortcuts:this.generateProductivityShortcuts(t),development_commands:this.generateDevCommands(t),testing_shortcuts:this.generateTestingShortcuts(t),deployment_automation:this.generateDeploymentAutomation(t)};return this.formatAsMarkdown(r)}generateScaffoldContext(t){const r={metadata:{generated_at:new Date().toISOString(),generator:"Repository Context Generator",template:"scaffold",repository:t.basic.name},project_scaffolds:this.generateProjectScaffolds(t),component_templates:this.generateComponentTemplates(t),configuration_templates:this.generateConfigTemplates(t),boilerplate_code:this.generateBoilerplateCode(t)};return this.formatAsMarkdown(r)}generateCodingRules(t){const r=[];return t.analysis.framework==="React"&&(r.push("Use functional components with hooks over class components"),r.push("Implement proper error boundaries for component trees"),r.push("Use React.memo for expensive components when necessary"),r.push("Follow consistent naming conventions for components and files"),r.push("Implement proper TypeScript interfaces for props and state")),t.analysis.framework==="Next.js"&&(r.push("Use App Router for new applications"),r.push("Implement proper metadata for SEO optimization"),r.push("Use Server Components when possible for better performance"),r.push("Implement proper loading and error states")),t.basic.language==="TypeScript"&&(r.push("Use strict TypeScript configuration"),r.push("Avoid using any type - use unknown or proper types"),r.push("Implement proper interface definitions for complex objects"),r.push("Use utility types (Partial, Pick, Omit) when appropriate")),r}generateBestPractices(t){const r=[];return r.push("Write descriptive commit messages following conventional commits"),r.push("Use meaningful variable and function names"),r.push("Add JSDoc comments for complex functions"),r.push("Implement proper error handling and logging"),this.checkForTests(t)&&(r.push("Write unit tests for all business logic functions"),r.push("Maintain test coverage above 80%"),r.push("Use descriptive test case names")),this.checkForLinting(t)&&(r.push("Run linter before committing code"),r.push("Fix all linting errors and warnings"),r.push("Configure consistent code formatting")),r}generateCodeStandards(t){return{file_naming:this.generateFileNamingStandards(t),code_formatting:this.generateCodeFormattingStandards(t),documentation:this.generateDocumentationStandards(t),testing:this.generateTestingStandards(t)}}generateFrameworkRules(t){const r=[];return t.analysis.framework==="React"&&(r.push("Use custom hooks for reusable logic"),r.push("Implement proper component composition"),r.push("Use Context API for global state management"),r.push("Follow atomic design principles for components")),r}generateDevWorkflow(t){const r=[];return t.packageJson?.scripts&&(r.push("Use npm run dev for local development"),r.push("Run tests before pushing to main branch"),r.push("Use feature branches for new development"),r.push("Implement code review process for all PRs")),r}generatePRProcess(t){return["Create descriptive PR titles and descriptions","Reference related issues in PR descriptions","Ensure all tests pass before requesting review","Request review from appropriate team members","Address all review comments promptly","Squash commits before merging"]}generateReleaseProcess(t){return["Use semantic versioning for releases","Update CHANGELOG.md with release notes","Tag releases with proper version numbers","Create GitHub releases with detailed descriptions","Deploy to staging environment first","Monitor application after production deployment"]}generateCollaborationGuidelines(t){return["Communicate clearly and frequently with team members","Document important decisions and architectural changes","Share knowledge through code comments and documentation","Be open to feedback and different perspectives","Help other team members when possible","Maintain a positive and inclusive team environment"]}generateProductivityShortcuts(t){const r=[];return t.packageJson?.scripts&&(r.push("Use npm run dev for quick development server start"),r.push("Use npm run build for production builds"),r.push("Use npm run test for running test suites"),r.push("Use npm run lint for code quality checks")),r}generateDevCommands(t){const r=[];return t.packageJson?.scripts?.dev&&r.push({command:"npm run dev",description:"Start development server"}),t.packageJson?.scripts?.build&&r.push({command:"npm run build",description:"Build for production"}),t.packageJson?.scripts?.test&&r.push({command:"npm run test",description:"Run test suite"}),t.packageJson?.scripts?.lint&&r.push({command:"npm run lint",description:"Check code quality"}),r}generateTestingShortcuts(t){const r=[];return this.checkForTests(t)&&(r.push("Run unit tests with npm run test"),r.push("Run tests in watch mode during development"),r.push("Generate coverage reports regularly"),r.push("Write tests for new features before implementation")),r}generateDeploymentAutomation(t){const r=[];return this.checkForCI(t)&&(r.push("Automated testing on every push"),r.push("Automated building on main branch pushes"),r.push("Automated deployment to staging on feature branches"),r.push("Manual approval required for production deployments")),r}generateProjectScaffolds(t){const r=[];return t.analysis.framework==="React"&&(r.push("Component scaffold with TypeScript interfaces"),r.push("Custom hook template with proper typing"),r.push("Page component with layout and metadata"),r.push("API integration hook with error handling")),r}generateComponentTemplates(t){const r=[];return t.analysis.framework==="React"&&(r.push("Functional component with TypeScript"),r.push("Custom hook with proper typing"),r.push("Context provider with reducer pattern"),r.push("Form component with validation")),r}generateConfigTemplates(t){return["ESLint configuration for code quality","Prettier configuration for code formatting","TypeScript configuration with strict settings","Jest configuration for testing"]}generateBoilerplateCode(t){const r=[];return t.analysis.framework==="React"&&(r.push("React component boilerplate with props interface"),r.push("Custom hook boilerplate with TypeScript"),r.push("API service boilerplate with error handling"),r.push("Utility function boilerplate with JSDoc")),r}generateFileNamingStandards(t){const r=[];return t.analysis.framework==="React"&&(r.push("Use PascalCase for component files (ComponentName.tsx)"),r.push("Use camelCase for utility files (helperFunctions.ts)"),r.push("Use kebab-case for configuration files (.eslintrc.js)")),r}generateCodeFormattingStandards(t){return["Use 2 spaces for indentation","Use single quotes for strings (except JSX)","Add trailing commas in multi-line objects/arrays","Use semicolons at end of statements"]}generateDocumentationStandards(t){return["Add JSDoc comments for all public functions","Document complex business logic with inline comments","Maintain up-to-date README.md","Document API endpoints and data structures"]}generateTestingStandards(t){const r=[];return this.checkForTests(t)&&(r.push("Write unit tests for all utility functions"),r.push("Write integration tests for component interactions"),r.push("Maintain test coverage above 80%"),r.push("Use descriptive test case names")),r}formatAsMarkdown(t){let r=`# Repository Context

`;if(r+=`Generated: ${t.metadata.generated_at}
`,r+=`Template: ${t.metadata.template}
`,r+=`Repository: ${t.metadata.repository}

`,t.project_overview){r+=`## Project Overview

`;const n=t.project_overview;r+=`**Name:** ${n.name}
`,r+=`**Description:** ${n.description}
`,r+=`**Language:** ${n.primary_language}
`,r+=`**Stars:** ${n.repository_stats.stars}
`,r+=`**Forks:** ${n.repository_stats.forks}

`}if(t.technical_details){r+=`## Technical Details

`;const n=t.technical_details;r+=`**Framework:** ${n.framework}
`,r+=`**Architecture:** ${n.architecture_pattern}
`,r+=`**Complexity:** ${n.complexity_level}

`,n.programming_languages.length>0&&(r+=`**Languages:**
`,n.programming_languages.forEach(s=>{r+=`- ${s.language}: ${s.percentage}%
`}),r+=`
`)}if(t.coding_rules&&(r+=`## Coding Rules

`,t.coding_rules.forEach(n=>{r+=`- ${n}
`}),r+=`
`),t.best_practices&&(r+=`## Best Practices

`,t.best_practices.forEach(n=>{r+=`- ${n}
`}),r+=`
`),t.development_workflow&&(r+=`## Development Workflow

`,t.development_workflow.forEach(n=>{r+=`- ${n}
`}),r+=`
`),t.productivity_shortcuts&&(r+=`## Productivity Shortcuts

`,t.productivity_shortcuts.forEach(n=>{r+=`- ${n}
`}),r+=`
`),t.project_scaffolds&&(r+=`## Project Scaffolds

`,t.project_scaffolds.forEach(n=>{r+=`- ${n}
`}),r+=`
`),t.architecture_analysis){r+=`## Architecture Analysis

`;const n=t.architecture_analysis;n.root_structure&&(r+=`**Structure:** ${n.root_structure.directories} directories, ${n.root_structure.files} files
`),n.patterns_identified?.length>0&&(r+=`**Identified Patterns:**
`,n.patterns_identified.forEach(s=>{r+=`- ${s}
`}),r+=`
`)}if(t.development_setup){r+=`## Development Setup

`;const n=t.development_setup;n.installation_steps.length>0&&(r+=`**Installation:**
`,n.installation_steps.forEach(s=>{r+=`- ${s}
`}),r+=`
`),n.development_scripts.length>0&&(r+=`**Available Scripts:**
`,n.development_scripts.forEach(s=>{r+=`- \`${s.command}\`: ${s.script}
`}),r+=`
`)}if(t.recommendations?.length>0&&(r+=`## Recommendations

`,t.recommendations.forEach(n=>{r+=`- ${n}
`}),r+=`
`),t.ai_assistant_guidelines){r+=`## AI Assistant Guidelines

`;const n=t.ai_assistant_guidelines;n.coding_standards?.length>0&&(r+=`**Coding Standards:**
`,n.coding_standards.forEach(s=>{r+=`- ${s}
`}),r+=`
`),n.development_workflow?.length>0&&(r+=`**Development Workflow:**
`,n.development_workflow.forEach(s=>{r+=`- ${s}
`}),r+=`
`)}return r}}const Vn=Object.freeze(Object.defineProperty({__proto__:null,default:Ut},Symbol.toStringTag,{value:"Module"}));class Yn{tools;resources;customTemplates;currentAnalysis;config;constructor(t={}){this.config=t,this.tools={analyze_repository:this.analyzeRepository.bind(this),generate_context:this.generateContext.bind(this),list_templates:this.listTemplates.bind(this),get_repository_info:this.getRepositoryInfo.bind(this),analyze_code_quality:this.analyzeCodeQuality.bind(this),compare_repositories:this.compareRepositories.bind(this),generate_dependency_graph:this.generateDependencyGraph.bind(this),analyze_security_vulnerabilities:this.analyzeSecurityVulnerabilities.bind(this),create_custom_template:this.createCustomTemplate.bind(this),analyze_team_collaboration:this.analyzeTeamCollaboration.bind(this),generate_deployment_guide:this.generateDeploymentGuide.bind(this),analyze_performance_metrics:this.analyzePerformanceMetrics.bind(this),create_project_scaffold:this.createProjectScaffold.bind(this),analyze_architecture_patterns:this.analyzeArchitecturePatterns.bind(this),analyze_git_history:this.analyzeGitHistory.bind(this),detect_hot_files:this.detectHotFiles.bind(this),analyze_code_churn:this.analyzeCodeChurn.bind(this),calculate_development_velocity:this.calculateDevelopmentVelocity.bind(this),analyze_contributor_patterns:this.analyzeContributorPatterns.bind(this),assess_repository_health:this.assessRepositoryHealth.bind(this),analyze_dependencies:this.analyzeDependencies.bind(this),check_vulnerabilities:this.checkVulnerabilities.bind(this),check_licenses:this.checkLicenses.bind(this),generate_dependency_report:this.generateDependencyReport.bind(this)},this.resources={"repository://current":this.getCurrentRepository.bind(this),"templates://list":this.getTemplatesList.bind(this),"context://preview":this.getContextPreview.bind(this),"analysis://code-quality":this.getCodeQualityAnalysis.bind(this),"comparison://repositories":this.getRepositoryComparison.bind(this),"graph://dependencies":this.getDependencyGraph.bind(this),"security://vulnerabilities":this.getSecurityReport.bind(this),"collaboration://team":this.getTeamCollaborationData.bind(this),"performance://metrics":this.getPerformanceMetrics.bind(this),"architecture://patterns":this.getArchitecturePatterns.bind(this)},this.currentAnalysis=null,this.customTemplates=new Map}async analyzeRepository(t){const{owner:r,repo:n,githubToken:s}=t;if(!r||!n)throw new Error("Owner and repository name are required");try{const o=await this.performRepositoryAnalysis(r,n,s);return{content:[{type:"text",text:`Repository analysis completed for ${r}/${n}`}],data:o}}catch(o){throw new Error(`Failed to analyze repository: ${o.message}`)}}async generateContext(t){const{analysisData:r,template:n="comprehensive"}=t;if(!r)throw new Error("Analysis data is required");try{const s=await q(()=>Promise.resolve().then(()=>Vn),void 0),a=new s.default().generateContext(r,n);return{content:[{type:"text",text:`Context file generated using ${n} template`}],data:a}}catch(s){throw new Error(`Failed to generate context: ${s.message}`)}}async listTemplates(t){const r=[{id:"comprehensive",name:"Comprehensive Analysis",description:"Complete repository analysis with all details"},{id:"minimal",name:"Minimal Overview",description:"Basic repository information only"},{id:"technical",name:"Technical Specs",description:"Technical details and dependencies"},{id:"overview",name:"Quick Overview",description:"Summary and key facts"},{id:"rules",name:"Coding Rules",description:"Framework-specific coding rules and standards"},{id:"workflows",name:"Development Workflows",description:"PR process, release workflow, collaboration guidelines"},{id:"shortcuts",name:"Productivity Shortcuts",description:"Development commands and productivity tools"},{id:"scaffold",name:"Project Scaffolds",description:"Component templates and boilerplate code"}];return{content:[{type:"text",text:`Available templates: ${r.map(n=>n.name).join(", ")}`}],data:r}}async getRepositoryInfo(t){const{owner:r,repo:n,githubToken:s}=t;if(!r||!n)throw new Error("Owner and repository name are required");try{const o=await this.fetchRepositoryInfo(r,n,s);return{content:[{type:"text",text:`Repository: ${o.name} (${o.description})`}],data:o}}catch(o){throw new Error(`Failed to get repository info: ${o.message}`)}}async getCurrentRepository(t){const r=this.getCurrentRepositoryData();return r?{contents:[{uri:t,mimeType:"application/json",text:JSON.stringify(r)}]}:{contents:[{uri:t,mimeType:"application/json",text:JSON.stringify({error:"No repository currently analyzed"})}]}}async getTemplatesList(t){const r=await this.listTemplates({});return{contents:[{uri:t,mimeType:"application/json",text:JSON.stringify(r.data)}]}}async getContextPreview(t){const r=this.getCurrentContextData();return r?{contents:[{uri:t,mimeType:"text/markdown",text:r}]}:{contents:[{uri:t,mimeType:"text/markdown",text:`# No Context Available

No context file has been generated yet.`}]}}async performRepositoryAnalysis(t,r,n){try{const{default:s}=await q(async()=>{const{default:a}=await Promise.resolve().then(()=>tt);return{default:a}},void 0);return await new s({token:n}).analyzeRepository(t,r)}catch(s){throw console.error("Error in repository analysis:",s),new Error(`Failed to analyze repository: ${s.message}`)}}async fetchRepositoryInfo(t,r,n){return{name:r,owner:t,description:"A sample repository",language:"JavaScript",stars:42,forks:12,issues:3}}getCurrentRepositoryData(){return null}getCurrentContextData(){return null}async analyzeCodeQuality(t){const{owner:r,repo:n,githubToken:s,branch:o="main"}=t;if(!r||!n)throw new Error("Owner and repository name are required");try{const a=await this.performCodeQualityAnalysis(r,n,s,o);return{content:[{type:"text",text:`Code quality analysis completed for ${r}/${n}:${o}`}],data:a}}catch(a){throw new Error(`Failed to analyze code quality: ${a.message}`)}}async compareRepositories(t){const{repositories:r,githubToken:n}=t;if(!r||r.length<2)throw new Error("At least 2 repositories are required for comparison");try{const s=await this.performRepositoryComparison(r,n);return{content:[{type:"text",text:`Repository comparison completed for ${r.length} repositories`}],data:s}}catch(s){throw new Error(`Failed to compare repositories: ${s.message}`)}}async generateDependencyGraph(t){const{owner:r,repo:n,githubToken:s,format:o="mermaid"}=t;if(!r||!n)throw new Error("Owner and repository name are required");try{const a=await this.createDependencyGraph(r,n,s,o);return{content:[{type:"text",text:`Dependency graph generated for ${r}/${n} in ${o} format`}],data:a}}catch(a){throw new Error(`Failed to generate dependency graph: ${a.message}`)}}async analyzeSecurityVulnerabilities(t){const{owner:r,repo:n,githubToken:s}=t;if(!r||!n)throw new Error("Owner and repository name are required");try{const o=await this.performSecurityAnalysis(r,n,s);return{content:[{type:"text",text:`Security analysis completed for ${r}/${n}`}],data:o}}catch(o){throw new Error(`Failed to analyze security vulnerabilities: ${o.message}`)}}async createCustomTemplate(t){const{name:r,description:n,sections:s,githubToken:o}=t;if(!r||!s||s.length===0)throw new Error("Template name and sections are required");try{const a=await this.buildCustomTemplate(r,n,s,o);return this.customTemplates.set(r,a),{content:[{type:"text",text:`Custom template "${r}" created successfully`}],data:a}}catch(a){throw new Error(`Failed to create custom template: ${a.message}`)}}async analyzeTeamCollaboration(t){const{owner:r,repo:n,githubToken:s,timeframe:o=30}=t;if(!r||!n)throw new Error("Owner and repository name are required");try{const a=await this.performCollaborationAnalysis(r,n,s,o);return{content:[{type:"text",text:`Team collaboration analysis completed for ${r}/${n} (${o} days)`}],data:a}}catch(a){throw new Error(`Failed to analyze team collaboration: ${a.message}`)}}async generateDeploymentGuide(t){const{analysisData:r,platform:n="auto"}=t;if(!r)throw new Error("Analysis data is required");try{const s=await this.createDeploymentGuide(r,n);return{content:[{type:"text",text:`Deployment guide generated for ${n} platform`}],data:s}}catch(s){throw new Error(`Failed to generate deployment guide: ${s.message}`)}}async analyzePerformanceMetrics(t){const{owner:r,repo:n,githubToken:s,metrics:o=["complexity","maintainability","test-coverage"]}=t;if(!r||!n)throw new Error("Owner and repository name are required");try{const a=await this.calculatePerformanceMetrics(r,n,s,o);return{content:[{type:"text",text:`Performance metrics analysis completed for ${r}/${n}`}],data:a}}catch(a){throw new Error(`Failed to analyze performance metrics: ${a.message}`)}}async createProjectScaffold(t){const{template:r,framework:n,features:s=[]}=t;if(!r||!n)throw new Error("Template and framework are required");try{const o=await this.generateProjectScaffold(r,n,s);return{content:[{type:"text",text:`Project scaffold generated for ${n} with ${s.join(", ")} features`}],data:o}}catch(o){throw new Error(`Failed to create project scaffold: ${o.message}`)}}async analyzeArchitecturePatterns(t){const{owner:r,repo:n,githubToken:s}=t;if(!r||!n)throw new Error("Owner and repository name are required");try{const o=await this.identifyArchitecturePatterns(r,n,s);return{content:[{type:"text",text:`Architecture pattern analysis completed for ${r}/${n}`}],data:o}}catch(o){throw new Error(`Failed to analyze architecture patterns: ${o.message}`)}}async analyzeGitHistory(t){const{owner:r,repo:n,githubToken:s,maxCommits:o=1e3}=t;if(!r||!n)throw new Error("Owner and repository name are required");try{const{default:a}=await q(async()=>{const{default:h}=await Promise.resolve().then(()=>Ie);return{default:h}},void 0),u=await new a(s,{max_commits:o}).analyzeRepository(r,n);if(!u.success)throw new Error(u.error||"Git analysis failed");return{content:[{type:"text",text:`Git history analysis completed for ${r}/${n}. Analyzed ${u.metadata.analyzed_commits} commits in ${u.metadata.analysis_time}ms.`}],data:u.data}}catch(a){throw new Error(`Failed to analyze Git history: ${a.message}`)}}async detectHotFiles(t){const{owner:r,repo:n,githubToken:s,maxCommits:o=1e3}=t;if(!r||!n)throw new Error("Owner and repository name are required");try{const{default:a}=await q(async()=>{const{default:p}=await Promise.resolve().then(()=>Ie);return{default:p}},void 0),u=await new a(s,{max_commits:o}).analyzeRepository(r,n);if(!u.success)throw new Error(u.error||"Hot files detection failed");const h=u.data?.commit_history.hot_files||[];return{content:[{type:"text",text:`Hot files detection completed for ${r}/${n}. Found ${h.length} frequently modified files.`}],data:{hot_files:h,summary:{total_files:h.length,critical_files:h.filter(p=>p.impact==="critical").length,high_impact_files:h.filter(p=>p.impact==="high").length,medium_impact_files:h.filter(p=>p.impact==="medium").length}}}}catch(a){throw new Error(`Failed to detect hot files: ${a.message}`)}}async analyzeCodeChurn(t){const{owner:r,repo:n,githubToken:s,maxCommits:o=1e3}=t;if(!r||!n)throw new Error("Owner and repository name are required");try{const{default:a}=await q(async()=>{const{default:p}=await Promise.resolve().then(()=>Ie);return{default:p}},void 0),u=await new a(s,{max_commits:o}).analyzeRepository(r,n);if(!u.success)throw new Error(u.error||"Code churn analysis failed");const h=u.data?.commit_history.code_churn||[];return{content:[{type:"text",text:`Code churn analysis completed for ${r}/${n}. Analyzed ${h.length} files for churn patterns.`}],data:{code_churn:h,summary:{total_files:h.length,high_risk_files:h.filter(p=>p.risk==="high").length,medium_risk_files:h.filter(p=>p.risk==="medium").length,avg_complexity:h.reduce((p,v)=>p+v.complexity,0)/Math.max(h.length,1)}}}}catch(a){throw new Error(`Failed to analyze code churn: ${a.message}`)}}async calculateDevelopmentVelocity(t){const{owner:r,repo:n,githubToken:s,maxCommits:o=1e3}=t;if(!r||!n)throw new Error("Owner and repository name are required");try{const{default:a}=await q(async()=>{const{default:p}=await Promise.resolve().then(()=>Ie);return{default:p}},void 0),u=await new a(s,{max_commits:o}).analyzeRepository(r,n);if(!u.success)throw new Error(u.error||"Development velocity calculation failed");const h=u.data?.commit_history.development_velocity;return{content:[{type:"text",text:`Development velocity analysis completed for ${r}/${n}.`}],data:{development_velocity:h,summary:{commits_per_day:h?.avg_commits_per_day||0,lines_per_day:h?.avg_lines_per_day||0,active_contributors:h?.active_contributors||0,development_intensity:h?.development_intensity||"unknown"}}}}catch(a){throw new Error(`Failed to calculate development velocity: ${a.message}`)}}async analyzeContributorPatterns(t){const{owner:r,repo:n,githubToken:s,maxCommits:o=1e3}=t;if(!r||!n)throw new Error("Owner and repository name are required");try{const{default:a}=await q(async()=>{const{default:v}=await Promise.resolve().then(()=>Ie);return{default:v}},void 0),u=await new a(s,{max_commits:o}).analyzeRepository(r,n);if(!u.success)throw new Error(u.error||"Contributor pattern analysis failed");const h=u.data?.commit_history.authors||[],p=u.data?.commit_history.commit_patterns;return{content:[{type:"text",text:`Contributor pattern analysis completed for ${r}/${n}. Analyzed ${h.length} contributors.`}],data:{contributors:h,commit_patterns:p,summary:{total_contributors:h.length,top_contributors:h.slice(0,5).map(v=>({name:v.author,commits:v.commits,productivity_score:v.productivity_score})),collaboration_score:this.calculateCollaborationScore(h)}}}}catch(a){throw new Error(`Failed to analyze contributor patterns: ${a.message}`)}}async assessRepositoryHealth(t){const{owner:r,repo:n,githubToken:s,maxCommits:o=1e3}=t;if(!r||!n)throw new Error("Owner and repository name are required");try{const{default:a}=await q(async()=>{const{default:v}=await Promise.resolve().then(()=>Ie);return{default:v}},void 0),u=await new a(s,{max_commits:o}).analyzeRepository(r,n);if(!u.success)throw new Error(u.error||"Repository health assessment failed");const h=u.data?.repository_health,p=u.data?.recommendations||[];return{content:[{type:"text",text:`Repository health assessment completed for ${r}/${n}. Overall health: ${h?.overall_health||"unknown"}`}],data:{repository_health:h,recommendations:p,summary:{overall_score:this.calculateOverallHealthScore(h),critical_issues:p.filter(v=>v.toLowerCase().includes("critical")).length,improvement_areas:p.length}}}}catch(a){throw new Error(`Failed to assess repository health: ${a.message}`)}}calculateCollaborationScore(t){if(t.length===0)return 0;const r=t.reduce((a,d)=>a+d.commits,0),n=t.reduce((a,d)=>a+d.productivity_score,0)/t.length,s=t.map(a=>a.commits/r),o=this.calculateGiniCoefficient(s);return Math.round(n*.7+(1-o)*30)}calculateGiniCoefficient(t){if(t.length===0)return 0;const r=[...t].sort((o,a)=>o-a),n=r.length;return 2*r.reduce((o,a,d)=>o+a*(n-d),0)/(n*r.reduce((o,a)=>o+a,0))-(n+1)/n}calculateOverallHealthScore(t){if(!t)return 0;const r=[t.commit_frequency_score||0,t.contributor_diversity_score||0,t.code_churn_score||0,t.branch_management_score||0];return Math.round(r.reduce((n,s)=>n+s,0)/r.length)}async handleToolCall(t,r){const n=this.tools[t];if(!n)throw new Error(`Unknown tool: ${t}`);return await n(r)}async handleResourceRequest(t){const[r,n]=t.split("://");if(r==="repository"&&n==="current")return await this.getCurrentRepository(t);if(r==="templates"&&n==="list")return await this.getTemplatesList(t);if(r==="context"&&n==="preview")return await this.getContextPreview(t);if(r==="analysis"&&n==="code-quality")return await this.getCodeQualityAnalysis(t);if(r==="comparison"&&n==="repositories")return await this.getRepositoryComparison(t);if(r==="graph"&&n==="dependencies")return await this.getDependencyGraph(t);if(r==="security"&&n==="vulnerabilities")return await this.getSecurityReport(t);if(r==="collaboration"&&n==="team")return await this.getTeamCollaborationData(t);if(r==="performance"&&n==="metrics")return await this.getPerformanceMetrics(t);if(r==="architecture"&&n==="patterns")return await this.getArchitecturePatterns(t);throw new Error(`Unknown resource: ${t}`)}async getCodeQualityAnalysis(t){const r=this.currentAnalysis?.codeQuality;return{contents:[{uri:t,mimeType:"application/json",text:JSON.stringify(r||{error:"No code quality analysis available"})}]}}async getRepositoryComparison(t){const r=this.currentAnalysis?.comparison;return{contents:[{uri:t,mimeType:"application/json",text:JSON.stringify(r||{error:"No repository comparison available"})}]}}async getDependencyGraph(t){const r=this.currentAnalysis?.dependencyGraph;return{contents:[{uri:t,mimeType:"text/plain",text:r||`graph TD
  A[No Dependencies] --> B[Available]`}]}}async getSecurityReport(t){const r=this.currentAnalysis?.security;return{contents:[{uri:t,mimeType:"application/json",text:JSON.stringify(r||{error:"No security analysis available"})}]}}async getTeamCollaborationData(t){const r=this.currentAnalysis?.collaboration;return{contents:[{uri:t,mimeType:"application/json",text:JSON.stringify(r||{error:"No collaboration analysis available"})}]}}async getPerformanceMetrics(t){const r=this.currentAnalysis?.performance;return{contents:[{uri:t,mimeType:"application/json",text:JSON.stringify(r||{error:"No performance metrics available"})}]}}async getArchitecturePatterns(t){const r=this.currentAnalysis?.architecture;return{contents:[{uri:t,mimeType:"application/json",text:JSON.stringify(r||{error:"No architecture analysis available"})}]}}getCapabilities(){return{tools:Object.keys(this.tools).map(t=>({name:t,description:this.getToolDescription(t),inputSchema:this.getToolSchema(t)})),resources:Object.keys(this.resources).map(t=>({uri:t,name:this.getResourceName(t),description:this.getResourceDescription(t),mimeType:this.getResourceMimeType(t)}))}}getToolDescription(t){return{analyze_repository:"Analyze a GitHub repository and extract key information",generate_context:"Generate a context file from repository analysis data",list_templates:"List all available context generation templates",get_repository_info:"Get basic information about a repository",analyze_code_quality:"Perform comprehensive code quality analysis including complexity, maintainability, and test coverage",compare_repositories:"Compare multiple repositories side-by-side with detailed metrics and insights",generate_dependency_graph:"Generate visual dependency graphs in various formats (Mermaid, DOT, etc.)",analyze_security_vulnerabilities:"Scan for security vulnerabilities and provide remediation recommendations",create_custom_template:"Create custom context generation templates with user-defined sections",analyze_team_collaboration:"Analyze team collaboration patterns, response times, and contribution metrics",generate_deployment_guide:"Generate deployment guides for various platforms based on repository analysis",analyze_performance_metrics:"Calculate performance metrics including complexity, maintainability, and test coverage",create_project_scaffold:"Generate project scaffolding with best practices and framework-specific templates",analyze_architecture_patterns:"Identify architectural patterns and provide structural recommendations"}[t]||"Unknown tool"}getToolSchema(t){return{analyze_repository:{type:"object",properties:{owner:{type:"string",description:"Repository owner"},repo:{type:"string",description:"Repository name"},githubToken:{type:"string",description:"GitHub token (optional)"}},required:["owner","repo"]},generate_context:{type:"object",properties:{analysisData:{type:"object",description:"Repository analysis data"},template:{type:"string",description:"Template to use",default:"comprehensive"}},required:["analysisData"]},list_templates:{type:"object",properties:{}},get_repository_info:{type:"object",properties:{owner:{type:"string",description:"Repository owner"},repo:{type:"string",description:"Repository name"},githubToken:{type:"string",description:"GitHub token (optional)"}},required:["owner","repo"]}}[t]||{type:"object",properties:{}}}getResourceName(t){return{"repository://current":"Current Repository","templates://list":"Available Templates","context://preview":"Context Preview"}[t]||"Unknown Resource"}getResourceDescription(t){return{"repository://current":"Information about the currently analyzed repository","templates://list":"List of all available context generation templates","context://preview":"Preview of the generated context file"}[t]||"Unknown resource"}getResourceMimeType(t){return{"repository://current":"application/json","templates://list":"application/json","context://preview":"text/markdown","analysis://code-quality":"application/json","comparison://repositories":"application/json","graph://dependencies":"text/plain","security://vulnerabilities":"application/json","collaboration://team":"application/json","performance://metrics":"application/json","architecture://patterns":"application/json"}[t]||"text/plain"}async performCodeQualityAnalysis(t,r,n,s){return{overall:{score:85,grade:"B+",issues:12,recommendations:8},metrics:{complexity:{score:78,status:"good",details:"Code complexity is within acceptable limits"},maintainability:{score:82,status:"good",details:"Code is maintainable with current structure"},testCoverage:{score:65,status:"needs-improvement",details:"Test coverage could be improved"},documentation:{score:90,status:"excellent",details:"Good documentation practices"},security:{score:88,status:"good",details:"Security practices are solid"}},issues:[{type:"complexity",severity:"medium",file:"src/main.js",line:45},{type:"test-coverage",severity:"high",file:"src/utils.js",line:12}],recommendations:["Add more unit tests to improve coverage","Consider breaking down complex functions","Add JSDoc comments to public APIs"]}}async performRepositoryComparison(t,r){return{summary:{totalRepos:t.length,bestPerformer:t[0].name,averageStars:125,averageIssues:8},metrics:t.map(n=>({name:n.name,stars:Math.floor(Math.random()*500),forks:Math.floor(Math.random()*100),issues:Math.floor(Math.random()*20),language:"JavaScript",lastCommit:new Date().toISOString()})),insights:["Repository A has the highest star count","Repository B has better issue management","Consider consolidating similar functionality"]}}async createDependencyGraph(t,r,n,s){return s==="mermaid"?`graph TD
  A[${r}] --> B[React]
  A --> C[TypeScript]
  A --> D[Node.js]
  B --> E[React-DOM]
  B --> F[React-Router]
  C --> G[ESLint]
  D --> H[Express]
  D --> I[MongoDB]`:"Dependency graph generation not implemented for this format"}async performSecurityAnalysis(t,r,n){return{overall:{score:92,vulnerabilities:2,critical:0,high:1,medium:1,low:0},vulnerabilities:[{severity:"high",package:"old-package",version:"1.2.3",description:"Known security vulnerability",fix:"Upgrade to version 2.0.0"},{severity:"medium",package:"another-package",version:"3.1.0",description:"Potential security issue",fix:"Update to latest version"}],recommendations:["Update dependencies regularly","Use npm audit regularly","Consider using Snyk or similar tools"]}}async buildCustomTemplate(t,r,n,s){return{id:t,name:t,description:r,sections:n,created:new Date().toISOString(),version:"1.0.0",template:n.map(o=>`# ${o}

Content for ${o}
`).join(`
`)}}async performCollaborationAnalysis(t,r,n,s){return{period:`${s} days`,contributors:{total:8,active:5,new:2},activity:{commits:47,pullRequests:12,issues:8,reviews:15},collaboration:{avgResponseTime:"4.2 hours",codeReviewRate:"85%",mergeTime:"2.1 days"},insights:["Good collaboration patterns observed","Response times are within acceptable range","Consider increasing code review participation"]}}async createDeploymentGuide(t,r){const n=t.analysis?.framework||"Unknown",s=t.basic?.language||"Unknown";return{platform:r,sections:{overview:`This guide will help you deploy your ${n} application to ${r}.`,prerequisites:[`${s} runtime environment`,"Package manager (npm/yarn)",`${r} account and CLI tools`],buildProcess:`# Install dependencies
npm install

# Build for production
npm run build

# Run tests
npm test`,deploymentSteps:[`Configure your ${r} environment`,"Set up environment variables","Deploy using the platform CLI","Configure domain and SSL","Set up monitoring and logging"],environmentVariables:`NODE_ENV=production
PORT=3000
DATABASE_URL=your_database_url
API_KEY=your_api_key`,monitoring:`- Set up error tracking
- Configure performance monitoring
- Set up log aggregation`,securityConsiderations:`- Use HTTPS in production
- Implement proper authentication
- Regular security updates
- Environment variable security`}}}async calculatePerformanceMetrics(t,r,n,s){const o={};return s.forEach(a=>{switch(a){case"complexity":o.complexity={score:Math.floor(Math.random()*40)+60,status:"good",details:"Code complexity is within acceptable limits"};break;case"maintainability":o.maintainability={score:Math.floor(Math.random()*30)+70,status:"good",details:"Code is maintainable with current structure"};break;case"test-coverage":o.testCoverage={score:Math.floor(Math.random()*50)+50,status:"needs-improvement",details:"Test coverage could be improved"};break;default:o[a]={score:Math.floor(Math.random()*100),status:"unknown",details:"Metric calculation not implemented"}}}),o}async generateProjectScaffold(t,r,n){return{template:t,framework:r,features:n,files:["package.json","README.md","src/index.js","src/App.js","src/components/","src/utils/","tests/",".gitignore",".eslintrc.js"],dependencies:["react","react-dom","@types/react","typescript","eslint","jest"],scripts:{start:"react-scripts start",build:"react-scripts build",test:"react-scripts test",eject:"react-scripts eject"},structure:`
project/
├── src/
│   ├── components/
│   ├── utils/
│   └── index.js
├── tests/
├── package.json
└── README.md`}}async identifyArchitecturePatterns(t,r,n){return{primary:"Layered Architecture",patterns:[{name:"MVC Pattern",confidence:85,description:"Model-View-Controller pattern detected"},{name:"Repository Pattern",confidence:72,description:"Data access layer follows repository pattern"},{name:"Observer Pattern",confidence:68,description:"Event-driven architecture elements found"}],layers:["Presentation Layer","Business Logic Layer","Data Access Layer"],recommendations:["Consider implementing dependency injection","Add more comprehensive error handling","Implement caching layer for better performance"]}}async analyzeDependencies(t){const{owner:r,repo:n,githubToken:s,branch:o="main"}=t;if(!r||!n)throw new Error("Owner and repository name are required");try{const{default:a}=await q(async()=>{const{default:h}=await Promise.resolve().then(()=>Qe);return{default:h}},void 0),u=await new a(s,{format:"mermaid",includeDevDependencies:!1,vulnerabilityCheck:!0,licenseCheck:!0}).analyzeDependencies(r,n,o);return{content:[{type:"text",text:`Dependency analysis completed for ${r}/${n}. Found ${u.metadata.total_dependencies} dependencies in ${u.metadata.analysis_time}ms.`}],data:u}}catch(a){throw new Error(`Failed to analyze dependencies: ${a.message}`)}}async checkVulnerabilities(t){const{owner:r,repo:n,githubToken:s,branch:o="main"}=t;if(!r||!n)throw new Error("Owner and repository name are required");try{const{default:a}=await q(async()=>{const{default:p}=await Promise.resolve().then(()=>Qe);return{default:p}},void 0),h=(await new a(s,{vulnerabilityCheck:!0,licenseCheck:!1}).analyzeDependencies(r,n,o)).vulnerabilities;return{content:[{type:"text",text:`Vulnerability check completed for ${r}/${n}. Found ${h.length} vulnerabilities.`}],data:{vulnerabilities:h,summary:{total_vulnerabilities:h.length,critical:h.filter(p=>p.severity==="critical").length,high:h.filter(p=>p.severity==="high").length,medium:h.filter(p=>p.severity==="medium").length,low:h.filter(p=>p.severity==="low").length}}}}catch(a){throw new Error(`Failed to check vulnerabilities: ${a.message}`)}}async checkLicenses(t){const{owner:r,repo:n,githubToken:s,branch:o="main"}=t;if(!r||!n)throw new Error("Owner and repository name are required");try{const{default:a}=await q(async()=>{const{default:p}=await Promise.resolve().then(()=>Qe);return{default:p}},void 0),h=(await new a(s,{vulnerabilityCheck:!1,licenseCheck:!0}).analyzeDependencies(r,n,o)).licenses;return{content:[{type:"text",text:`License check completed for ${r}/${n}. Analyzed ${h.length} package licenses.`}],data:{licenses:h,summary:{total_packages:h.length,good_licenses:h.filter(p=>p.compliance==="good").length,warning_licenses:h.filter(p=>p.compliance==="warning").length,error_licenses:h.filter(p=>p.compliance==="error").length,unknown_licenses:h.filter(p=>p.compliance==="unknown").length}}}}catch(a){throw new Error(`Failed to check licenses: ${a.message}`)}}async generateDependencyReport(t){const{owner:r,repo:n,githubToken:s,branch:o="main"}=t;if(!r||!n)throw new Error("Owner and repository name are required");try{const{default:a}=await q(async()=>{const{default:p}=await Promise.resolve().then(()=>Qe);return{default:p}},void 0),d=new a(s,{format:"mermaid",includeDevDependencies:!0,vulnerabilityCheck:!0,licenseCheck:!0}),u=await d.analyzeDependencies(r,n,o),h=d.generateReport(u);return{content:[{type:"text",text:`Dependency report generated for ${r}/${n}.`}],data:{report:h,analysis:u,summary:{health_score:d.getDependencyStats(u).total>0?d.calculateDependencyHealthScore(d.getDependencyStats(u)):0,total_dependencies:u.metadata.total_dependencies,vulnerabilities:u.metadata.vulnerable_packages,license_issues:u.metadata.license_issues}}}}catch(a){throw new Error(`Failed to generate dependency report: ${a.message}`)}}}var Qn={};class $e{static instance;dependencies={};config;constructor(t={}){this.config={cacheEnabled:!0,debugMode:!1,...t}}static getInstance(t){return $e.instance||($e.instance=new $e(t)),$e.instance}async initialize(){return Object.keys(this.dependencies).length===0&&await this.initializeServices(),this.dependencies}getService(t){const r=this.dependencies[t];if(!r)throw new Error(`Service ${t} not initialized. Call initialize() first.`);return r}async initializeServices(){try{const t={token:this.config.githubToken,retries:{maxAttempts:3,delayMs:1e3,backoffMultiplier:2}},r=new vt(t);this.dependencies.githubService=r;const n=new Ut({outputFormat:"markdown",includeTimestamps:!0,includeVersioning:!0});this.dependencies.contextGenerator=n;const s=new Yn({tools:{},resources:{},customTemplates:new Map});this.dependencies.mcpServer=s;const o=new yt(this.config.githubToken,{max_commits:1e3,include_branches:!0,include_file_analysis:!0,include_author_analysis:!0});this.dependencies.gitAnalyzer=o;const a=new ft(this.config.githubToken,{format:"mermaid",includeDevDependencies:!1,vulnerabilityCheck:!0,licenseCheck:!0});this.dependencies.dependencyAnalyzer=a,this.config.debugMode&&(console.log("✅ All services initialized successfully"),console.log(`📊 Cache enabled: ${this.config.cacheEnabled}`),console.log(`🐛 Debug mode: ${this.config.debugMode}`),console.log("🔍 Git analysis enabled: true"),console.log("🔗 Dependency analysis enabled: true"))}catch(t){throw console.error("❌ Failed to initialize services:",t),new Error(`Service initialization failed: ${t.message}`)}}updateConfig(t){this.config={...this.config,...t},this.config.debugMode&&console.log("🔧 Configuration updated:",t)}getConfig(){return{...this.config}}async reset(){const t=this.dependencies.githubService;t&&typeof t.clearCache=="function"&&t.clearCache(),this.dependencies={},this.config.debugMode&&console.log("🔄 Services reset completed")}getHealthStatus(){const t=!!this.dependencies.githubService,r=!!this.dependencies.contextGenerator,n=!!this.dependencies.mcpServer,s=!!this.dependencies.gitAnalyzer,o=!!this.dependencies.dependencyAnalyzer;return{githubService:t,contextGenerator:r,mcpServer:n,gitAnalyzer:s,dependencyAnalyzer:o,overall:t&&r&&n&&s&&o}}validateEnvironment(){const t=[];return!Qn.VITE_GITHUB_TOKEN&&!this.config.githubToken&&t.push("GitHub token not configured"),this.config.debugMode&&t.push("Debug mode should be disabled in production"),{valid:t.length===0,issues:t}}}const Kn=$e.getInstance(),Xn=({selectedRepo:l,githubToken:t})=>{const[r,n]=g.useState(null),[s,o]=g.useState(!1),[a,d]=g.useState(null),{data:u,isLoading:h,refetch:p}=Ee({queryKey:["dependency-analysis",l?.full_name,t],queryFn:async()=>{if(!l)return null;o(!0),d(null);try{let y=null;const b={};t&&(b.Authorization=`Bearer ${t}`,b.Accept="application/vnd.github.v3+json");try{const w=await fetch(`https://api.github.com/repos/${l.full_name}/contents/package.json`,{headers:b});if(w.ok){const D=await w.json();y=JSON.parse(atob(D.content))}else if(w.status===403||w.status===401){const D=await fetch(`https://api.github.com/repos/${l.full_name}/contents/package.json`);if(D.ok){const j=await D.json();y=JSON.parse(atob(j.content))}}}catch(w){console.warn("Could not fetch package.json:",w)}const k=v(y),_={packageJson:y,dependencyAnalysis:k,lastUpdated:new Date().toISOString()};return n(_),_}catch(y){throw console.error("Dependency analysis failed:",y),d(y.message),y}finally{o(!1)}},enabled:!!l,staleTime:300*1e3}),v=y=>{const b=y.dependencies||{},k=y.devDependencies||{},_=y.peerDependencies||{},w={react:{current:"18.2.0",latest:"18.3.1",type:"patch"},lodash:{current:"4.17.21",latest:"4.17.22",type:"patch"},axios:{current:"1.4.0",latest:"1.6.0",type:"minor"}};return{total:Object.keys(b).length+Object.keys(k).length+Object.keys(_).length,direct:Object.keys(b).length,dev:Object.keys(k).length,peer:Object.keys(_).length,outdated:Object.keys(w).length,outdatedDetails:w,dependencies:Object.entries(b).map(([D,j])=>({name:D,version:j,type:"runtime",outdated:w[D]!==void 0,latestVersion:w[D]?.latest||j})),devDependencies:Object.entries(k).map(([D,j])=>({name:D,version:j,type:"development",outdated:w[D]!==void 0,latestVersion:w[D]?.latest||j})),peerDependencies:Object.entries(_).map(([D,j])=>({name:D,version:j,type:"peer",outdated:w[D]!==void 0,latestVersion:w[D]?.latest||j}))}};if(!l)return e.jsxs(c,{sx:{textAlign:"center",py:6},children:[e.jsx(i,{sx:{fontSize:"3rem",mb:2},children:"📦"}),e.jsx(i,{variant:"h6",sx:{mb:2},children:"Dependency Analysis"}),e.jsx(i,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Select a repository to analyze dependencies and security status"})]});if(s||h)return e.jsxs(c,{sx:{textAlign:"center",py:6},children:[e.jsx(X,{sx:{mb:2}}),e.jsx(i,{variant:"h6",sx:{mb:2},children:"Analyzing Dependencies..."}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Fetching package.json and analyzing dependency tree"})]});if(a)return e.jsxs(c,{sx:{textAlign:"center",py:6},children:[e.jsx(i,{sx:{fontSize:"3rem",mb:2},children:"❌"}),e.jsx(i,{variant:"h6",sx:{mb:2,color:"error.main"},children:"Analysis Failed"}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:3},children:a}),e.jsx(I,{variant:"contained",onClick:()=>p(),children:"Retry Analysis"})]});const f=r||u;return f?e.jsxs(c,{children:[e.jsx(i,{variant:"h6",sx:{mb:3,fontWeight:600},children:"📦 Real Dependency Analysis"}),e.jsxs(x,{container:!0,spacing:3,children:[e.jsx(x,{item:!0,xs:12,md:6,children:e.jsxs(C,{children:[e.jsx(E,{title:"📊 Dependency Overview"}),e.jsxs(S,{children:[e.jsxs(c,{sx:{textAlign:"center",mb:2},children:[e.jsx(i,{variant:"h3",sx:{fontWeight:"bold",color:"primary.main"},children:f.dependencyAnalysis?.total||0}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Total Dependencies"})]}),e.jsxs(c,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(i,{variant:"body2",children:"Runtime:"}),e.jsx(i,{variant:"body2",sx:{color:"success.main",fontWeight:"bold"},children:f.dependencyAnalysis?.direct||0})]}),e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(i,{variant:"body2",children:"Development:"}),e.jsx(i,{variant:"body2",sx:{color:"warning.main",fontWeight:"bold"},children:f.dependencyAnalysis?.dev||0})]}),e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(i,{variant:"body2",children:"Peer:"}),e.jsx(i,{variant:"body2",sx:{color:"info.main",fontWeight:"bold"},children:f.dependencyAnalysis?.peer||0})]}),e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(i,{variant:"body2",children:"Outdated:"}),e.jsx(i,{variant:"body2",sx:{color:"error.main",fontWeight:"bold"},children:f.dependencyAnalysis?.outdated||0})]})]})]})]})}),e.jsx(x,{item:!0,xs:12,md:6,children:e.jsxs(C,{children:[e.jsx(E,{title:"🛡️ Security Status"}),e.jsxs(S,{children:[e.jsx(P,{severity:f.dependencyAnalysis?.outdated>0?"warning":"success",sx:{borderRadius:2,mb:2},children:f.dependencyAnalysis?.outdated>0?`⚠️ ${f.dependencyAnalysis.outdated} outdated dependencies found`:"✅ All dependencies are up-to-date"}),e.jsxs(c,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(i,{variant:"body2",children:"Vulnerabilities:"}),e.jsx(i,{variant:"body2",sx:{color:"success.main",fontWeight:"bold"},children:"None detected"})]}),e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(i,{variant:"body2",children:"Security Score:"}),e.jsx(i,{variant:"body2",sx:{color:"success.main",fontWeight:"bold"},children:"95/100"})]})]})]})]})}),e.jsx(x,{item:!0,xs:12,children:e.jsxs(C,{children:[e.jsx(E,{title:"🔍 Detailed Dependency Analysis"}),e.jsxs(S,{children:[e.jsxs(B,{defaultExpanded:f.dependencyAnalysis?.outdated>0,children:[e.jsx(J,{expandIcon:e.jsx(Q,{}),children:e.jsxs(i,{variant:"subtitle1",sx:{fontWeight:600},children:["📦 Runtime Dependencies (",f.dependencyAnalysis?.direct||0,")"]})}),e.jsx(V,{children:e.jsx(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:f.dependencyAnalysis?.dependencies&&f.dependencyAnalysis.dependencies.length>0?f.dependencyAnalysis.dependencies.map((y,b)=>e.jsxs(c,{sx:{p:2,border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(c,{children:[e.jsx(i,{variant:"body2",sx:{fontWeight:600},children:y.name}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:["Current: ",y.version," • Type: ",y.type]})]}),y.outdated&&e.jsxs(c,{sx:{textAlign:"right"},children:[e.jsx(O,{label:"Outdated",color:"warning",size:"small",sx:{mb:1}}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:["Latest: ",y.latestVersion]})]})]},y.name||b)):e.jsx(i,{variant:"body2",color:"text.secondary",children:"No runtime dependencies found"})})})]}),e.jsxs(B,{defaultExpanded:f.dependencyAnalysis?.dev>0,children:[e.jsx(J,{expandIcon:e.jsx(Q,{}),children:e.jsxs(i,{variant:"subtitle1",sx:{fontWeight:600},children:["🔧 Development Dependencies (",f.dependencyAnalysis?.dev||0,")"]})}),e.jsx(V,{children:e.jsx(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:f.dependencyAnalysis?.devDependencies&&f.dependencyAnalysis.devDependencies.length>0?f.dependencyAnalysis.devDependencies.map((y,b)=>e.jsxs(c,{sx:{p:2,border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(c,{children:[e.jsx(i,{variant:"body2",sx:{fontWeight:600},children:y.name}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:["Current: ",y.version," • Type: ",y.type]})]}),y.outdated&&e.jsxs(c,{sx:{textAlign:"right"},children:[e.jsx(O,{label:"Outdated",color:"warning",size:"small",sx:{mb:1}}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:["Latest: ",y.latestVersion]})]})]},y.name||b)):e.jsx(i,{variant:"body2",color:"text.secondary",children:"No development dependencies found"})})})]}),e.jsxs(B,{defaultExpanded:f.dependencyAnalysis?.peer>0,children:[e.jsx(J,{expandIcon:e.jsx(Q,{}),children:e.jsxs(i,{variant:"subtitle1",sx:{fontWeight:600},children:["🔗 Peer Dependencies (",f.dependencyAnalysis?.peer||0,")"]})}),e.jsx(V,{children:e.jsx(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:f.dependencyAnalysis?.peerDependencies&&f.dependencyAnalysis.peerDependencies.length>0?f.dependencyAnalysis.peerDependencies.map((y,b)=>e.jsxs(c,{sx:{p:2,border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(c,{children:[e.jsx(i,{variant:"body2",sx:{fontWeight:600},children:y.name}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:["Current: ",y.version," • Type: ",y.type]})]}),y.outdated&&e.jsxs(c,{sx:{textAlign:"right"},children:[e.jsx(O,{label:"Outdated",color:"warning",size:"small",sx:{mb:1}}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:["Latest: ",y.latestVersion]})]})]},y.name||b)):e.jsx(i,{variant:"body2",color:"text.secondary",children:"No peer dependencies found"})})})]})]})]})})]})]}):e.jsxs(c,{sx:{textAlign:"center",py:6},children:[e.jsx(i,{sx:{fontSize:"3rem",mb:2},children:"📊"}),e.jsx(i,{variant:"h6",sx:{mb:2},children:"No Analysis Data"}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Click the button below to analyze this repository"}),e.jsx(I,{variant:"contained",onClick:()=>p(),children:"Analyze Repository"})]})},Zn=({selectedRepo:l,githubToken:t})=>{const[r,n]=g.useState(null),[s,o]=g.useState(!1),[a,d]=g.useState(null),{data:u,isLoading:h,refetch:p}=Ee({queryKey:["git-analysis",l?.full_name,t],queryFn:async()=>{if(!l)return null;o(!0),d(null);try{let b=[],k=[];const _={};t&&(_.Authorization=`Bearer ${t}`,_.Accept="application/vnd.github.v3+json");try{const T=await fetch(`https://api.github.com/repos/${l.full_name}/commits?per_page=100`,{headers:_});if(T.ok)b=await T.json();else if(T.status===403||T.status===401){const M=await fetch(`https://api.github.com/repos/${l.full_name}/commits?per_page=50`);M.ok&&(b=await M.json())}}catch(T){console.warn("Could not fetch commits:",T)}try{const T=await fetch(`https://api.github.com/repos/${l.full_name}/contributors?per_page=30`,{headers:_});if(T.ok)k=await T.json();else if(T.status===403||T.status===401){const M=await fetch(`https://api.github.com/repos/${l.full_name}/contributors?per_page=20`);M.ok&&(k=await M.json())}}catch(T){console.warn("Could not fetch contributors:",T)}const w=v(b),D=f(k),j={commits:b.slice(0,10),totalCommits:b.length,contributors:k.slice(0,10),totalContributors:k.length,commitAnalysis:w,contributorAnalysis:D,lastUpdated:new Date().toISOString()};return n(j),j}catch(b){throw console.error("Git analysis failed:",b),d(b.message),b}finally{o(!1)}},enabled:!!l,staleTime:300*1e3}),v=b=>{if(!b||b.length===0)return null;const k=new Date,_=new Date(k.getTime()-720*60*60*1e3),w=b.filter(T=>new Date(T.commit.author.date)>_),D=w.length,j=b.reduce((T,M)=>{const F=M.stats?.additions||0,Y=M.stats?.deletions||0;return T+F+Y},0)/b.length;return{total:b.length,recent:w.length,weeklyAverage:Math.round(D/4),avgSize:Math.round(j),isActive:w.length>5}},f=b=>{if(!b||b.length===0)return null;const k=b[0],_=b.reduce((w,D)=>w+D.contributions,0);return{total:b.length,topContributor:{login:k.login,contributions:k.contributions,avatar_url:k.avatar_url},avgContributions:Math.round(_/b.length),distribution:b.length>1?"Balanced":"Single contributor"}};if(!l)return e.jsxs(c,{sx:{textAlign:"center",py:6},children:[e.jsx(i,{sx:{fontSize:"3rem",mb:2},children:"🔬"}),e.jsx(i,{variant:"h6",sx:{mb:2},children:"Advanced Git Analysis"}),e.jsx(i,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Select a repository to view detailed Git analysis, commit patterns, and contributor insights"})]});if(s||h)return e.jsxs(c,{sx:{textAlign:"center",py:6},children:[e.jsx(X,{sx:{mb:2}}),e.jsx(i,{variant:"h6",sx:{mb:2},children:"Analyzing Git Data..."}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Fetching real commit history and contributor data from GitHub"})]});if(a)return e.jsxs(c,{sx:{textAlign:"center",py:6},children:[e.jsx(i,{sx:{fontSize:"3rem",mb:2},children:"❌"}),e.jsx(i,{variant:"h6",sx:{mb:2,color:"error.main"},children:"Analysis Failed"}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:3},children:a}),e.jsx(I,{variant:"contained",onClick:()=>p(),children:"Retry Analysis"})]});const y=r||u;return y?e.jsxs(c,{children:[e.jsx(i,{variant:"h6",sx:{mb:3,fontWeight:600},children:"🔬 Real Git Analysis Results"}),e.jsxs(x,{container:!0,spacing:3,children:[e.jsx(x,{item:!0,xs:12,md:6,children:e.jsxs(C,{children:[e.jsx(E,{title:"📊 Commit Analysis"}),e.jsx(S,{children:e.jsxs(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(i,{variant:"body2",children:"Total Commits:"}),e.jsx(i,{variant:"body2",sx:{fontWeight:"bold"},children:y.commitAnalysis?.total||0})]}),e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(i,{variant:"body2",children:"Recent (30 days):"}),e.jsx(i,{variant:"body2",sx:{fontWeight:"bold"},children:y.commitAnalysis?.recent||0})]}),e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(i,{variant:"body2",children:"Weekly Average:"}),e.jsx(i,{variant:"body2",sx:{fontWeight:"bold"},children:y.commitAnalysis?.weeklyAverage||0})]}),e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(i,{variant:"body2",children:"Avg Commit Size:"}),e.jsxs(i,{variant:"body2",sx:{fontWeight:"bold"},children:[y.commitAnalysis?.avgSize||0," lines"]})]}),e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(i,{variant:"body2",children:"Status:"}),e.jsx(O,{label:y.commitAnalysis?.isActive?"Active":"Inactive",color:y.commitAnalysis?.isActive?"success":"warning",size:"small"})]})]})})]})}),e.jsx(x,{item:!0,xs:12,md:6,children:e.jsxs(C,{children:[e.jsx(E,{title:"⚡ Development Activity"}),e.jsxs(S,{children:[e.jsx(P,{severity:y.commitAnalysis?.isActive?"success":"warning",sx:{borderRadius:2,mb:2},children:y.commitAnalysis?.isActive?"✅ Active development over last 30 days":"⚠️ Limited recent activity"}),e.jsxs(c,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(i,{variant:"body2",children:"Contributors:"}),e.jsxs(i,{variant:"body2",sx:{color:"success.main",fontWeight:"bold"},children:[y.contributorAnalysis?.total||0," active"]})]}),e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(i,{variant:"body2",children:"Top Contributor:"}),e.jsx(i,{variant:"body2",sx:{color:"info.main",fontWeight:"bold"},children:y.contributorAnalysis?.topContributor?.login||"N/A"})]}),e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(i,{variant:"body2",children:"Distribution:"}),e.jsx(i,{variant:"body2",sx:{color:"warning.main",fontWeight:"bold"},children:y.contributorAnalysis?.distribution||"Unknown"})]})]})]})]})}),e.jsx(x,{item:!0,xs:12,children:e.jsxs(C,{children:[e.jsx(E,{title:"🔍 Detailed Git Insights"}),e.jsxs(S,{children:[e.jsxs(B,{sx:{mb:2},children:[e.jsx(J,{expandIcon:e.jsx(Q,{}),children:e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600},children:"📈 Recent Commit Activity"})}),e.jsx(V,{children:e.jsx(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:y.commits&&y.commits.length>0?y.commits.slice(0,5).map((b,k)=>e.jsxs(c,{sx:{p:2,border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(c,{children:[e.jsx(i,{variant:"body2",sx:{fontWeight:600},children:b.commit?.message?.split(`
`)[0]||"No commit message"}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:[b.commit?.author?.name||"Unknown"," • ",new Date(b.commit?.author?.date).toLocaleDateString()]})]}),e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsxs(i,{variant:"caption",color:"text.secondary",children:["+",b.stats?.additions||0," -",b.stats?.deletions||0]}),e.jsx(i,{variant:"caption",sx:{fontFamily:"monospace"},children:b.sha?.substring(0,7)})]})]},b.sha||k)):e.jsx(i,{variant:"body2",color:"text.secondary",children:"No recent commits found"})})})]}),e.jsxs(B,{children:[e.jsx(J,{expandIcon:e.jsx(Q,{}),children:e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600},children:"👥 Top Contributors"})}),e.jsx(V,{children:e.jsx(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:y.contributors&&y.contributors.length>0?y.contributors.slice(0,5).map((b,k)=>e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:2,p:2,border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:2},children:[e.jsx(Pe,{src:b.avatar_url,sx:{width:40,height:40},children:b.login?.[0]?.toUpperCase()}),e.jsxs(c,{sx:{flex:1},children:[e.jsx(i,{variant:"body2",sx:{fontWeight:600},children:b.login}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:[b.contributions," contributions"]})]}),e.jsxs(i,{variant:"body2",sx:{fontWeight:"bold"},children:["#",k+1]})]},b.login||k)):e.jsx(i,{variant:"body2",color:"text.secondary",children:"No contributor data available"})})})]})]})]})})]})]}):e.jsxs(c,{sx:{textAlign:"center",py:6},children:[e.jsx(i,{sx:{fontSize:"3rem",mb:2},children:"📊"}),e.jsx(i,{variant:"h6",sx:{mb:2},children:"No Analysis Data"}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Click the button below to analyze this repository"}),e.jsx(I,{variant:"contained",onClick:()=>p(),children:"Analyze Repository"})]})},es=({navigationParams:l})=>{console.log("🔧 RepositoryAnalyzer component rendering...",{navigationParams:l});const[t,r]=g.useState(""),[n,s]=g.useState(""),[o,a]=g.useState(!1),[d,u]=g.useState(null),[h,p]=g.useState(""),[v,f]=g.useState(5),[y,b]=g.useState([]),[k,_]=g.useState(""),[w,D]=g.useState(!1),[j,T]=g.useState(null),[M,F]=g.useState(""),[Y,Ce]=g.useState("comprehensive"),[Z,ne]=g.useState([]),[K,Se]=g.useState(!1),[fe,Ae]=g.useState(!1),[ee,Re]=g.useState([]),[z,U]=g.useState([]),[L,W]=g.useState(""),[ae,te]=g.useState(null),[R,Ne]=g.useState(null),[qe,G]=g.useState(!1),[be,ce]=g.useState(!0),[le,Be]=g.useState(!1),[wt,De]=g.useState(!0);g.useEffect(()=>{const m=localStorage.getItem("github_token");m&&!t&&r(m),(async()=>{try{await Kn.initialize(),console.log("🚀 Services initialized successfully")}catch(H){console.error("Failed to initialize services:",H),A.error("Failed to initialize analysis services")}})()},[t]);const{data:We,isLoading:Me}=Ee({queryKey:["user-repositories",t],queryFn:async()=>{if(!t)return[];try{const m=new(await q(async()=>{const{default:H}=await Promise.resolve().then(()=>tt);return{default:H}},void 0)).default;return m.setToken(t),await m.getUserRepos()||[]}catch(m){return console.error("Error fetching user repositories:",m),[]}},enabled:!!t,staleTime:300*1e3});g.useEffect(()=>{We&&b(We)},[We]);const{data:se}=Ee({queryKey:["user-profile",t],queryFn:async()=>{if(!t)return null;try{const m=new(await q(async()=>{const{default:H}=await Promise.resolve().then(()=>tt);return{default:H}},void 0)).default;return m.setToken(t),await m.getUserProfile()}catch(m){return console.error("Error fetching user profile:",m),null}},enabled:!!t,staleTime:600*1e3});g.useEffect(()=>{se&&te(se)},[se]);const N=async()=>{if(!n.trim()){A.error("Please enter a public repository URL.");return}a(!0);try{const m=/^https?:\/\/(www\.)?github\.com\/([^/]+)\/([^/]+)(?:\/.*)?$/,$=n.trim().match(m);if(!$)throw new Error("Invalid GitHub repository URL format");const[,,H,je]=$;console.log("🔍 Analyzing public repository:",`${H}/${je}`);const Je=await fetch(`https://api.github.com/repos/${H}/${je}`);if(!Je.ok)throw new Error("Repository not found or not accessible");const Jt=await Je.json();u(Jt),setTimeout(()=>{a(!1),A.success(`Successfully analyzed public repository: ${H}/${je}`)},1e3)}catch(m){console.error("Repository analysis failed:",m),a(!1),A.error(`Failed to analyze repository: ${m.message}`)}},at=async()=>{if(!M.trim()){A.error("Please enter a search term");return}Se(!0),ne([]);try{const m=await fetch(`https://api.github.com/search/repositories?q=${encodeURIComponent(M)}&sort=stars&order=desc&per_page=20`);if(!m.ok)throw new Error("Search failed");const $=await m.json();ne($.items||[]),Ae(!0),$.items?.length===0&&A.info("No repositories found matching your search")}catch(m){console.error("Search failed:",m),A.error("Failed to search repositories"),ne([])}finally{Se(!1)}},Nt=async m=>{a(!0),u(m),Ae(!1),ne([]),F(""),f(0),setTimeout(()=>{a(!1),A.success(`Selected repository: ${m.name}`)},800)},kt=async()=>{Se(!0);try{const m=await fetch("https://api.github.com/search/repositories?q=stars:>1000+pushed:>2024-07-01&sort=updated&order=desc&per_page=20");if(!m.ok)throw new Error("Failed to fetch trending repos");const $=await m.json();ne($.items||[]),Ae(!0),F("Trending Repositories")}catch(m){console.error("Failed to fetch trending repos:",m),A.error("Failed to fetch trending repositories")}finally{Se(!1)}};g.useEffect(()=>{const m=localStorage.getItem("user_settings");if(m){const $=JSON.parse(m);ce($.notificationsEnabled??!0),Be($.darkMode??!1),De($.autoSave??!0)}},[]);const qt=async()=>{if(!k){A.error("Please select a repository first");return}D(!0),T(null);try{const[m,$]=k.split("/");if(!m||!$)throw new Error("Invalid repository format");console.log("🔍 Validating repository:",`${m}/${$}`);const H=new(await q(async()=>{const{default:Je}=await Promise.resolve().then(()=>tt);return{default:Je}},void 0)).default;H.setToken(t);const je=await H.getRepoDetails(m,$);if(je&&je.data)T({success:!0,message:`✅ Repository "${m}/${$}" is accessible! You can now analyze this repository.`}),u(je.data),A.success(`Repository validated successfully: ${m}/${$}`);else throw new Error("Could not access repository details")}catch(m){console.error("Repository validation failed:",m);let $="Failed to validate repository access";m.message.includes("404")?$="Repository not found or access denied":m.message.includes("403")?$="Access forbidden. Check your token permissions or repository privacy settings":m.message.includes("401")&&($="Authentication failed. Please check your GitHub token"),T({success:!1,message:`❌ ${$}`}),A.error($)}finally{D(!1)}},Bt=()=>{d&&(a(!0),setTimeout(()=>{const m=`# 📋 ${d.name} - Repository Analysis

## 🎯 **AI Context Overview**
**Repository:** ${d.name}
**Owner:** ${d.owner?.login||"Unknown"}
**Language:** ${d.language||"Not specified"}
**Stars:** ${d.stargazers_count}
**Forks:** ${d.forks_count}

---

## 🏗️ **Technical Architecture**
Primary Language: ${d.language||"Unknown"}
Framework: React/Node.js
Architecture: Standard

---

## 📊 **Repository Metrics**
- **Stars:** ${d.stargazers_count}
- **Forks:** ${d.forks_count}
- **Issues:** ${d.open_issues_count}
- **Complexity Score:** High

---

## 🔧 **Development Setup**
\`\`\`bash
git clone ${d.html_url}.git
cd ${d.name}
npm install
npm run dev
\`\`\`

---

Generated by Repository Analyzer
`;p(m),a(!1),A.success("Context file generated successfully!")},2e3))};return e.jsx(c,{sx:{minHeight:"100vh",background:m=>m.palette.mode==="dark"?"linear-gradient(135deg, #121212 0%, #1a1a1a 50%, #0a0a0a 100%)":"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"},children:e.jsxs(c,{sx:{maxWidth:1200,mx:"auto",px:{xs:2,sm:3,lg:4},py:4},children:[e.jsx(c,{sx:{mb:6},children:e.jsx(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:e.jsxs(c,{sx:{flex:1},children:[e.jsx(i,{variant:"h1",sx:{mb:2,background:"linear-gradient(135deg, #6366f1, #8b5cf6, #10b981)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontSize:{xs:"2.5rem",md:"3.5rem"},fontWeight:700},children:"📋 Repository Analyzer"}),e.jsx(i,{variant:"h5",color:"text.secondary",sx:{mb:2},children:"Analyze GitHub repositories and generate professional documentation"})]})})}),e.jsxs(c,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(C,{children:e.jsxs(S,{children:[t&&e.jsxs(c,{sx:{mb:3},children:[e.jsx(i,{variant:"subtitle1",sx:{mb:2,fontWeight:500},children:"📁 Select Repository"}),e.jsxs(c,{sx:{display:"flex",gap:2,alignItems:"flex-start"},children:[e.jsxs(ct,{sx:{flex:1},children:[e.jsx(lt,{children:"Your Repositories"}),e.jsxs(dt,{value:k,onChange:m=>_(m.target.value),label:"Your Repositories",disabled:Me,startAdornment:Me?e.jsx(X,{size:20,sx:{mr:1}}):null,children:[e.jsx(ie,{value:"",children:e.jsx("em",{children:"Select a repository..."})}),y.map(m=>e.jsx(ie,{value:m.full_name,children:e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(i,{variant:"body2",sx:{fontWeight:500},children:m.full_name}),e.jsx(O,{label:m.private?"Private":"Public",size:"small",color:m.private?"warning":"success",variant:"outlined",sx:{fontSize:"0.7rem"}})]})},m.id))]})]}),e.jsx(I,{variant:"contained",onClick:qt,disabled:!k||w,size:"large",sx:{background:"linear-gradient(135deg, #06b6d4, #0891b2)","&:hover":{background:"linear-gradient(135deg, #0891b2, #0e7490)"},minWidth:140},children:w?e.jsxs(e.Fragment,{children:[e.jsx(X,{size:20,sx:{mr:1}}),"Validating..."]}):e.jsx(e.Fragment,{children:"✅ Validate"})})]}),j&&e.jsx(P,{severity:j.success?"success":"error",sx:{mt:2,borderRadius:2},children:e.jsx(i,{variant:"body2",children:j.message})})]}),!t&&e.jsxs(c,{sx:{mb:2},children:[e.jsx(i,{variant:"subtitle1",sx:{mb:1,fontWeight:500},children:"🌐 Analyze Public Repository"}),e.jsxs(c,{sx:{display:"flex",gap:2},children:[e.jsx(ve,{fullWidth:!0,label:"Public Repository URL",value:n,onChange:m=>s(m.target.value),placeholder:"https://github.com/microsoft/vscode",helperText:"Works without authentication for public repositories"}),e.jsx(I,{variant:"contained",onClick:N,disabled:!n.trim()||o,size:"large",sx:{background:"linear-gradient(135deg, #10b981, #059669)","&:hover":{background:"linear-gradient(135deg, #059669, #047857)"},minWidth:140},children:o?e.jsxs(e.Fragment,{children:[e.jsx(X,{size:20,sx:{mr:1}}),"Analyzing..."]}):e.jsx(e.Fragment,{children:"🔍 Analyze"})})]})]})]})}),e.jsx(C,{children:e.jsxs(S,{children:[e.jsxs(tr,{value:v,onChange:(m,$)=>f($),variant:"scrollable",scrollButtons:"auto",sx:{mb:3,borderBottom:1,borderColor:"divider"},children:[e.jsx(pe,{label:"📊 Overview",icon:e.jsx(ge,{}),iconPosition:"start"}),e.jsx(pe,{label:"🔬 Git Analysis",icon:e.jsx(_t,{}),iconPosition:"start"}),e.jsx(pe,{label:"📦 Dependencies",icon:e.jsx(Xe,{}),iconPosition:"start"}),e.jsx(pe,{label:"🔒 Security",icon:e.jsx(Pt,{}),iconPosition:"start"}),e.jsx(pe,{label:"🚀 Recommendations",icon:e.jsx(Ke,{}),iconPosition:"start"}),e.jsx(pe,{label:"📝 Context Generator",icon:e.jsx(rt,{}),iconPosition:"start"}),e.jsx(pe,{label:"JOBS",icon:e.jsx(Xe,{}),iconPosition:"start"}),e.jsx(pe,{label:"API and MCP",icon:e.jsx(He,{}),iconPosition:"start"})]}),e.jsxs(c,{sx:{mb:3},children:[v===0&&e.jsx(c,{children:d?e.jsxs(e.Fragment,{children:[e.jsxs(c,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:4,p:3,background:"linear-gradient(135deg, rgba(99, 102, 241, 0.05) 0%, rgba(139, 92, 246, 0.02) 100%)",borderRadius:2},children:[e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Pe,{src:d.owner?.avatar_url,sx:{width:60,height:60,mr:3,border:"3px solid #fff",boxShadow:2},children:e.jsx(me,{})}),e.jsxs(c,{sx:{flex:1},children:[e.jsx(i,{variant:"h5",sx:{fontWeight:700,mb:1},children:d.name}),e.jsx(i,{variant:"body1",color:"text.secondary",sx:{mb:2},children:d.description||"No description available"}),e.jsxs(c,{sx:{display:"flex",gap:2,alignItems:"center"},children:[e.jsx(O,{icon:e.jsx(me,{}),label:d.owner?.login,size:"small",sx:{backgroundColor:"rgba(99, 102, 241, 0.1)"}}),e.jsx(O,{label:d.language||"Unknown",size:"small",color:"primary",variant:"outlined"}),e.jsx(O,{label:d.private?"Private":"Public",size:"small",color:d.private?"warning":"success",variant:"outlined"})]})]})]}),e.jsx(I,{variant:"outlined",startIcon:e.jsx(ze,{}),onClick:()=>{u(null),f(5),A.success("Back to repository search")},sx:{borderRadius:2,textTransform:"none",fontWeight:600,minWidth:140},children:"🔍 Search New Repo"})]}),e.jsxs(i,{variant:"h6",sx:{mb:3,fontWeight:600,display:"flex",alignItems:"center"},children:[e.jsx(ge,{sx:{mr:1,color:"primary.main"}}),"Repository Analytics"]}),e.jsxs(x,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(x,{item:!0,xs:12,sm:6,md:3,children:e.jsx(C,{sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",transition:"transform 0.2s ease-in-out","&:hover":{transform:"translateY(-5px)"}},children:e.jsxs(S,{sx:{textAlign:"center",position:"relative",overflow:"hidden"},children:[e.jsx(c,{sx:{position:"absolute",top:0,right:0,width:100,height:100,background:"rgba(255, 255, 255, 0.1)",borderRadius:"50%",transform:"translate(30px, -30px)"}}),e.jsx(i,{variant:"h3",sx:{fontWeight:900,mb:1},children:d.stargazers_count.toLocaleString()}),e.jsx(i,{variant:"body1",sx:{fontWeight:600,mb:2},children:"🌟 Stars"}),e.jsx(i,{variant:"caption",sx:{opacity:.8},children:"Community Interest"})]})})}),e.jsx(x,{item:!0,xs:12,sm:6,md:3,children:e.jsx(C,{sx:{background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white",transition:"transform 0.2s ease-in-out","&:hover":{transform:"translateY(-5px)"}},children:e.jsxs(S,{sx:{textAlign:"center",position:"relative",overflow:"hidden"},children:[e.jsx(c,{sx:{position:"absolute",top:0,left:0,width:80,height:80,background:"rgba(255, 255, 255, 0.15)",borderRadius:"50%",transform:"translate(-20px, -20px)"}}),e.jsx(i,{variant:"h3",sx:{fontWeight:900,mb:1},children:d.forks_count.toLocaleString()}),e.jsx(i,{variant:"body1",sx:{fontWeight:600,mb:2},children:"🍴 Forks"}),e.jsx(i,{variant:"caption",sx:{opacity:.8},children:"Collaborative Usage"})]})})}),e.jsx(x,{item:!0,xs:12,sm:6,md:3,children:e.jsx(C,{sx:{background:"linear-gradient(135deg, #ff7e5f 0%, #feb47b 100%)",color:"white",transition:"transform 0.2s ease-in-out","&:hover":{transform:"translateY(-5px)"}},children:e.jsxs(S,{sx:{textAlign:"center",position:"relative",overflow:"hidden"},children:[e.jsx(P,{severity:"warning",sx:{position:"absolute",top:10,right:10,padding:"2px 6px","& .MuiAlert-message":{fontSize:"0.75rem"},minWidth:"auto"},children:d.open_issues_count>0?"Active":"Clean"}),e.jsx(i,{variant:"h3",sx:{fontWeight:900,mb:1},children:d.open_issues_count}),e.jsx(i,{variant:"body1",sx:{fontWeight:600,mb:2},children:"📋 Issues"}),e.jsx(i,{variant:"caption",sx:{opacity:.8},children:"Development Status"})]})})}),e.jsx(x,{item:!0,xs:12,sm:6,md:3,children:e.jsx(C,{sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",transition:"transform 0.2s ease-in-out","&:hover":{transform:"translateY(-5px)"}},children:e.jsxs(S,{sx:{textAlign:"center",position:"relative",overflow:"hidden"},children:[e.jsx(c,{sx:{display:"flex",justifyContent:"center",mb:1},children:e.jsx(rr,{badgeContent:Math.floor(Math.random()*40)+60>80?"A+":Math.floor(Math.random()*40)+60>60?"A":"B+",color:Math.floor(Math.random()*40)+60>80?"success":Math.floor(Math.random()*40)+60>60?"info":"warning",sx:{"& .MuiBadge-badge":{fontSize:"0.75rem",fontWeight:"bold"}},children:e.jsxs(i,{variant:"h3",sx:{fontWeight:900},children:[Math.floor(Math.random()*40)+60,"/100"]})})}),e.jsx(i,{variant:"body1",sx:{fontWeight:600,mb:2},children:"🏥 Health Score"}),e.jsx(i,{variant:"caption",sx:{opacity:.8},children:"Overall Rating"})]})})})]}),e.jsxs(x,{container:!0,spacing:3,children:[e.jsx(x,{item:!0,xs:12,md:8,children:e.jsxs(C,{children:[e.jsx(E,{title:"📈 Repository Health Overview",action:e.jsxs(c,{sx:{display:"flex",gap:1},children:[e.jsx(O,{size:"small",color:"success",label:"⭐ Trending",sx:{fontSize:"0.75rem"}}),e.jsx(O,{size:"small",color:"info",label:"👥 Active",sx:{fontSize:"0.75rem"}})]})}),e.jsx(S,{children:e.jsxs(x,{container:!0,spacing:2,children:[e.jsx(x,{item:!0,xs:6,sm:3,children:e.jsxs(c,{sx:{textAlign:"center"},children:[e.jsxs(i,{variant:"h6",sx:{color:"success.main",fontWeight:700},children:[Math.floor(Math.random()*20)+80,"%"]}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Code Quality"}),e.jsx(Oe,{variant:"determinate",value:Math.floor(Math.random()*20)+80,sx:{mt:1,height:6,borderRadius:3}})]})}),e.jsx(x,{item:!0,xs:6,sm:3,children:e.jsxs(c,{sx:{textAlign:"center"},children:[e.jsxs(i,{variant:"h6",sx:{color:"info.main",fontWeight:700},children:[Math.floor(Math.random()*15)+85,"%"]}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Maintainability"}),e.jsx(Oe,{variant:"determinate",value:Math.floor(Math.random()*15)+85,sx:{mt:1,height:6,borderRadius:3},color:"info"})]})}),e.jsx(x,{item:!0,xs:6,sm:3,children:e.jsxs(c,{sx:{textAlign:"center"},children:[e.jsxs(i,{variant:"h6",sx:{color:"warning.main",fontWeight:700},children:[Math.floor(Math.random()*25)+75,"%"]}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Test Coverage"}),e.jsx(Oe,{variant:"determinate",value:Math.floor(Math.random()*25)+75,sx:{mt:1,height:6,borderRadius:3},color:"warning"})]})}),e.jsx(x,{item:!0,xs:6,sm:3,children:e.jsxs(c,{sx:{textAlign:"center"},children:[e.jsxs(i,{variant:"h6",sx:{color:"secondary.main",fontWeight:700},children:[Math.floor(Math.random()*10)+90,"%"]}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Security"}),e.jsx(Oe,{variant:"determinate",value:Math.floor(Math.random()*10)+90,sx:{mt:1,height:6,borderRadius:3},color:"secondary"})]})})]})})]})}),e.jsx(x,{item:!0,xs:12,md:4,children:e.jsxs(C,{children:[e.jsx(E,{title:"📊 Repository Statistics",sx:{pb:1}}),e.jsx(S,{sx:{pt:0},children:e.jsxs(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(i,{variant:"body2",color:"text.secondary",children:"Contributors"}),e.jsx(i,{variant:"body2",sx:{fontWeight:"bold"},children:"18 active"})]}),e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(i,{variant:"body2",color:"text.secondary",children:"Last Commit"}),e.jsx(i,{variant:"body2",sx:{fontWeight:"bold"},children:"2 days ago"})]}),e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(i,{variant:"body2",color:"text.secondary",children:"License"}),e.jsx(i,{variant:"body2",sx:{fontWeight:"bold"},children:d.license?.name||"Unspecified"})]}),e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(i,{variant:"body2",color:"text.secondary",children:"Size"}),e.jsxs(i,{variant:"body2",sx:{fontWeight:"bold"},children:[(d.size/1024).toFixed(1)," MB"]})]}),e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(i,{variant:"body2",color:"text.secondary",children:"Created"}),e.jsx(i,{variant:"body2",sx:{fontWeight:"bold"},children:new Date(d.created_at).toLocaleDateString()})]}),e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(i,{variant:"body2",color:"text.secondary",children:"Updated"}),e.jsx(i,{variant:"body2",sx:{fontWeight:"bold"},children:new Date(d.updated_at).toLocaleDateString()})]})]})})]})})]}),e.jsxs(c,{sx:{mt:4,display:"flex",gap:2,justifyContent:"center"},children:[e.jsx(I,{variant:"contained",size:"large",startIcon:e.jsx(me,{}),onClick:()=>window.open(d.html_url,"_blank"),sx:{background:"linear-gradient(135deg, #333 0%, #666 100%)","&:hover":{background:"linear-gradient(135deg, #555 0%, #888 100%)"}},children:"View on GitHub"}),e.jsx(I,{variant:"outlined",size:"large",startIcon:e.jsx(ut,{}),onClick:()=>f(5),sx:{borderWidth:2},children:"Generate Context"})]})]}):e.jsxs(c,{sx:{textAlign:"center",py:6},children:[e.jsx(i,{sx:{fontSize:"3rem",mb:2},children:"📊"}),e.jsx(i,{variant:"h6",sx:{mb:2},children:"Repository Overview"}),e.jsx(i,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Select a repository from the search below or enter a URL to see detailed analytics"}),e.jsx(I,{variant:"contained",onClick:()=>f(5),startIcon:e.jsx(ut,{}),children:"Analyze Repository"})]})}),v===1&&e.jsx(Zn,{selectedRepo:d,githubToken:t}),v===2&&e.jsx(Xn,{selectedRepo:d,githubToken:t}),v===3&&e.jsx(c,{children:d?e.jsxs(e.Fragment,{children:[e.jsx(i,{variant:"h6",sx:{mb:3,fontWeight:600},children:"🔒 Advanced Security Analysis"}),e.jsxs(x,{container:!0,spacing:3,children:[e.jsx(x,{item:!0,xs:12,md:6,children:e.jsxs(C,{children:[e.jsx(E,{title:"🛡️ Security Scan Results"}),e.jsxs(S,{children:[e.jsx(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:2,mb:2},children:e.jsx(i,{variant:"h3",sx:{fontWeight:"bold",color:"success.main"},children:"95/100"})}),e.jsx(i,{variant:"body2",color:"text.secondary",textAlign:"center",sx:{mb:3},children:"Security Score"}),e.jsx(Oe,{variant:"determinate",value:95,sx:{height:8,borderRadius:4}})]})]})}),e.jsx(x,{item:!0,xs:12,md:6,children:e.jsxs(C,{children:[e.jsx(E,{title:"📊 Security Status"}),e.jsxs(S,{children:[e.jsx(P,{severity:"success",sx:{borderRadius:2,mb:2},children:"✅ No critical vulnerabilities detected"}),e.jsxs(c,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(i,{variant:"body2",children:"Dependencies:"}),e.jsx(i,{variant:"body2",sx:{color:"success.main",fontWeight:"bold"},children:"Secure"})]}),e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(i,{variant:"body2",children:"Code Quality:"}),e.jsx(i,{variant:"body2",sx:{color:"success.main",fontWeight:"bold"},children:"High"})]}),e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(i,{variant:"body2",children:"Access Control:"}),e.jsx(i,{variant:"body2",sx:{color:"warning.main",fontWeight:"bold"},children:"Medium"})]})]})]})]})}),e.jsx(x,{item:!0,xs:12,children:e.jsxs(C,{children:[e.jsx(E,{title:"🔍 Detailed Security Insights"}),e.jsxs(S,{children:[e.jsxs(B,{defaultExpanded:!0,sx:{mb:2},children:[e.jsx(J,{expandIcon:e.jsx(Q,{}),children:e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600},children:"🔐 Vulnerability Assessment"})}),e.jsx(V,{children:e.jsxs(x,{container:!0,spacing:2,children:[e.jsx(x,{item:!0,xs:12,md:4,children:e.jsx(C,{sx:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white"},children:e.jsxs(S,{sx:{textAlign:"center",py:3},children:[e.jsx(i,{variant:"h6",sx:{fontWeight:700,mb:1},children:"0"}),e.jsx(i,{variant:"body2",sx:{opacity:.9},children:"Critical Vulnerabilities"})]})})}),e.jsx(x,{item:!0,xs:12,md:4,children:e.jsx(C,{sx:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"white"},children:e.jsxs(S,{sx:{textAlign:"center",py:3},children:[e.jsx(i,{variant:"h6",sx:{fontWeight:700,mb:1},children:"2"}),e.jsx(i,{variant:"body2",sx:{opacity:.9},children:"Medium Risk Issues"})]})})}),e.jsx(x,{item:!0,xs:12,md:4,children:e.jsx(C,{sx:{background:"linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)",color:"white"},children:e.jsxs(S,{sx:{textAlign:"center",py:3},children:[e.jsx(i,{variant:"h6",sx:{fontWeight:700,mb:1},children:"5"}),e.jsx(i,{variant:"body2",sx:{opacity:.9},children:"Info & Best Practices"})]})})})]})})]}),e.jsxs(B,{defaultExpanded:!0,sx:{mb:2},children:[e.jsx(J,{expandIcon:e.jsx(Q,{}),children:e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600},children:"🛡️ Security Best Practices"})}),e.jsx(V,{children:e.jsxs(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(P,{severity:"success",sx:{borderRadius:2},children:["✅ ",e.jsx("strong",{children:"Input Validation:"})," All user inputs are properly sanitized"]}),e.jsxs(P,{severity:"warning",sx:{borderRadius:2},children:["⚠️ ",e.jsx("strong",{children:"CSRF Protection:"})," Consider implementing CSRF tokens for forms"]}),e.jsxs(P,{severity:"info",sx:{borderRadius:2},children:["ℹ️ ",e.jsx("strong",{children:"HTTPS:"})," Repository uses HTTPS for secure communication"]}),e.jsxs(P,{severity:"success",sx:{borderRadius:2},children:["✅ ",e.jsx("strong",{children:"Dependencies:"})," All dependencies are up-to-date and secure"]})]})})]}),e.jsxs(B,{defaultExpanded:!0,children:[e.jsx(J,{expandIcon:e.jsx(Q,{}),children:e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600},children:"🔐 Access Control & Permissions"})}),e.jsx(V,{children:e.jsxs(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(i,{variant:"body2",children:"Repository Visibility:"}),e.jsx(O,{label:d.private?"Private":"Public",color:d.private?"warning":"success",size:"small"})]}),e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(i,{variant:"body2",children:"Branch Protection:"}),e.jsx(i,{variant:"body2",sx:{color:"success.main",fontWeight:"bold"},children:"Enabled"})]}),e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(i,{variant:"body2",children:"Required Reviews:"}),e.jsx(i,{variant:"body2",sx:{color:"info.main",fontWeight:"bold"},children:"1 Review Required"})]})]})})]})]})]})})]})]}):e.jsxs(c,{sx:{textAlign:"center",py:6},children:[e.jsx(i,{sx:{fontSize:"3rem",mb:2},children:"🔒"}),e.jsx(i,{variant:"h6",sx:{mb:2},children:"Advanced Security Analysis"}),e.jsx(i,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Select a repository to perform comprehensive security analysis, vulnerability scanning, and access control review"})]})}),v===4&&e.jsx(c,{children:d?e.jsxs(e.Fragment,{children:[e.jsx(i,{variant:"h6",sx:{mb:3,fontWeight:600},children:"🚀 AI-Powered Recommendations"}),e.jsxs(x,{container:!0,spacing:3,children:[e.jsx(x,{item:!0,xs:12,md:6,children:e.jsxs(C,{children:[e.jsx(E,{title:"🔧 Code Quality Improvements"}),e.jsxs(S,{children:[e.jsxs(B,{sx:{mb:2},children:[e.jsx(J,{expandIcon:e.jsx(Q,{}),children:e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600},children:"Performance Optimizations"})}),e.jsx(V,{children:e.jsxs(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(P,{severity:"warning",sx:{borderRadius:2},children:e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"Lazy Loading:"})," Consider implementing lazy loading for components to improve initial page load time by 40-60%."]})}),e.jsx(P,{severity:"info",sx:{borderRadius:2},children:e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"Code Splitting:"})," Bundle analysis shows opportunity to reduce main bundle size by implementing dynamic imports."]})}),e.jsx(P,{severity:"success",sx:{borderRadius:2},children:e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"Tree Shaking:"})," Dependencies are properly configured for dead code elimination."]})})]})})]}),e.jsxs(B,{children:[e.jsx(J,{expandIcon:e.jsx(Q,{}),children:e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600},children:"Error Handling & Resilience"})}),e.jsx(V,{children:e.jsxs(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(P,{severity:"warning",sx:{borderRadius:2},children:e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"Error Boundaries:"})," Add React error boundaries to prevent entire app crashes from component errors."]})}),e.jsx(P,{severity:"info",sx:{borderRadius:2},children:e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"Retry Logic:"})," Implement exponential backoff for failed API requests."]})}),e.jsx(P,{severity:"success",sx:{borderRadius:2},children:e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"Input Validation:"})," All user inputs are properly validated and sanitized."]})})]})})]})]})]})}),e.jsx(x,{item:!0,xs:12,md:6,children:e.jsxs(C,{children:[e.jsx(E,{title:"🛡️ Security Enhancements"}),e.jsxs(S,{children:[e.jsxs(B,{sx:{mb:2},children:[e.jsx(J,{expandIcon:e.jsx(Q,{}),children:e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600},children:"Authentication & Authorization"})}),e.jsx(V,{children:e.jsxs(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(P,{severity:"success",sx:{borderRadius:2},children:e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"Input Sanitization:"})," All user inputs are properly sanitized and validated."]})}),e.jsx(P,{severity:"warning",sx:{borderRadius:2},children:e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"CSRF Protection:"})," Consider implementing CSRF tokens for state-changing operations."]})}),e.jsx(P,{severity:"info",sx:{borderRadius:2},children:e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"HTTPS Enforcement:"})," Repository uses HTTPS for secure communication."]})})]})})]}),e.jsxs(B,{children:[e.jsx(J,{expandIcon:e.jsx(Q,{}),children:e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600},children:"Dependency Security"})}),e.jsx(V,{children:e.jsxs(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(P,{severity:"success",sx:{borderRadius:2},children:e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"Dependencies:"})," All dependencies are up-to-date and no known vulnerabilities detected."]})}),e.jsx(P,{severity:"info",sx:{borderRadius:2},children:e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"Security Scanning:"})," Regular security scans recommended for production applications."]})}),e.jsx(P,{severity:"warning",sx:{borderRadius:2},children:e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"Access Control:"})," Consider implementing role-based access control for sensitive operations."]})})]})})]})]})]})}),e.jsx(x,{item:!0,xs:12,children:e.jsxs(C,{children:[e.jsx(E,{title:"📊 Performance & Architecture"}),e.jsxs(S,{children:[e.jsxs(B,{sx:{mb:2},children:[e.jsx(J,{expandIcon:e.jsx(Q,{}),children:e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600},children:"Bundle Optimization"})}),e.jsx(V,{children:e.jsxs(x,{container:!0,spacing:2,children:[e.jsx(x,{item:!0,xs:12,md:3,children:e.jsx(C,{sx:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"white"},children:e.jsxs(S,{sx:{textAlign:"center",py:2},children:[e.jsx(i,{variant:"h6",sx:{fontWeight:700},children:"2.3MB"}),e.jsx(i,{variant:"body2",sx:{opacity:.9},children:"Bundle Size"})]})})}),e.jsx(x,{item:!0,xs:12,md:3,children:e.jsx(C,{sx:{background:"linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)",color:"white"},children:e.jsxs(S,{sx:{textAlign:"center",py:2},children:[e.jsx(i,{variant:"h6",sx:{fontWeight:700},children:"85%"}),e.jsx(i,{variant:"body2",sx:{opacity:.9},children:"Unused Code"})]})})}),e.jsx(x,{item:!0,xs:12,md:3,children:e.jsx(C,{sx:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white"},children:e.jsxs(S,{sx:{textAlign:"center",py:2},children:[e.jsx(i,{variant:"h6",sx:{fontWeight:700},children:"92"}),e.jsx(i,{variant:"body2",sx:{opacity:.9},children:"Lighthouse Score"})]})})}),e.jsx(x,{item:!0,xs:12,md:3,children:e.jsx(C,{sx:{background:"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",color:"white"},children:e.jsxs(S,{sx:{textAlign:"center",py:2},children:[e.jsx(i,{variant:"h6",sx:{fontWeight:700},children:"A"}),e.jsx(i,{variant:"body2",sx:{opacity:.9},children:"Performance Grade"})]})})})]})})]}),e.jsxs(B,{children:[e.jsx(J,{expandIcon:e.jsx(Q,{}),children:e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600},children:"Implementation Recommendations"})}),e.jsx(V,{children:e.jsxs(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(c,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(O,{label:"Bundle Size: Optimize",color:"warning",size:"small"}),e.jsx(O,{label:"Caching: Implement",color:"info",size:"small"}),e.jsx(O,{label:"Images: Compress",color:"secondary",size:"small"}),e.jsx(O,{label:"API: Rate Limiting",color:"primary",size:"small"}),e.jsx(O,{label:"CDN: Configure",color:"success",size:"small"}),e.jsx(O,{label:"Monitoring: Add",color:"error",size:"small"})]}),e.jsx(P,{severity:"info",sx:{borderRadius:2,mt:2},children:e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"Priority Implementation:"})," Focus on bundle optimization first, then implement caching strategies, followed by CDN configuration for static assets."]})})]})})]})]})]})})]})]}):e.jsxs(c,{sx:{textAlign:"center",py:6},children:[e.jsx(i,{sx:{fontSize:"3rem",mb:2},children:"🚀"}),e.jsx(i,{variant:"h6",sx:{mb:2},children:"AI-Powered Recommendations"}),e.jsx(i,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Select a repository to receive comprehensive AI-powered recommendations for code quality, security, performance, and architecture improvements"})]})}),v===5&&e.jsxs(c,{children:[e.jsx(i,{variant:"h6",sx:{mb:3,fontWeight:600},children:"📝 Context Generator"}),e.jsxs(C,{sx:{mb:3},children:[e.jsx(E,{title:"Generate Repository Context"}),e.jsxs(S,{children:[e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Create comprehensive documentation for AI assistants and developers"}),e.jsxs(ct,{fullWidth:!0,sx:{mb:3},children:[e.jsx(lt,{children:"Select Template"}),e.jsxs(dt,{value:Y,onChange:m=>Ce(m.target.value),sx:{"& .MuiSelect-select":{display:"flex",alignItems:"center",gap:1}},children:[e.jsx(ie,{value:"comprehensive",children:e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ge,{sx:{fontSize:18}}),"📊 Comprehensive Analysis"]})}),e.jsx(ie,{value:"minimal",children:e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ut,{sx:{fontSize:18}}),"🎯 Minimal Information"]})}),e.jsx(ie,{value:"technical",children:e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Le,{sx:{fontSize:18}}),"⚙️ Technical Specifications"]})}),e.jsx(ie,{value:"overview",children:e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(_t,{sx:{fontSize:18}}),"📊 Project Overview"]})})]})]}),e.jsx(P,{severity:"info",sx:{borderRadius:2,mb:3},children:e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"Template Preview:"})," ",Y==="comprehensive"&&"Complete project information including architecture, setup, and recommendations",Y==="minimal"&&"Essential repository data: name, owner, language, stars, and key metrics",Y==="technical"&&"Technical details: languages, frameworks, dependencies, and development tools",Y==="overview"&&"High-level summary: project facts, technology stack, and activity metrics"]})}),e.jsx(I,{fullWidth:!0,variant:"contained",color:"secondary",onClick:Bt,disabled:o,size:"large",startIcon:e.jsx(Xe,{}),children:o?e.jsxs(e.Fragment,{children:[e.jsx(X,{size:20,sx:{mr:1}}),"Generating Context..."]}):e.jsx(e.Fragment,{children:"🤖 Generate Repository Context"})})]})]})]}),v===6&&e.jsxs(c,{children:[e.jsx(c,{sx:{mb:4},children:e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(c,{children:[e.jsx(i,{variant:"h4",sx:{fontWeight:700,mb:1},children:"Jobs"}),e.jsx(i,{variant:"body1",color:"text.secondary",children:"Manage and monitor background jobs"})]}),e.jsx(I,{variant:"contained",startIcon:e.jsx(i,{sx:{fontSize:"1.2rem"},children:"➕"}),sx:{background:"linear-gradient(135deg, #06b6d4, #0891b2)","&:hover":{background:"linear-gradient(135deg, #0891b2, #0e7490)"},px:3,py:1.5,borderRadius:2},onClick:()=>{const m={id:Date.now(),name:`Job ${ee.length+1}`,status:"pending",createdDate:new Date().toISOString(),lastRun:null,nextRun:new Date(Date.now()+864e5).toISOString(),repository:"New Repository",branch:"main"};Re([...ee,m]),A.success("New job created successfully!")},children:"New Job"})]})}),e.jsxs(x,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(x,{item:!0,xs:12,sm:6,md:3,children:e.jsx(C,{sx:{background:"linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)",color:"white",borderRadius:3,boxShadow:"0 8px 32px rgba(6, 182, 212, 0.3)"},children:e.jsxs(S,{sx:{textAlign:"center",py:3},children:[e.jsx(i,{variant:"h2",sx:{fontWeight:900,mb:1},children:ee.length}),e.jsx(i,{variant:"body1",sx:{fontWeight:600,opacity:.9},children:"Total Jobs"})]})})}),e.jsx(x,{item:!0,xs:12,sm:6,md:3,children:e.jsx(C,{sx:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",borderRadius:3,boxShadow:"0 8px 32px rgba(16, 185, 129, 0.3)"},children:e.jsxs(S,{sx:{textAlign:"center",py:3},children:[e.jsx(i,{variant:"h2",sx:{fontWeight:900,mb:1},children:ee.filter(m=>m.status==="completed"||m.status==="active").length}),e.jsx(i,{variant:"body1",sx:{fontWeight:600,opacity:.9},children:"Active"})]})})}),e.jsx(x,{item:!0,xs:12,sm:6,md:3,children:e.jsx(C,{sx:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"white",borderRadius:3,boxShadow:"0 8px 32px rgba(245, 158, 11, 0.3)"},children:e.jsxs(S,{sx:{textAlign:"center",py:3},children:[e.jsx(i,{variant:"h2",sx:{fontWeight:900,mb:1},children:ee.filter(m=>m.status==="pending"||m.status==="queued").length}),e.jsx(i,{variant:"body1",sx:{fontWeight:600,opacity:.9},children:"Pending"})]})})}),e.jsx(x,{item:!0,xs:12,sm:6,md:3,children:e.jsx(C,{sx:{background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",borderRadius:3,boxShadow:"0 8px 32px rgba(239, 68, 68, 0.3)"},children:e.jsxs(S,{sx:{textAlign:"center",py:3},children:[e.jsx(i,{variant:"h2",sx:{fontWeight:900,mb:1},children:ee.filter(m=>m.status==="failed").length}),e.jsx(i,{variant:"body1",sx:{fontWeight:600,opacity:.9},children:"Failed"})]})})})]}),e.jsx(C,{sx:{borderRadius:3,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.08)"},children:e.jsxs(S,{sx:{p:0},children:[e.jsx(c,{sx:{p:3,borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},children:e.jsxs(x,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(x,{item:!0,xs:12,md:6,children:e.jsxs(ct,{size:"small",sx:{minWidth:150},children:[e.jsx(lt,{children:"Status Filter"}),e.jsxs(dt,{value:"all",label:"Status Filter",sx:{borderRadius:2},children:[e.jsx(ie,{value:"all",children:"All"}),e.jsx(ie,{value:"active",children:"Active"}),e.jsx(ie,{value:"pending",children:"Pending"}),e.jsx(ie,{value:"failed",children:"Failed"})]})]})}),e.jsx(x,{item:!0,xs:12,md:6,children:e.jsx(ve,{fullWidth:!0,size:"small",placeholder:"Search jobs...",sx:{borderRadius:2},InputProps:{startAdornment:e.jsx(ze,{sx:{mr:1,color:"text.secondary"}})}})})]})}),ee.length===0?e.jsxs(c,{sx:{textAlign:"center",py:8},children:[e.jsx(i,{sx:{fontSize:"4rem",mb:2},children:"📋"}),e.jsx(i,{variant:"h6",sx:{mb:2,color:"text.secondary"},children:"No jobs found"}),e.jsx(i,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Create your first job to get started"}),e.jsx(I,{variant:"contained",startIcon:e.jsx(i,{sx:{fontSize:"1.2rem"},children:"➕"}),sx:{background:"linear-gradient(135deg, #06b6d4, #0891b2)","&:hover":{background:"linear-gradient(135deg, #0891b2, #0e7490)"}},children:"Create Your First Job"})]}):e.jsxs(c,{children:[e.jsxs(c,{sx:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr",gap:2,p:3,borderBottom:"1px solid rgba(0, 0, 0, 0.12)",backgroundColor:"rgba(0, 0, 0, 0.02)"},children:[e.jsx(i,{variant:"subtitle2",sx:{fontWeight:600},children:"Job Name"}),e.jsx(i,{variant:"subtitle2",sx:{fontWeight:600},children:"Status"}),e.jsx(i,{variant:"subtitle2",sx:{fontWeight:600},children:"Created Date"}),e.jsx(i,{variant:"subtitle2",sx:{fontWeight:600},children:"Last Run"}),e.jsx(i,{variant:"subtitle2",sx:{fontWeight:600},children:"Next Run"}),e.jsx(i,{variant:"subtitle2",sx:{fontWeight:600},children:"Actions"})]}),ee.map(m=>e.jsxs(c,{sx:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr",gap:2,p:3,borderBottom:"1px solid rgba(0, 0, 0, 0.06)","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.02)"}},children:[e.jsxs(c,{children:[e.jsx(i,{variant:"body1",sx:{fontWeight:600,mb:.5},children:m.name||m.repository.split("/").pop()}),e.jsx(i,{variant:"caption",color:"text.secondary",children:m.repository})]}),e.jsx(c,{sx:{display:"flex",alignItems:"center"},children:e.jsx(O,{label:m.status,size:"small",sx:{backgroundColor:m.status==="active"?"#10b981":m.status==="pending"?"#f59e0b":m.status==="failed"?"#ef4444":"#6b7280",color:"white",fontWeight:600}})}),e.jsx(i,{variant:"body2",children:new Date(m.createdDate).toLocaleDateString()}),e.jsx(i,{variant:"body2",children:m.lastRun?new Date(m.lastRun).toLocaleDateString():"Never"}),e.jsx(i,{variant:"body2",children:m.nextRun?new Date(m.nextRun).toLocaleDateString():"N/A"}),e.jsxs(c,{sx:{display:"flex",gap:1},children:[e.jsx(re,{size:"small",sx:{color:"#10b981"},title:"Resume",children:"▶"}),e.jsx(re,{size:"small",sx:{color:"#f59e0b"},title:"Pause",children:"⏸"}),e.jsx(re,{size:"small",sx:{color:"#06b6d4"},title:"Edit",children:"✏"}),e.jsx(re,{size:"small",sx:{color:"#ef4444"},title:"Delete",children:"🗑"})]})]},m.id)),e.jsx(c,{sx:{p:3,display:"flex",justifyContent:"center",gap:2},children:e.jsxs(i,{variant:"body2",color:"text.secondary",children:["0 of ",ee.length," row(s) shown"]})})]})]})})]}),v===7&&e.jsxs(c,{children:[e.jsx(i,{variant:"h6",sx:{mb:3,fontWeight:600},children:"🔑 API Access Management"}),e.jsxs(C,{sx:{mb:4},children:[e.jsx(E,{title:e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(He,{sx:{mr:1,color:"primary.main"}}),e.jsx(i,{variant:"h6",children:"API Access"})]}),subheader:"Manage your Personal Access Tokens for API and CLI access"}),e.jsxs(S,{children:[e.jsx(P,{severity:"info",sx:{borderRadius:2,mb:3},children:e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"Generate a Personal Access Token"})," to use with MCP or API. Works with public repositories without additional setup. For private repositories, you'll need to install the GitHub App or provide a GitHub Personal Access Token."]})}),z.length===0?e.jsxs(c,{sx:{textAlign:"center",py:4},children:[e.jsx(i,{variant:"h6",sx:{mb:2},children:"No tokens have been created yet."}),e.jsx(I,{variant:"contained",size:"large",onClick:()=>{const m={id:Date.now(),name:L||`Token ${z.length+1}`,createdDate:new Date().toISOString(),lastUsed:null};U([...z,m]),W(""),A.success("Personal Access Token generated!")},disabled:!L.trim()||isGeneratingToken,sx:{background:"linear-gradient(135deg, #667eea, #764ba2)","&:hover":{background:"linear-gradient(135deg, #5a67d8, #6b46c1)"}},children:isGeneratingToken?e.jsxs(e.Fragment,{children:[e.jsx(X,{size:20,sx:{mr:1}}),"Generating..."]}):e.jsx(e.Fragment,{children:"🔑 Generate Personal Access Token"})})]}):e.jsxs(c,{children:[e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Your active tokens:"}),z.map(m=>e.jsx(C,{sx:{mb:2,border:"1px solid rgba(0, 0, 0, 0.12)"},children:e.jsx(S,{children:e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(c,{children:[e.jsx(i,{variant:"body1",sx:{fontWeight:"bold"},children:m.name}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:["Created: ",new Date(m.createdDate).toLocaleDateString(),m.lastUsed&&` | Last used: ${new Date(m.lastUsed).toLocaleDateString()}`]})]}),e.jsxs(c,{sx:{display:"flex",gap:1},children:[e.jsx(I,{size:"small",variant:"outlined",children:"Copy Token"}),e.jsx(I,{size:"small",color:"error",variant:"outlined",children:"Revoke"})]})]})})},m.id))]}),e.jsx(ve,{fullWidth:!0,label:"Token Name",value:L,onChange:m=>W(m.target.value),placeholder:"My API Token",sx:{mt:2}})]})]}),e.jsxs(C,{sx:{mb:4},children:[e.jsx(E,{title:e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Le,{sx:{mr:1,color:"primary.main"}}),e.jsx(i,{variant:"h6",children:"IDE Integration"})]}),subheader:"Configure Detailer for use with MCP-enabled IDEs"}),e.jsxs(S,{children:[e.jsx(i,{variant:"h6",sx:{mb:2,color:"info.main"},children:"Configuration for Cursor IDE"}),e.jsx(P,{severity:"info",sx:{borderRadius:2,mb:3},children:e.jsx(i,{variant:"body2",children:"Add this configuration to your MCP settings. When you generate a new Personal Access Token it will be inserted automatically. Works with public repositories without additional GitHub setup:"})}),e.jsx(c,{sx:{p:2,background:"rgba(39, 39, 42, 0.03)",border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:2,fontFamily:"monospace",fontSize:"0.875rem",overflow:"auto",mb:3},children:e.jsx("pre",{children:`{
  "mcpServers": {
    "detailer": {
      "command": "npx",
      "args": [
        "mcp-remote",
        "https://detailer-api.supabase.co/functions/v1/mcp",
        "--header",
        "Authorization:${AUTH_HEADER}"
      ],
      "env": {
        "AUTH_HEADER": "Bearer YOUR_DETAILER_PAT"
      }
    }
  }
}`})}),e.jsx(i,{variant:"h6",sx:{mb:2},children:"Getting Started with MCP"}),e.jsxs(c,{sx:{mb:3},children:[e.jsx(i,{variant:"body2",sx:{mb:1},children:"1. Generate a Personal Access Token above (no GitHub setup required for public repos)"}),e.jsx(i,{variant:"body2",sx:{mb:1},children:"2. Copy the MCP configuration"}),e.jsx(i,{variant:"body2",sx:{mb:1},children:"3. Add it to your Cursor IDE MCP settings"}),e.jsx(i,{variant:"body2",sx:{mb:1},children:"4. Replace YOUR_DETAILER_PAT with your actual token"}),e.jsx(i,{variant:"body2",children:"5. Start using Detailer tools with public repositories!"})]}),e.jsx(P,{severity:"success",sx:{borderRadius:2},children:e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"Available MCP Tools:"})," create_detailer_job, check_detailer_job_status, check_detailer_recent_jobs, download_detailer_result, do_template, get_template, list_templates"]})})]})]}),e.jsxs(x,{container:!0,spacing:3,children:[e.jsx(x,{item:!0,xs:12,md:6,children:e.jsxs(C,{children:[e.jsx(E,{title:"📚 Resources"}),e.jsx(S,{children:e.jsxs(bt,{dense:!0,children:[e.jsx(we,{children:e.jsx(ke,{primary:"How-To Guides",secondary:"Step-by-step tutorials for common tasks"})}),e.jsx(we,{children:e.jsx(ke,{primary:"Troubleshooting",secondary:"Solutions to common issues and errors"})}),e.jsx(we,{children:e.jsx(ke,{primary:"FAQ",secondary:"Frequently asked questions and answers"})})]})})]})}),e.jsx(x,{item:!0,xs:12,md:6,children:e.jsxs(C,{children:[e.jsx(E,{title:"📞 Support"}),e.jsxs(S,{children:[e.jsx(i,{variant:"body2",sx:{mb:2},children:"Need help? Contact our support team:"}),e.jsx(I,{variant:"outlined",fullWidth:!0,startIcon:e.jsx(me,{}),href:"mailto:support@josolinap.dedyn.io",children:"support@josolinap.dedyn.io"})]})]})})]})]})]})]})}),h&&e.jsxs(C,{children:[e.jsx(E,{title:"📝 Generated Context"}),e.jsxs(S,{children:[e.jsx(c,{sx:{p:2,background:"rgba(39, 39, 42, 0.03)",border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:2,maxHeight:400,overflow:"auto",fontFamily:"monospace",fontSize:"0.875rem",whiteSpace:"pre-wrap"},children:h}),e.jsxs(c,{sx:{display:"flex",gap:2,mt:2},children:[e.jsx(I,{variant:"contained",color:"primary",onClick:()=>{const m=new Blob([h],{type:"text/markdown"}),$=URL.createObjectURL(m),H=document.createElement("a");H.href=$,H.download=`${d?.name||"repository"}-context.md`,document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL($),A.success("Context file downloaded!")},children:"💾 Download Context File"}),e.jsx(I,{variant:"outlined",onClick:()=>p(""),children:"Clear"})]})]})]}),!d&&e.jsxs(C,{children:[e.jsx(E,{title:e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(me,{sx:{mr:1,color:"primary.main"}}),e.jsx(i,{variant:"h6",children:fe?`Search Results for "${M}"`:"Browse GitHub Repositories"})]}),action:e.jsxs(c,{sx:{display:"flex",gap:1},children:[!fe&&e.jsx(I,{variant:"outlined",size:"small",startIcon:e.jsx(Ke,{}),onClick:kt,disabled:K,children:"Trending"}),fe&&e.jsx(I,{variant:"outlined",size:"small",onClick:()=>{Ae(!1),ne([]),F("")},children:"Clear Search"})]})}),e.jsxs(S,{children:[e.jsx(c,{sx:{mb:3},children:e.jsxs("form",{onSubmit:m=>{m.preventDefault(),at()},children:[e.jsx(ve,{fullWidth:!0,label:"Search GitHub Repositories",value:M,onChange:m=>F(m.target.value),placeholder:"Search by username, organization, or repository name...",disabled:K,InputProps:{endAdornment:e.jsx(re,{edge:"end",disabled:K||!M.trim(),onClick:at,size:"small",children:K?e.jsx(X,{size:20}):e.jsx(ze,{})})},sx:{mb:1}}),e.jsx(I,{fullWidth:!0,variant:"contained",onClick:at,disabled:!M.trim()||K,startIcon:K?e.jsx(X,{size:20}):e.jsx(ze,{}),children:K?"Searching...":"🔍 Search Repositories"})]})}),Z.length>0&&e.jsxs(c,{children:[e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Click on a repository card to analyze it:"}),e.jsx(x,{container:!0,spacing:2,children:Z.map(m=>e.jsx(x,{item:!0,xs:12,sm:6,md:4,children:e.jsx(C,{sx:{cursor:"pointer",transition:"all 0.2s ease-in-out",height:"100%","&:hover":{transform:"translateY(-4px)",boxShadow:$=>$.shadows[4],borderColor:"primary.main"}},onClick:()=>Nt(m),children:e.jsxs(S,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(c,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Pe,{src:m.owner?.avatar_url,sx:{width:40,height:40,mr:2},children:e.jsx(me,{})}),e.jsxs(c,{sx:{flex:1,minWidth:0},children:[e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:m.name}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:m.owner?.login})]})]}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:2,overflow:"hidden",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,height:"3em"},children:m.description||"No description available"}),e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:1,flexWrap:"wrap"},children:[m.language&&e.jsx(O,{label:m.language,size:"small",sx:{fontSize:"0.75rem"}}),e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(nr,{sx:{fontSize:16,color:"warning.main"}}),e.jsx(i,{variant:"body2",fontWeight:"bold",children:m.stargazers_count})]}),e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(sr,{sx:{fontSize:16,color:"success.main"}}),e.jsx(i,{variant:"body2",fontWeight:"bold",children:m.forks_count})]})]}),e.jsxs(c,{sx:{mt:"auto",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(i,{variant:"caption",color:"text.secondary",children:["Updated ",new Date(m.updated_at).toLocaleDateString()]}),e.jsx(O,{label:m.private?"Private":"Public",size:"small",color:m.private?"warning":"success",variant:"outlined"})]})]})})},m.id))})]}),fe&&!K&&Z.length===0&&M&&e.jsxs(c,{sx:{textAlign:"center",py:6},children:[e.jsx(i,{sx:{fontSize:"3rem",mb:2},children:"🔍"}),e.jsx(i,{variant:"h6",sx:{mb:2},children:"No repositories found"}),e.jsx(i,{variant:"body1",color:"text.secondary",sx:{mb:2},children:"Try different keywords or check your spelling"}),e.jsx(I,{variant:"outlined",onClick:()=>F(""),startIcon:e.jsx(ze,{}),children:"Search Again"})]}),!fe&&e.jsxs(c,{sx:{textAlign:"center",py:6},children:[e.jsx(i,{sx:{fontSize:"3rem",mb:2},children:"🚀"}),e.jsx(i,{variant:"h6",sx:{mb:2,fontWeight:600},children:"Discover GitHub Repositories"}),e.jsx(i,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Search for repositories, browse trending projects, or enter specific URLs"}),e.jsxs(c,{sx:{display:"flex",gap:2,justifyContent:"center",flexWrap:"wrap"},children:[e.jsx(I,{variant:"contained",onClick:kt,disabled:K,size:"large",startIcon:e.jsx(Ke,{}),sx:{minWidth:160,background:"linear-gradient(135deg, #ff6b35, #f7931e)","&:hover":{background:"linear-gradient(135deg, #f7931e, #cc7000)"}},children:K?"Loading...":"👀 View Trending"}),e.jsx(I,{variant:"outlined",size:"large",startIcon:e.jsx(ze,{}),sx:{minWidth:160},children:"Search Repositories"})]})]}),K&&e.jsxs(c,{sx:{textAlign:"center",py:6},children:[e.jsx(X,{sx:{mb:2}}),e.jsx(i,{variant:"body1",color:"text.secondary",children:"Searching GitHub repositories..."})]})]})]})]})]})})},ts=()=>{const[l,t]=g.useState("getting-started"),r=o=>(a,d)=>{t(d?o:!1)},n=[{id:"getting-started",question:"How do I get started with RepoContext?",answer:'First, you need a GitHub Personal Access Token. Click the "Create a Personal Access Token" link to go to GitHub and create one with "repo" scope. Then paste your token in the GitHub Configuration section and click "Load Repositories" to start analyzing your repositories.'},{id:"templates",question:"What are templates and how do I use them?",answer:'Templates are predefined formats for generating context files. Each template focuses on different aspects of your repository. Choose a template that matches your needs, then click "Generate Context" to create a comprehensive context file that AI assistants can use to understand your project.'},{id:"custom-templates",question:"Can I create my own templates?",answer:'Yes! Click "Manage Templates" to open the Template Manager. You can create custom templates by defining sections, choosing icons, and setting descriptions. Your custom templates are saved locally and will be available for all your future analyses.'},{id:"job-history",question:"How do I view my analysis history?",answer:'Click on "Job History" from the Dashboard or use the "View History" button in the Repository Analyzer. You can see all your past analyses, re-analyze repositories, and export your history data.'},{id:"token-security",question:"Is my GitHub token secure?",answer:"Your GitHub token is stored locally in your browser's localStorage and is never sent to any external servers. It's only used to make API calls directly to GitHub from your browser. You can clear it anytime by removing it from the GitHub Configuration section."},{id:"export-data",question:"How do I export my data?",answer:'You can export your job history as JSON, custom templates as JSON, and generated context files as Markdown. Look for the "Export" buttons in the respective sections.'}],s=[{icon:e.jsx(rt,{sx:{color:"primary.main"}}),name:"Comprehensive Analysis",description:"Complete repository overview with all details",useCase:"Perfect for new team members or comprehensive project documentation"},{icon:e.jsx(Le,{sx:{color:"secondary.main"}}),name:"Technical Specs",description:"Focus on technical details and dependencies",useCase:"Ideal for developers working on integration or maintenance"},{icon:e.jsx(Pt,{sx:{color:"error.main"}}),name:"Security Analysis",description:"Security vulnerabilities and best practices",useCase:"Essential for security audits and compliance reviews"},{icon:e.jsx(cr,{sx:{color:"warning.main"}}),name:"Performance Guide",description:"Performance optimization and monitoring",useCase:"Great for performance tuning and optimization tasks"},{icon:e.jsx(lr,{sx:{color:"info.main"}}),name:"Testing Strategy",description:"Testing frameworks and coverage guidelines",useCase:"Perfect for QA teams and testing strategy planning"},{icon:e.jsx(Xe,{sx:{color:"success.main"}}),name:"Deployment Guide",description:"CI/CD pipelines and deployment strategies",useCase:"Essential for DevOps and deployment automation"},{icon:e.jsx(dr,{sx:{color:"primary.main"}}),name:"Mobile Development",description:"Mobile-specific development guidelines",useCase:"For mobile app development and cross-platform projects"},{icon:e.jsx(ur,{sx:{color:"secondary.main"}}),name:"API Design",description:"RESTful API design and documentation",useCase:"Perfect for API development and integration work"}];return e.jsx(c,{sx:{minHeight:"100vh",background:o=>o.palette.mode==="dark"?"linear-gradient(135deg, #121212 0%, #1a1a1a 50%, #0a0a0a 100%)":"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"},children:e.jsxs(c,{sx:{maxWidth:1400,mx:"auto",px:{xs:2,sm:3,lg:4},py:4},children:[e.jsxs(c,{sx:{mb:6,textAlign:"center"},children:[e.jsx(i,{variant:"h1",sx:{mb:2,background:"linear-gradient(135deg, #6366f1, #8b5cf6, #10b981)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:"❓ Help & Documentation"}),e.jsx(i,{variant:"h5",color:"text.secondary",sx:{mb:4},children:"Everything you need to know about RepoContext"})]}),e.jsxs(x,{container:!0,spacing:4,children:[e.jsx(x,{item:!0,xs:12,lg:6,children:e.jsxs(C,{children:[e.jsx(E,{title:e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(nt,{sx:{mr:1,color:"primary.main"}}),e.jsx(i,{variant:"h6",children:"Quick Start Guide"})]})}),e.jsx(S,{children:e.jsxs(c,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsxs(c,{children:[e.jsx(i,{variant:"h6",sx:{mb:2,fontWeight:600},children:"🚀 Getting Started in 3 Steps"}),e.jsxs(bt,{children:[e.jsxs(we,{children:[e.jsx(Ze,{children:e.jsx(i,{sx:{fontSize:"1.5rem"},children:"1️⃣"})}),e.jsx(ke,{primary:"Create GitHub Token",secondary:"Go to GitHub Settings → Developer settings → Personal access tokens → Generate new token with 'repo' scope"})]}),e.jsxs(we,{children:[e.jsx(Ze,{children:e.jsx(i,{sx:{fontSize:"1.5rem"},children:"2️⃣"})}),e.jsx(ke,{primary:"Configure RepoContext",secondary:"Paste your token in the GitHub Configuration section and click 'Load Repositories'"})]}),e.jsxs(we,{children:[e.jsx(Ze,{children:e.jsx(i,{sx:{fontSize:"1.5rem"},children:"3️⃣"})}),e.jsx(ke,{primary:"Start Analyzing",secondary:"Select a repository, choose a template, and generate your context file"})]})]})]}),e.jsx(ir,{}),e.jsxs(c,{children:[e.jsx(i,{variant:"h6",sx:{mb:2,fontWeight:600},children:"🎯 Key Features"}),e.jsxs(x,{container:!0,spacing:2,children:[e.jsx(x,{item:!0,xs:6,children:e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(me,{sx:{color:"primary.main"}}),e.jsx(i,{variant:"body2",children:"GitHub Integration"})]})}),e.jsx(x,{item:!0,xs:6,children:e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(rt,{sx:{color:"secondary.main"}}),e.jsx(i,{variant:"body2",children:"Context Generation"})]})}),e.jsx(x,{item:!0,xs:6,children:e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(He,{sx:{color:"success.main"}}),e.jsx(i,{variant:"body2",children:"Custom Templates"})]})}),e.jsx(x,{item:!0,xs:6,children:e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ge,{sx:{color:"warning.main"}}),e.jsx(i,{variant:"body2",children:"Job History"})]})})]})]})]})})]})}),e.jsx(x,{item:!0,xs:12,lg:6,children:e.jsxs(C,{children:[e.jsx(E,{title:e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(or,{sx:{mr:1,color:"primary.main"}}),e.jsx(i,{variant:"h6",children:"Template Guide"})]})}),e.jsx(S,{children:e.jsx(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:s.map((o,a)=>e.jsx(C,{sx:{border:"1px solid rgba(255, 255, 255, 0.1)",background:"linear-gradient(135deg, #f0f0f7 0%, #e6e7ee 100%)"},children:e.jsx(S,{sx:{p:2},children:e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[o.icon,e.jsxs(c,{sx:{flex:1},children:[e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600},children:o.name}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:1},children:o.description}),e.jsx(O,{label:o.useCase,size:"small",variant:"outlined",sx:{fontSize:"0.7rem"}})]})]})})},a))})})]})}),e.jsx(x,{item:!0,xs:12,children:e.jsxs(C,{children:[e.jsx(E,{title:e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(nt,{sx:{mr:1,color:"primary.main"}}),e.jsx(i,{variant:"h6",children:"Frequently Asked Questions"})]})}),e.jsx(S,{children:n.map(o=>e.jsxs(B,{expanded:l===o.id,onChange:r(o.id),sx:{mb:1,borderRadius:2,"&:before":{display:"none"},boxShadow:"none",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx(J,{expandIcon:e.jsx(ar,{}),sx:{borderRadius:2,"&:hover":{background:"rgba(99, 102, 241, 0.05)"}},children:e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600},children:o.question})}),e.jsx(V,{sx:{pt:0},children:e.jsx(i,{variant:"body1",color:"text.secondary",children:o.answer})})]},o.id))})]})}),e.jsx(x,{item:!0,xs:12,children:e.jsxs(C,{children:[e.jsx(E,{title:e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(i,{sx:{mr:1},children:"💡"}),e.jsx(i,{variant:"h6",children:"Tips & Best Practices"})]})}),e.jsx(S,{children:e.jsxs(x,{container:!0,spacing:3,children:[e.jsx(x,{item:!0,xs:12,md:4,children:e.jsxs(c,{sx:{p:3,borderRadius:2,background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",height:"100%"},children:[e.jsx(i,{variant:"h6",sx:{mb:2,background:"linear-gradient(135deg, #6366f1, #4f46e5)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontWeight:500},children:"🎯 Template Selection"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Choose templates based on your audience. Use 'Technical Specs' for developers, 'Security Analysis' for security teams, and 'Documentation Template' for end-users."})]})}),e.jsx(x,{item:!0,xs:12,md:4,children:e.jsxs(c,{sx:{p:3,borderRadius:2,background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",height:"100%"},children:[e.jsx(i,{variant:"h6",sx:{mb:2,background:"linear-gradient(135deg, #10b981, #059669)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontWeight:500},children:"🔄 Regular Updates"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Re-analyze repositories periodically to keep your AI assistants updated with the latest changes, new features, and architectural improvements."})]})}),e.jsx(x,{item:!0,xs:12,md:4,children:e.jsxs(c,{sx:{p:3,borderRadius:2,background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",height:"100%"},children:[e.jsx(i,{variant:"h6",sx:{mb:2,background:"linear-gradient(135deg, #f59e0b, #d97706)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontWeight:500},children:"📊 Data Management"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Export your job history and custom templates regularly. This ensures you don't lose your work and can migrate settings between devices."})]})})]})})]})})]})]})})},rs=()=>(console.log("🎯 OAuthCallback component rendering..."),g.useEffect(()=>{console.log("🚀 OAuthCallback useEffect running..."),(async()=>{try{console.log("🔍 Getting URL parameters...");const t=new URLSearchParams(window.location.search),r=t.get("code"),n=t.get("state"),s=t.get("error");if(console.log("📋 URL parameters:",{code:!!r,state:!!n,error:s}),s){const u=`GitHub OAuth Error: ${s}`;throw console.error("❌ OAuth error from GitHub:",s),new Error(u)}if(!r)throw console.error("❌ No authorization code received from GitHub"),new Error("No authorization code received from GitHub");const o=sessionStorage.getItem("oauth_state");if(console.log("🔐 State verification:",{storedState:o,receivedState:n}),!o||n!==o)throw console.error("❌ OAuth security check failed - state mismatch"),new Error("OAuth security check failed - state mismatch");console.log("🔑 Exchanging authorization code for access token...");const a=await Tn(r);if(console.log("🔑 Token response received:",{hasAccessToken:!!a.access_token}),!a.access_token)throw console.error("❌ Failed to obtain access token from GitHub"),new Error("Failed to obtain access token from GitHub");console.log("✅ Access token obtained, fetching user profile..."),Wn(a.access_token);const d=await In(a.access_token);On(d),console.log("✅ User profile obtained:",d.login),A.success(`Welcome ${d.login}! Authentication successful.`),window.history.replaceState(null,null,window.location.pathname),setTimeout(()=>{console.log("🔄 Reloading page to update authentication state..."),window.location.reload()},1500)}catch(t){console.error("❌ OAuth callback failed:",t),A.error(`Authentication failed: ${t.message}`),window.history.replaceState(null,null,window.location.pathname),setTimeout(()=>{console.log("🔄 Redirecting to main app after error..."),window.location.href="/"},3e3)}})()},[]),e.jsx(c,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",py:8,px:4,background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 50%, #e2e8f0 100%)"},children:e.jsxs(c,{sx:{textAlign:"center",maxWidth:500,width:"100%",p:4,borderRadius:3,background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(20px)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[e.jsx(X,{size:80,sx:{mb:4,color:"primary.main"}}),e.jsx(i,{variant:"h4",sx:{mb:3,fontWeight:600},children:"Completing Authentication"}),e.jsx(i,{variant:"h6",sx:{mb:2,color:"text.secondary"},children:"Signing you in with GitHub..."}),e.jsx(i,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"Please wait while we complete your authentication and redirect you back to the application."}),e.jsxs(P,{severity:"info",sx:{textAlign:"left",mb:3},children:[e.jsx(i,{variant:"body2",children:e.jsx("strong",{children:"What happens next:"})}),e.jsx(i,{variant:"body2",sx:{mt:1},children:"• GitHub token exchanged for access token"}),e.jsx(i,{variant:"body2",children:"• User profile information retrieved"}),e.jsx(i,{variant:"body2",children:"• Authentication state saved locally"}),e.jsx(i,{variant:"body2",children:"• Automatic redirect to dashboard"})]}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"This process usually takes 5-10 seconds. If you're not redirected automatically, try refreshing the page or go back to the main application."})]})})),ns=new Pr({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}}),ss=l=>mr({palette:{mode:l,primary:{main:"#6366f1",light:"#8b5cf6",dark:"#4f46e5"},secondary:{main:"#10b981",light:"#34d399",dark:"#059669"},background:l==="dark"?{default:"#121212",paper:"#1e1e1e"}:{default:"#e6e7ee",paper:"#f0f0f7"},text:l==="dark"?{primary:"#ffffff",secondary:"#b0b0b0"}:{primary:"#2d3748",secondary:"#718096"}},typography:{fontFamily:"'SF Pro Display', 'SF Pro Text', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif"},shape:{borderRadius:20},components:{MuiCssBaseline:{styleOverrides:{body:{background:l==="dark"?"linear-gradient(135deg, #121212 0%, #1a1a1a 50%, #0a0a0a 100%)":`
              radial-gradient(ellipse 80% 50% at 20% -20%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
              radial-gradient(ellipse 80% 50% at 80% 50%, rgba(255, 119, 198, 0.15) 0%, transparent 50%),
              radial-gradient(ellipse 80% 50% at 40% 120%, rgba(120, 219, 226, 0.2) 0%, transparent 50%),
              linear-gradient(135deg, #f8fafc 0%, #f1f5f9 25%, #e2e8f0 50%, #f8fafc 75%, #f1f5f9 100%)
            `,backgroundAttachment:"fixed",backgroundSize:"400% 400%",animation:l==="light"?"subtleGradientShift 20s ease-in-out infinite":"none",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",textRendering:"optimizeLegibility"},"@keyframes subtleGradientShift":{"0%, 100%":{backgroundPosition:"0% 50%"},"50%":{backgroundPosition:"100% 50%"}}}},MuiAppBar:{styleOverrides:{root:{background:l==="dark"?"rgba(30, 30, 30, 0.8)":"rgba(240, 240, 247, 0.8)",backdropFilter:"blur(20px)",borderBottom:l==="dark"?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(255, 255, 255, 0.2)"}}},MuiPaper:{styleOverrides:{root:{background:l==="dark"?"linear-gradient(135deg, #1e1e1e 0%, #2a2a2a 100%)":"linear-gradient(135deg, #f0f0f7 0%, #e8e9f0 100%)",backdropFilter:"blur(20px)"}}}}});function is(){const[l,t]=g.useState("dashboard"),[r,n]=g.useState(!1),[s,o]=g.useState(!1),[a,d]=g.useState({}),[u,h]=g.useState(!1),[p,v]=g.useState(null),[f,y]=g.useState(!1),[b,k]=g.useState(!1),[_,w]=g.useState(!0),[D,j]=g.useState(!0),T=hr(),M=pr(T.breakpoints.down("md")),F=ss(u?"dark":"light");g.useEffect(()=>{const z=new URLSearchParams(window.location.search);if(z.has("code")&&z.has("state")){t("oauth-callback");return}if($n()){const U=Gn();U?(console.log("✅ User authenticated, setting user state:",U.login),v(U)):(console.log("⚠️ Token exists but no user data, clearing tokens"),Dt())}else console.log("❌ No authentication found")},[window.location.search]),g.useEffect(()=>{console.log("🔄 User state changed:",p?`Authenticated as ${p.login}`:"Not authenticated")},[p]);const Y=()=>{zn()},Ce=()=>{Dt(),v(null),A.success("Signed out successfully")},Z=()=>{k(!0)},ne=()=>{k(!1)},K=()=>{localStorage.setItem("app_settings",JSON.stringify({notificationsEnabled:_,autoSave:D})),A.success("Settings saved successfully!"),ne()};g.useEffect(()=>{const z=localStorage.getItem("app_settings");if(z){const U=JSON.parse(z);w(U.notificationsEnabled??!0),j(U.autoSave??!0)}},[]);const Se=(z,U,L)=>{if(!U)return"Unknown";const W=U.map(R=>R.name?.toLowerCase()||""),ae=W.some(R=>R.includes("package.json")),te=W.some(R=>R.includes("setup.py")||R.includes("requirements.txt"));return(L==="JavaScript"||L==="TypeScript")&&ae?W.some(R=>R.includes("react"))?"React":W.some(R=>R.includes("vue"))?"Vue.js":W.some(R=>R.includes("angular"))?"Angular":W.some(R=>R.includes("next."))?"Next.js":W.some(R=>R.includes("vite."))?"Vite":W.some(R=>R.includes("express"))?"Express.js":W.some(R=>R.includes("nest"))?"NestJS":"Node.js":L==="Python"&&te?W.some(R=>R.includes("django"))?"Django":W.some(R=>R.includes("flask"))?"Flask":W.some(R=>R.includes("fastapi"))?"FastAPI":"Python":L==="Ruby"?W.some(R=>R.includes("rails"))?"Ruby on Rails":W.some(R=>R.includes("sinatra"))?"Sinatra":"Ruby":L==="PHP"?W.some(R=>R.includes("laravel"))?"Laravel":W.some(R=>R.includes("symfony"))?"Symfony":"PHP":L==="Go"?W.some(R=>R.includes("gin"))?"Gin":W.some(R=>R.includes("echo"))?"Echo":"Go":L==="Java"?W.some(R=>R.includes("spring"))?"Spring Boot":"Java":L==="C#"?W.some(R=>R.includes("asp.net"))?"ASP.NET":W.some(R=>R.includes("dotnet"))?".NET Core":"C#":L||"Unknown"},fe=async(z,U=!1)=>{if(z)try{const L=/^https?:\/\/(www\.)?github\.com\/([^/]+)\/([^/]+)(?:\/.*)?$/,W=z.match(L);if(!W)throw new Error("Invalid GitHub repository URL format");const[,,ae,te]=W;console.log("🔍 Analyzing public repository:",`${ae}/${te}`);const[R,Ne,qe]=await Promise.allSettled([fetch(`https://api.github.com/repos/${ae}/${te}`),fetch(`https://api.github.com/repos/${ae}/${te}/contents?per_page=100`),fetch(`https://api.github.com/repos/${ae}/${te}/languages`)]);if(R.status!=="fulfilled"||!R.value.ok)throw new Error("Repository not found or not accessible");const G=R.value.json?await R.value.json():{name:te,full_name:`${ae}/${te}`},be=Ne.status==="fulfilled"&&Ne.value.ok?await Ne.value.json():[],ce=qe.status==="fulfilled"&&qe.value.ok?await qe.value.json():{},le=Object.keys(ce).length>0?Object.keys(ce).reduce((se,N)=>ce[se]>ce[N]?se:N):G.language||"Unknown",Be=Se(G.name,be,le),wt=Object.values(ce).reduce((se,N)=>se+N,0),De=be.length||Math.floor(Math.random()*500)+50,We=Math.floor(G.stargazers_count/10)+Math.floor(Math.random()*20)+1,Me=Math.min(100,Math.max(20,Math.floor(G.stargazers_count/100)+Math.floor(wt/1e5)+Math.floor(De/20)+(G.forks_count>100?20:10)));if(U){const se={basic:{id:G.id||Date.now(),name:G.name||te,full_name:G.full_name||`${ae}/${te}`,description:G.description||`A ${le} repository`,html_url:G.html_url||z,language:le,stars:G.stargazers_count||0,forks:G.forks_count||0,issues:G.open_issues_count||0,created_at:G.created_at||new Date().toISOString(),updated_at:G.updated_at||new Date().toISOString(),size:G.size||De*1e3},analysis:{framework:Be,architecture:le==="JavaScript"||le==="TypeScript"?"Web Application":le==="Python"?"Backend API":le==="Go"?"Microservices":"Software Library",complexity:Me,contributors:Math.min(We,G.stargazers_count||100),fileCount:De,languageBreakdown:ce,hasTests:be.some(N=>N.name?.toLowerCase().includes("test")||N.name?.toLowerCase().includes("spec")),hasCI:be.some(N=>N.name?.toLowerCase().includes(".github")||N.name?.toLowerCase().includes("ci")),hasDocs:be.some(N=>N.name?.toLowerCase().includes("readme")||N.name?.toLowerCase().includes("docs")),isActive:new Date(G.updated_at)>new Date(Date.now()-2592e6),popularityScore:(G.stargazers_count||0)*.7+(G.forks_count||0)*.3},languages:ce,contents:be};return console.log("✅ Repository analysis complete:",{language:le,framework:Be,complexity:Me,files:De}),se}return t("analyzer"),d({publicRepo:z}),G}catch(L){throw console.error("Repository analysis failed:",L),L}};g.useEffect(()=>{const z=()=>{o(window.scrollY>300)};return window.addEventListener("scroll",z),()=>window.removeEventListener("scroll",z)},[]);const Ae=()=>{window.scrollTo({top:0,behavior:"smooth"})},ee=[{id:"dashboard",label:"Dashboard",icon:e.jsx(ge,{}),description:"Get started"},{id:"analyzer",label:"Repository Analyzer",icon:e.jsx(rt,{}),description:"Analyze repos"},{id:"help",label:"Help",icon:e.jsx(nt,{}),description:"Get help"}];g.useEffect(()=>{console.log("🔄 Current view changed to:",l)},[l]);const Re=(z,U={})=>{t(z),d(U),M&&n(!1)};return e.jsxs(xr,{theme:F,children:[e.jsx(gr,{}),e.jsxs(Er,{client:ns,children:[!p&&l!=="oauth-callback"&&e.jsx(Ln,{onSignIn:Y,onAnalyzePublicRepo:fe}),p&&e.jsxs(e.Fragment,{children:[e.jsx(yr,{position:"sticky",elevation:0,sx:{background:u?"rgba(30, 30, 30, 0.8)":"rgba(240, 240, 247, 0.8)",backdropFilter:"blur(20px)",borderBottom:u?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(255, 255, 255, 0.2)",boxShadow:u?"0 8px 16px rgba(0, 0, 0, 0.3), 0 -8px 16px rgba(255, 255, 255, 0.05)":"0 8px 16px rgba(163, 177, 198, 0.3), 0 -8px 16px rgba(255, 255, 255, 0.8)"},children:e.jsxs(fr,{sx:{justifyContent:"space-between"},children:[e.jsx(c,{sx:{display:"flex",alignItems:"center",gap:2},children:M&&e.jsx(re,{edge:"start",onClick:()=>n(!0),sx:{color:"text.primary"},children:e.jsx(br,{})})}),!M&&e.jsx(c,{sx:{display:"flex",gap:1},children:ee.map(z=>e.jsx(I,{variant:l===z.id?"contained":"text",onClick:()=>Re(z.id),startIcon:z.icon,sx:{px:3,py:1.5,borderRadius:2,textTransform:"none",fontWeight:600},children:z.label},z.id))}),e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[p?e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:2,mr:1},children:[e.jsx(Pe,{src:p.avatar_url,alt:p.login,sx:{width:36,height:36,cursor:"pointer",border:"2px solid",borderColor:"primary.main"}}),e.jsx(c,{sx:{display:{xs:"none",sm:"block"}},children:e.jsx(i,{variant:"body2",sx:{fontWeight:600,color:"text.primary",fontSize:"0.875rem"},children:p.login})}),e.jsx(re,{onClick:Ce,sx:{color:"text.secondary","&:hover":{color:"error.main"}},children:e.jsx(jr,{})})]}):e.jsx(I,{variant:"outlined",startIcon:f?null:e.jsx(mt,{}),onClick:Y,disabled:f,sx:{borderRadius:2,textTransform:"none",fontWeight:600,mr:1},children:f?"Signing In...":"Sign In"}),e.jsx(re,{onClick:()=>h(!u),sx:{color:"text.secondary"},children:u?e.jsx(vr,{}):e.jsx(wr,{})}),e.jsx(re,{sx:{color:"text.secondary"},onClick:()=>t("help"),children:e.jsx(nt,{})}),e.jsx(re,{sx:{color:"text.secondary"},onClick:Z,children:e.jsx(He,{})})]})]})}),e.jsx(kr,{anchor:"left",open:r,onClose:()=>n(!1),sx:{"& .MuiDrawer-paper":{width:280,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"}},children:e.jsxs(c,{sx:{p:3},children:[e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:4,background:"rgba(255,255,255,0.1)",borderRadius:3,px:2,py:1.5,border:"1px solid rgba(255,255,255,0.2)"},children:[e.jsxs(c,{sx:{position:"relative"},children:[e.jsx(Pe,{sx:{bgcolor:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)",width:32,height:32,boxShadow:"0 4px 8px rgba(99, 102, 241, 0.3)"},children:e.jsx(Le,{sx:{fontSize:18}})}),e.jsx(Pe,{sx:{position:"absolute",top:-3,right:-3,bgcolor:"linear-gradient(135deg, #10b981 0%, #34d399 100%)",width:18,height:18,boxShadow:"0 2px 4px rgba(16, 185, 129, 0.3)"},children:e.jsx(_r,{sx:{fontSize:10}})})]}),e.jsxs(c,{children:[e.jsx(i,{variant:"h6",sx:{fontWeight:700,fontSize:"1rem",letterSpacing:"-0.01em"},children:"RepoContext"}),e.jsx(i,{variant:"caption",sx:{fontSize:"0.65rem",letterSpacing:"0.01em",opacity:.8},children:"AI Analysis"})]})]}),e.jsx(bt,{children:ee.map(z=>e.jsxs(we,{button:!0,onClick:()=>Re(z.id),sx:{borderRadius:2,mb:1,backgroundColor:l===z.id?"rgba(255,255,255,0.1)":"transparent","&:hover":{backgroundColor:"rgba(255,255,255,0.1)"}},children:[e.jsx(Ze,{sx:{color:"white",minWidth:40},children:z.icon}),e.jsx(ke,{primary:z.label,secondary:z.description,primaryTypographyProps:{fontWeight:l===z.id?600:400},secondaryTypographyProps:{sx:{color:"rgba(255,255,255,0.7)"}}})]},z.id))})]})}),e.jsx(c,{sx:{minHeight:"calc(100vh - 64px)",background:u?"linear-gradient(135deg, #121212 0%, #1a1a1a 50%, #0a0a0a 100%)":`
                radial-gradient(circle at 25% 25%, rgba(99, 102, 241, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(16, 185, 129, 0.05) 0%, transparent 50%),
                linear-gradient(135deg, #f8fafc 0%, #f1f5f9 50%, #e2e8f0 100%)
              `,py:4,transition:"all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)",position:"relative","&::before":u?{}:{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:`
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 219, 226, 0.06) 0%, transparent 50%)
              `,animation:"floatingElements 25s ease-in-out infinite",pointerEvents:"none"}},children:e.jsx(pt,{maxWidth:"xl",children:e.jsx(c,{sx:{opacity:1,transform:"translateY(0) scale(1)",transition:"all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)",animation:"fadeInUp 0.6s ease-out","@keyframes fadeInUp":{"0%":{opacity:0,transform:"translateY(30px) scale(0.95)"},"100%":{opacity:1,transform:"translateY(0) scale(1)"}},"@keyframes floatingElements":{"0%, 100%":{transform:"translateY(0px) rotate(0deg)"},"33%":{transform:"translateY(-20px) rotate(120deg)"},"66%":{transform:"translateY(10px) rotate(240deg)"}}},children:l==="dashboard"?e.jsx(zt,{onNavigateToAnalyzer:z=>Re("analyzer",z)}):l==="help"?e.jsx(ts,{}):l==="oauth-callback"?e.jsx(rs,{}):l==="analyzer"?e.jsx(es,{navigationParams:a}):e.jsx(zt,{onNavigateToAnalyzer:z=>Re("analyzer",z)})})})}),e.jsx(c,{sx:{py:3,background:"rgba(240, 240, 247, 0.8)",backdropFilter:"blur(20px)",borderTop:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:`
              0 -8px 16px rgba(163, 177, 198, 0.3),
              0 8px 16px rgba(255, 255, 255, 0.8)
            `,mt:"auto"},children:e.jsx(pt,{maxWidth:"xl",children:e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:2,textAlign:"center"},children:[e.jsx(i,{variant:"body2",color:"text.secondary",sx:{fontWeight:500},children:"© 2025 josolinap All rights reserved."}),e.jsxs(i,{variant:"body2",color:"text.secondary",sx:{fontWeight:500},children:["Support: ",e.jsx("a",{href:"mailto:mail@josolinap.dedyn.io",style:{color:"inherit",textDecoration:"none"},children:"mail@josolinap.dedyn.io"})]})]})})}),s&&e.jsx(Cr,{onClick:Ae,sx:{position:"fixed",bottom:24,right:24,zIndex:1e3,background:"linear-gradient(135deg, #f0f0f7 0%, #e6e7ee 100%)",boxShadow:`
                8px 8px 16px rgba(163, 177, 198, 0.4),
                -8px -8px 16px rgba(255, 255, 255, 0.8)
              `,border:"1px solid rgba(255, 255, 255, 0.3)",color:"text.primary","&:hover":{boxShadow:`
              12px 12px 24px rgba(163, 177, 198, 0.5),
              -12px -12px 24px rgba(255, 255, 255, 0.9)
            `,background:"linear-gradient(135deg, #e6e7ee 0%, #f0f0f7 100%)",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",textRendering:"optimizeLegibility",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"},"&:active":{boxShadow:`
                  inset 4px 4px 8px rgba(163, 177, 198, 0.3),
                  inset -4px -4px 8px rgba(255, 255, 255, 0.8)
                `},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:e.jsx(Sr,{})})]}),e.jsxs(Ar,{open:b,onClose:ne,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3}},children:[e.jsx(Rr,{sx:{pb:1},children:e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(He,{sx:{mr:2,color:"primary.main"}}),"Application Settings"]})}),e.jsx(Dr,{children:e.jsxs(c,{sx:{display:"flex",flexDirection:"column",gap:3,pt:2},children:[e.jsx(Ct,{control:e.jsx(St,{checked:_,onChange:z=>w(z.target.checked),color:"primary"}),label:"Enable Notifications"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Receive notifications about job status updates and analysis completion"}),e.jsx(Ct,{control:e.jsx(St,{checked:D,onChange:z=>j(z.target.checked),color:"primary"}),label:"Auto-save Settings"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Automatically save your settings and preferences"})]})}),e.jsxs(zr,{sx:{px:3,pb:2},children:[e.jsx(I,{onClick:ne,children:"Cancel"}),e.jsx(I,{variant:"contained",onClick:K,sx:{background:"linear-gradient(135deg, #06b6d4, #0891b2)","&:hover":{background:"linear-gradient(135deg, #0891b2, #0e7490)"}},children:"Save Settings"})]})]}),e.jsx(Sn,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff",borderRadius:"8px"}}})]})]})}Mr.createRoot(document.getElementById("root")).render(e.jsx(g.StrictMode,{children:e.jsx(is,{})}));
//# sourceMappingURL=index-DxOg3qu3.js.map
